{"version":3,"sources":["webpack://olms/webpack/bootstrap","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/types.js","webpack://olms/./node_modules/assert/assert.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/values.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/runtime_error.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/color.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/compound_expression.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/evaluation_context.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/collator.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/interpolate.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/extend.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/interpolate.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/let.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/coalesce.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/step.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/var.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/is_constant.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/coercion.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/array.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/assertion.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/literal.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/parsing_context.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/parsing_error.js","webpack://olms/(webpack)/buildin/global.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/index.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/stops.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/function/index.js","webpack://olms/./node_modules/ol/asserts.js","webpack://olms/./node_modules/ol/index.js","webpack://olms/./stylefunction.js","webpack://olms/./node_modules/mapbox-to-css-font/index.js","webpack://olms/external \"ol.source.XYZ\"","webpack://olms/external \"ol.source.VectorTile\"","webpack://olms/external \"ol.source.Vector\"","webpack://olms/external \"ol.source.TileJSON\"","webpack://olms/external \"ol.layer.VectorTile\"","webpack://olms/external \"ol.layer.Vector\"","webpack://olms/external \"ol.layer.Tile\"","webpack://olms/external \"ol.Observable\"","webpack://olms/external \"ol.format.MVT\"","webpack://olms/external \"ol.format.GeoJSON\"","webpack://olms/external \"ol.Map\"","webpack://olms/external \"ol.tilegrid\"","webpack://olms/external \"ol.proj\"","webpack://olms/./node_modules/webfont-matcher/lib/fonts/google.js","webpack://olms/./util.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/feature_filter/index.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/function/convert.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/result.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/length.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/equals.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/case.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/match.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/at.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/definitions/index.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/expression/scope.js","webpack://olms/./node_modules/inherits/inherits_browser.js","webpack://olms/./node_modules/util/support/isBufferBrowser.js","webpack://olms/./node_modules/process/browser.js","webpack://olms/./node_modules/util/util.js","webpack://olms/./node_modules/@mapbox/unitbezier/index.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/get_type.js","webpack://olms/./node_modules/csscolorparser/csscolorparser.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/color_spaces.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/reference/latest.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/util/ref_properties.js","webpack://olms/./node_modules/@mapbox/mapbox-gl-style-spec/deref.js","webpack://olms/external \"ol.geom.Point\"","webpack://olms/external \"ol.style.Circle\"","webpack://olms/./node_modules/ol/style/TextPlacement.js","webpack://olms/./node_modules/ol/math.js","webpack://olms/./node_modules/ol/AssertionError.js","webpack://olms/./node_modules/ol/color.js","webpack://olms/./node_modules/ol/webgl.js","webpack://olms/./node_modules/ol/style/Fill.js","webpack://olms/./node_modules/ol/style/Text.js","webpack://olms/external \"ol.style.Icon\"","webpack://olms/external \"ol.style.Stroke\"","webpack://olms/external \"ol.style.Fill\"","webpack://olms/external \"ol.style.Style\"","webpack://olms/./index.js","webpack://olms/./olms.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","array","toString","checkSubtype","expected","kind","itemType","N","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","valueMemberTypes","iterator","next","done","memberType","err","return","NullType","NumberType","StringType","BooleanType","ColorType","ObjectType","ValueType","ErrorType","CollatorType","type","compare","a","b","x","length","y","len","Math","min","isBuffer","global","Buffer","_isBuffer","util","hasOwn","pSlice","Array","slice","functionsHaveNames","pToString","obj","isView","arrbuf","ArrayBuffer","DataView","buffer","assert","ok","regex","getName","func","isFunction","match","truncate","inspect","something","rawname","fail","actual","message","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","isDate","getTime","isRegExp","source","multiline","lastIndex","ignoreCase","_typeof","Float32Array","Float64Array","Uint8Array","actualIndex","indexOf","push","actualVisitedObjects","isPrimitive","getPrototypeOf","aIsArgs","isArguments","bIsArgs","ka","objectKeys","kb","sort","objEquiv","expectedException","test","e","Error","isPrototypeOf","_throws","shouldThrow","block","TypeError","error","_tryBlock","userProvidedMessage","isUnwantedException","isError","isUnexpectedException","options","this","generatedMessage","self","getMessage","captureStackTrace","stack","out","fn_name","idx","next_line","substring","inherits","equal","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","keys","validateRGBA","g","join","isValue","mixed","Color","Collator","isArray","item","typeOf","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_types","_assert2","default","_collator","RuntimeError","_classCallCheck","_csscolorparser","arguments","_toArray","toArray","_toArray2","_slicedToArray","round","input","rgba","parseCSSColor","black","white","transparent","CompoundExpression","evaluate","args","_evaluate","ctx","fn","forEach","concat","map","arg","serialize","context","op","definition","definitions","availableOverloads","overloads","filter","_ref","signature","parsedArgs","params","parsed","parse","signatureContext","_ref3","_ref4","ParsingContext","registry","path","scope","errors","apply","signatures","_ref5","stringifySignature","actualTypes","_values","geometryTypes","EvaluationContext","_parseColorCache","feature","id","properties","cached","caseSensitive","diacriticSensitive","locale","sensitivity","collator","Intl","usage","lhs","rhs","resolvedOptions","CollatorExpression","interpolate","_stops","Interpolate","interpolation","stops","labels","outputs","_ref2","label","expression","stopCount","index","findStopLessThanOrEqualTo","lower","upper","interpolationFactor","outputLower","outputUpper","toLowerCase","_toConsumableArray","output","possibleOutputs","serialized","base","controlPoints","exponentialInterpolation","UnitBezier","solve","_args","rest","String","some","outputType","expectedType","labelKey","valueKey","lowerValue","upperValue","difference","progress","pow","_len","inputs","_key","k","number","color","from","to","Let","bindings","result","expr","Coalesce","eachChild","child","omitTypeAnnotations","Step","unshift","Infinity","Var","boundExpression","has","isFeatureConstant","isGlobalPropertyConstant","types","to-number","to-color","Coercion","parseColor","JSON","stringify","num","Number","isNaN","string","boolean","ArrayAssertion","floor","Assertion","Literal","_is_constant","Scope","part","_parse","Expr","isConstant","isTypeAnnotation","childrenConstant","ec","ParsingError","_this","_possibleConstructorReturn","__proto__","Function","eval","window","isExpression","createExpression","createPropertyExpression","normalizePropertyExpression","specification","_function","StylePropertyFunction","constant","_result","StyleExpression","propertySpec","_warningHistory","_defaultValue","spec","getDefaultValue","_enumValues","values","globals","_evaluator","val","v","console","warn","parser","enum","getExpectedType","success","ZoomConstantExpression","_styleExpression","evaluateWithoutErrorHandling","ZoomDependentExpression","zoomCurve","zoomStops","_interpolationType","isZoomConstant","findZoomCurve","childResult","parameters","_parameters","_specification","_extend2","createFunction","lowerIndex","upperIndex","currentIndex","currentValue","max","isColor","zoomAndFeatureDependent","featureDependent","zoomDependent","function","stop","colorSpace","colorSpaces","innerFun","hashedStops","categoricalKeyType","evaluateExponentialFunction","evaluateIntervalFunction","evaluateCategoricalFunction","evaluateIdentityFunction","featureFunctions","zoom","featureFunctionStops","z","_","coalesce","identityFunction","keyType","_get_type2","interp","colorspace","reverse","forward","evaluatedLower","evaluatedUpper","assertion","errorCode","childCtor","parentCtor","constructor","getUid","ol_uid","uidCounter_","_webgl","WEBGL_MAX_TEXTURE_SIZE","DEBUG_WEBGL","WEBGL_EXTENSIONS","HAS_WEBGL","canvas","document","createElement","gl","getContext","failIfMajorPerformanceCaveat","getParameter","MAX_TEXTURE_SIZE","getSupportedExtensions","VERSION","getValue","olLayer","glStyle","resolutions","spriteData","spriteImageUrl","getFonts","res","version","spriteImage","spriteImgSize","img","Image","crossOrigin","onload","width","height","changed","src","measureCache","wrapText","text","font","em","wrappedText","measureText","words","split","line","lines","ii","word","allLayers","_deref2","layers","layersBySourceLayer","mapboxLayers","mapboxSource","layer","layerId","sourceLayer","functionCache","filterCache","textHalo","Stroke","textColor","Fill","iconImageCache","patternCache","styles","styleFunction","resolution","getProperties","_util","getZoomForResolution","getGeometry","getType","f","stylesLength","layerData","layout","emptyObj","paint","visibility","minzoom","maxzoom","evaluateFilter","opacity","fill","stroke","strokeColor","style","fillIcon","icon","fromTemplate","getFill","getStroke","getText","Style","setZIndex","icon_cache_key","pattern","spriteImageData","globalAlpha","drawImage","createPattern","setColor","colorWithOpacity","setLineCap","setLineJoin","setMiterLimit","setWidth","setLineDash","hasImage","iconImg","skipLabel","iconImage","styleGeom","geom","getFlatMidpoint","extent","getExtent","sqrt","Point","getImage","setGeometry","iconSize","iconColor","data","getImageData","cc","putImageData","Icon","imgSize","scale","pixelRatio","size","offset","setRotation","deg2rad","setOpacity","setImage","setText","circleRadius","circleStrokeColor","circleColor","circleOpacity","circleStrokeWidth","Circle","radius","Text","textSize","fontArray","_mapboxToCssFont2","textTransform","toUpperCase","wrappedLabel","setFont","textAnchor","placement","setPlacement","textAlign","setTextAlign","textBaseline","setTextBaseline","textOffset","setOffsetX","setOffsetY","setFill","haloColor","setStroke","setStyle","set","_expression","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","expressionData","rawExpression","compiledExpression","zoomObj","layoutOrPaint","functions","isExpr","_convert2","_feature_filter2","colorCache","colorData","templateRegEx","parts","fontWeights","thin","hairline","ultra-light","extra-light","light","book","regular","normal","plain","roman","standard","medium","semi-bold","demi-bold","bold","heavy","extra-bold","ultra-black","extra-black","ultra-bold","heavy-black","fat","poster","italicRE","fontCache","fonts","cssData","weight","fontFamilies","maybeWeight","w","pop","replace","fontFamily","ol","XYZ","VectorTile","Vector","TileJSON","Tile","Observable","format","MVT","GeoJSON","Map","tilegrid","proj","families","title","link","getNames","getLink","normalizeName","degrees","PI","candidate","zoomFactor","log","isExpressionFilter","convertFilter","compiled","filterSpec","globalProperties","property-function","zoom-function","convertComparisonOp","convertNegation","filters","convertDisjunctionOp","convertInOp","convertHasOp","convertValue","convertPropertyFunction","defaultExpression","getFunctionType","inputType","isStep","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","appendStopPair","fixupDegenerateStepCurve","curve","tokens","re","pos","exec","literal","convertTokenString","featureFunctionParameters","convertZoomAndPropertyFunction","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","convertZoomFunction","convertIdentityFunction","Length","isComparableType","makeComparison","negate","Comparison","_createClass","Equals","NotEquals","Case","branches","otherwise","_ref6","_ref7","Match","cases","sortedLabels","groupedByOutput","outputLookup","outputIndex","coerceLabel","labelContext","abs","MAX_SAFE_INTEGER","At","_equals","expressions","==","!=","at","case","let","step","var","alpha","lt","gt","lteq","_ref8","gteq","_ref9","_ref10","varargs","register","_ref19","typeof","_ref21","to-string","_ref23","to-boolean","_ref25","Boolean","to-rgba","_ref27","rgb","_ref29","_ref31","_ref32","_ref33","_ref35","_ref36","geometry-type","geometryType","heatmap-density","heatmapDensity","line-progress","lineProgress","+","*","-","_ref37","_ref38","_ref39","/","_ref41","_ref42","%","_ref43","_ref44","ln2","LN2","pi","E","^","_ref45","_ref46","_ref47","log10","_ref49","ln","_ref51","log2","_ref53","sin","_ref55","cos","_ref57","tan","_ref59","asin","_ref61","acos","_ref63","atan","_ref65","_ref67","_ref69","_ref71","ceil","_ref73","filter-==","_ref75","_ref76","filter-id-==","_ref77","filter-type-==","_ref79","filter-<","_ref81","_ref82","filter-id-<","_ref83","filter->","_ref85","_ref86","filter-id->","_ref87","filter-<=","_ref89","_ref90","filter-id-<=","_ref91","filter->=","_ref93","_ref94","filter-id->=","_ref95","filter-has","_ref97","filter-has-id","filter-type-in","_ref99","filter-id-in","_ref101","filter-in-small","_ref103","_ref104","filter-in-large","_ref105","_ref106","j","binarySearch",">","_ref13","_ref14","<","_ref11","_ref12",">=","_ref17","_ref18","<=","_ref15","_ref16","all","_ref107","_ref108","any","_ref109","_ref110","!","_ref111","is-supported-script","_ref113","isSupportedScript","upcase","_ref115","downcase","_ref117","resolved-locale","_ref119","resolvedLocale","parent","ctor","superCtor","super_","writable","configurable","TempCtor","copy","readUInt8","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","formatRegExp","isString","objects","str","isNull","isObject","deprecate","msg","isUndefined","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","recurseTimes","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","hash","arrayToHash","getOwnPropertyNames","formatError","RegExp","Date","braces","toUTCString","formatProperty","formatArray","reduce","prev","cur","numLinesEst","reduceToSingleString","desc","getOwnPropertyDescriptor","substr","ar","objectToString","pad","debuglog","NODE_DEBUG","pid","italic","underline","inverse","grey","blue","cyan","green","magenta","red","yellow","special","null","date","regexp","isNullOrUndefined","isSymbol","months","prop","time","getHours","getMinutes","getSeconds","getDate","getMonth","timestamp","origin","add","p1x","p1y","p2x","p2y","cx","bx","ax","cy","by","ay","sampleCurveX","sampleCurveY","sampleCurveDerivativeX","solveCurveX","epsilon","t0","t1","t2","x2","d2","kCSSColorTable","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","clamp_css_byte","clamp_css_float","parse_css_int","parseFloat","parseInt","parse_css_float","css_hue_to_rgb","m1","m2","h","css_str","iv","ep","fname","_interpolate","Xn","Yn","Zn","t3","rad2deg","xyz2lab","lab2xyz","xyz2rgb","rgb2xyz","rgbToLab","rgbColor","labToRgb","labColor","lab","hcl","_rgbToLab","atan2","hclColor","interpolateHue","deref","refProperties","ref","POINT","LINE","clamp","roundUpToPowerOfTwo","_asserts","squaredSegmentDistance","x1","y1","y2","dx","dy","squaredDistance","solveLinearSystem","mat","maxRow","maxEl","absValue","tmp","coef","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","cosh","exp","_index","code","asString","asArray","fromString","normalize","_math","HEX_COLOR_RE_","NAMED_COLOR_RE_","cache","cacheSize","el","body","appendChild","getComputedStyle","removeChild","fromNamed","hasAlpha","fromStringInternal_","opt_attributes","CONTEXT_IDS","ONE","SRC_ALPHA","COLOR_ATTACHMENT0","COLOR_BUFFER_BIT","TRIANGLES","TRIANGLE_STRIP","ONE_MINUS_SRC_ALPHA","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","CULL_FACE","BLEND","STENCIL_TEST","DEPTH_TEST","SCISSOR_TEST","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","FLOAT","RGBA","FRAGMENT_SHADER","VERTEX_SHADER","LINK_STATUS","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_2D","TEXTURE0","CLAMP_TO_EDGE","COMPILE_STATUS","FRAMEBUFFER","_color","opt_options","color_","checksum_","clone","getColor","getChecksum","CanvasPattern","CanvasGradient","font_","rotation_","rotation","rotateWithView_","rotateWithView","scale_","text_","textAlign_","textBaseline_","fill_","maxAngle_","maxAngle","placement_","TextPlacement","overflow_","overflow","stroke_","offsetX_","offsetX","offsetY_","offsetY","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","padding","getFont","getPlacement","getMaxAngle","getOverflow","getRotation","getRotateWithView","getScale","getTextAlign","getTextBaseline","getOffsetX","getOffsetY","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setMaxAngle","setScale","setBackgroundFill","setBackgroundStroke","setPadding","applyStyle","applyBackground","setBackground","accessToken","baseUrl","host","target","spriteRegEx","fetch","credentials","then","response","json","href","pathname","processStyle","catch","getLayer","getLayers","getArray","getSource","sourceId","_stylefunction","_proj","_tilegrid","_Observable","fontFamilyRegEx","stripQuotesRegEx","googleFamilies","googleFonts","family","styleSheets","cssRules","jj","cssRule","cssText","hasFontFamily","fontUrl","querySelector","markup","rel","getElementsByTagName","withPath","url","toSpriteUrl","extension","Promise","resolve","reject","onChange","sprite","VectorLayer","VectorTileLayer","_stylefunction2","sizeFactor","devicePixelRatio","spriteUrl","status","spritesJson","updateStyle","element","getTargetElement","getView","getZoom","bg","backgroundColor","backgroundOpacity","getSourceIdByRef","view","getCenter","setCenter","fromLonLat","center","setZoom","fit","getProjection","nearest","getSize","glLayer","glSource","glSourceId","mapid","transition","glLayers","geoJsonFormat","layerIds","finalizeLayer","addLayer","setVisible","sources","tiles","tileGrid","createXYZ","tileSize","maxZoom","minZoom","declutter","maxResolution","getMinZoom","getResolution","VectorTileSource","attributions","attribution","urls","visible","zIndex","tilejson","getState","tileJSONDoc","getTileJSON","tile","getTileGrid","setSource","getAttributions","getMaxZoom","setMaxResolution","unByKey","setTileLoadFunction","bbox","getTileCoordExtent","getTileCoord","TileLayer","features","geoJsonUrl","readFeatures","featureProjection","VectorSource","stylefunction"],"mappings":"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","file":"olms.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 81);\n","// @flow\n\nexport type NullTypeT = { kind: 'null' };\nexport type NumberTypeT = { kind: 'number' };\nexport type StringTypeT = { kind: 'string' };\nexport type BooleanTypeT = { kind: 'boolean' };\nexport type ColorTypeT = { kind: 'color' };\nexport type ObjectTypeT = { kind: 'object' };\nexport type ValueTypeT = { kind: 'value' };\nexport type ErrorTypeT = { kind: 'error' };\nexport type CollatorTypeT = { kind: 'collator' };\n\nexport type Type =\n    NullTypeT |\n    NumberTypeT |\n    StringTypeT |\n    BooleanTypeT |\n    ColorTypeT |\n    ObjectTypeT |\n    ValueTypeT |\n    ArrayType | // eslint-disable-line no-use-before-define\n    ErrorTypeT |\n    CollatorTypeT\n\nexport type ArrayType = {\n    kind: 'array',\n    itemType: Type,\n    N: ?number\n}\n\nexport const NullType = { kind: 'null' };\nexport const NumberType = { kind: 'number' };\nexport const StringType = { kind: 'string' };\nexport const BooleanType = { kind: 'boolean' };\nexport const ColorType = { kind: 'color' };\nexport const ObjectType = { kind: 'object' };\nexport const ValueType = { kind: 'value' };\nexport const ErrorType = { kind: 'error' };\nexport const CollatorType = { kind: 'collator' };\n\nexport function array(itemType: Type, N: ?number): ArrayType {\n    return {\n        kind: 'array',\n        itemType,\n        N\n    };\n}\n\nexport function toString(type: Type): string {\n    if (type.kind === 'array') {\n        const itemType = toString(type.itemType);\n        return typeof type.N === 'number' ?\n            `array<${itemType}, ${type.N}>` :\n            type.itemType.kind === 'value' ? 'array' : `array<${itemType}>`;\n    } else {\n        return type.kind;\n    }\n}\n\nconst valueMemberTypes = [\n    NullType,\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    ObjectType,\n    array(ValueType)\n];\n\n/**\n * Returns null if `t` is a subtype of `expected`; otherwise returns an\n * error message.\n * @private\n */\nexport function checkSubtype(expected: Type, t: Type): ?string {\n    if (t.kind === 'error') {\n        // Error is a subtype of every type\n        return null;\n    } else if (expected.kind === 'array') {\n        if (t.kind === 'array' &&\n            !checkSubtype(expected.itemType, t.itemType) &&\n            (typeof expected.N !== 'number' || expected.N === t.N)) {\n            return null;\n        }\n    } else if (expected.kind === t.kind) {\n        return null;\n    } else if (expected.kind === 'value') {\n        for (const memberType of valueMemberTypes) {\n            if (!checkSubtype(memberType, t)) {\n                return null;\n            }\n        }\n    }\n\n    return `Expected ${toString(expected)} but found ${toString(t)} instead.`;\n}\n","'use strict';\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","// @flow\n\nimport assert from 'assert';\n\nimport Color from '../util/color';\nimport { Collator } from './definitions/collator';\nimport { NullType, NumberType, StringType, BooleanType, ColorType, ObjectType, ValueType, CollatorType, array } from './types';\n\nimport type { Type } from './types';\n\nexport function validateRGBA(r: mixed, g: mixed, b: mixed, a?: mixed): ?string {\n    if (!(\n        typeof r === 'number' && r >= 0 && r <= 255 &&\n        typeof g === 'number' && g >= 0 && g <= 255 &&\n        typeof b === 'number' && b >= 0 && b <= 255\n    )) {\n        const value = typeof a === 'number' ? [r, g, b, a] : [r, g, b];\n        return `Invalid rgba value [${value.join(', ')}]: 'r', 'g', and 'b' must be between 0 and 255.`;\n    }\n\n    if (!(\n        typeof a === 'undefined' || (typeof a === 'number' && a >= 0 && a <= 1)\n    )) {\n        return `Invalid rgba value [${[r, g, b, a].join(', ')}]: 'a' must be between 0 and 1.`;\n    }\n\n    return null;\n}\n\nexport type Value = null | string | boolean | number | Color | Collator | $ReadOnlyArray<Value> | { +[string]: Value }\n\nexport function isValue(mixed: mixed): boolean {\n    if (mixed === null) {\n        return true;\n    } else if (typeof mixed === 'string') {\n        return true;\n    } else if (typeof mixed === 'boolean') {\n        return true;\n    } else if (typeof mixed === 'number') {\n        return true;\n    } else if (mixed instanceof Color) {\n        return true;\n    } else if (mixed instanceof Collator) {\n        return true;\n    } else if (Array.isArray(mixed)) {\n        for (const item of mixed) {\n            if (!isValue(item)) {\n                return false;\n            }\n        }\n        return true;\n    } else if (typeof mixed === 'object') {\n        for (const key in mixed) {\n            if (!isValue(mixed[key])) {\n                return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\n\nexport function typeOf(value: Value): Type {\n    if (value === null) {\n        return NullType;\n    } else if (typeof value === 'string') {\n        return StringType;\n    } else if (typeof value === 'boolean') {\n        return BooleanType;\n    } else if (typeof value === 'number') {\n        return NumberType;\n    } else if (value instanceof Color) {\n        return ColorType;\n    } else if (value instanceof Collator) {\n        return CollatorType;\n    } else if (Array.isArray(value)) {\n        const length = value.length;\n        let itemType: ?Type;\n\n        for (const item of value) {\n            const t = typeOf(item);\n            if (!itemType) {\n                itemType = t;\n            } else if (itemType === t) {\n                continue;\n            } else {\n                itemType = ValueType;\n                break;\n            }\n        }\n\n        return array(itemType || ValueType, length);\n    } else {\n        assert(typeof value === 'object');\n        return ObjectType;\n    }\n}\n\nexport { Color, Collator };\n","// @flow\n\nclass RuntimeError {\n    name: string;\n    message: string;\n\n    constructor(message: string) {\n        this.name = 'ExpressionEvaluationError';\n        this.message = message;\n    }\n\n    toJSON() {\n        return this.message;\n    }\n}\n\nexport default RuntimeError;\n","// @flow\n\nimport { parseCSSColor } from 'csscolorparser';\n\n/**\n * An RGBA color value. Create instances from color strings using the static\n * method `Color.parse`. The constructor accepts RGB channel values in the range\n * `[0, 1]`, premultiplied by A.\n *\n * @param {number} r The red channel.\n * @param {number} g The green channel.\n * @param {number} b The blue channel.\n * @param {number} a The alpha channel.\n * @private\n */\nclass Color {\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n\n    constructor(r: number, g: number, b: number, a: number = 1) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    static black: Color;\n    static white: Color;\n    static transparent: Color;\n\n    /**\n     * Parses valid CSS color strings and returns a `Color` instance.\n     * @returns A `Color` instance, or `undefined` if the input is not a valid color string.\n     */\n    static parse(input: ?string): Color | void {\n        if (!input) {\n            return undefined;\n        }\n\n        if (input instanceof Color) {\n            return input;\n        }\n\n        if (typeof input !== 'string') {\n            return undefined;\n        }\n\n        const rgba = parseCSSColor(input);\n        if (!rgba) {\n            return undefined;\n        }\n\n        return new Color(\n            rgba[0] / 255 * rgba[3],\n            rgba[1] / 255 * rgba[3],\n            rgba[2] / 255 * rgba[3],\n            rgba[3]\n        );\n    }\n\n    /**\n     * Returns an RGBA string representing the color value.\n     *\n     * @returns An RGBA string.\n     * @example\n     * var purple = new Color.parse('purple');\n     * purple.toString; // = \"rgba(128,0,128,1)\"\n     * var translucentGreen = new Color.parse('rgba(26, 207, 26, .73)');\n     * translucentGreen.toString(); // = \"rgba(26,207,26,0.73)\"\n     */\n    toString(): string {\n        const [r, g, b, a] = this.toArray();\n        return `rgba(${Math.round(r)},${Math.round(g)},${Math.round(b)},${a})`;\n    }\n\n    toArray(): [number, number, number, number] {\n        const {r, g, b, a} = this;\n        return a === 0 ? [0, 0, 0, 0] : [\n            r * 255 / a,\n            g * 255 / a,\n            b * 255 / a,\n            a\n        ];\n    }\n}\n\nColor.black = new Color(0, 0, 0, 1);\nColor.white = new Color(1, 1, 1, 1);\nColor.transparent = new Color(0, 0, 0, 0);\n\nexport default Color;\n","// @flow\n\nimport { toString } from './types';\n\nimport ParsingContext from './parsing_context';\nimport EvaluationContext from './evaluation_context';\nimport assert from 'assert';\n\nimport type { Expression, ExpressionRegistry } from './expression';\nimport type { Type } from './types';\nimport type { Value } from './values';\n\nexport type Varargs = {| type: Type |};\ntype Signature = Array<Type> | Varargs;\ntype Evaluate = (EvaluationContext, Array<Expression>) => Value;\ntype Definition = [Type, Signature, Evaluate] |\n    {|type: Type, overloads: Array<[Signature, Evaluate]>|};\n\nclass CompoundExpression implements Expression {\n    name: string;\n    type: Type;\n    _evaluate: Evaluate;\n    args: Array<Expression>;\n\n    static definitions: { [string]: Definition };\n\n    constructor(name: string, type: Type, evaluate: Evaluate, args: Array<Expression>) {\n        this.name = name;\n        this.type = type;\n        this._evaluate = evaluate;\n        this.args = args;\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return this._evaluate(ctx, this.args);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [undefined];\n    }\n\n    serialize() {\n        return [this.name].concat(this.args.map(arg => arg.serialize()));\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        const op: string = (args[0]: any);\n        const definition = CompoundExpression.definitions[op];\n        if (!definition) {\n            return context.error(`Unknown expression \"${op}\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        }\n\n        // Now check argument types against each signature\n        const type = Array.isArray(definition) ?\n            definition[0] : definition.type;\n\n        const availableOverloads = Array.isArray(definition) ?\n            [[definition[1], definition[2]]] :\n            definition.overloads;\n\n        const overloads = availableOverloads.filter(([signature]) => (\n            !Array.isArray(signature) || // varags\n            signature.length === args.length - 1 // correct param count\n        ));\n\n        // First parse all the args\n        const parsedArgs: Array<Expression> = [];\n        for (let i = 1; i < args.length; i++) {\n            const arg = args[i];\n            let expected;\n            if (overloads.length === 1) {\n                const params = overloads[0][0];\n                expected = Array.isArray(params) ?\n                    params[i - 1] :\n                    params.type;\n            }\n            const parsed = context.parse(arg, 1 + parsedArgs.length, expected);\n            if (!parsed) return null;\n            parsedArgs.push(parsed);\n        }\n\n        let signatureContext: ParsingContext = (null: any);\n\n        for (const [params, evaluate] of overloads) {\n            // Use a fresh context for each attempted signature so that, if\n            // we eventually succeed, we haven't polluted `context.errors`.\n            signatureContext = new ParsingContext(context.registry, context.path, null, context.scope);\n\n            if (Array.isArray(params)) {\n                if (params.length !== parsedArgs.length) {\n                    signatureContext.error(`Expected ${params.length} arguments, but found ${parsedArgs.length} instead.`);\n                    continue;\n                }\n            }\n\n            for (let i = 0; i < parsedArgs.length; i++) {\n                const expected = Array.isArray(params) ? params[i] : params.type;\n                const arg = parsedArgs[i];\n                signatureContext.concat(i + 1).checkSubtype(expected, arg.type);\n            }\n\n            if (signatureContext.errors.length === 0) {\n                return new CompoundExpression(op, type, evaluate, parsedArgs);\n            }\n        }\n\n        assert(!signatureContext || signatureContext.errors.length > 0);\n\n        if (overloads.length === 1) {\n            context.errors.push.apply(context.errors, signatureContext.errors);\n        } else {\n            const expected = overloads.length ? overloads : availableOverloads;\n            const signatures = expected\n                .map(([params]) => stringifySignature(params))\n                .join(' | ');\n            const actualTypes = parsedArgs\n                .map(arg => toString(arg.type))\n                .join(', ');\n            context.error(`Expected arguments of type ${signatures}, but found (${actualTypes}) instead.`);\n        }\n\n        return null;\n    }\n\n    static register(\n        registry: ExpressionRegistry,\n        definitions: { [string]: Definition }\n    ) {\n        assert(!CompoundExpression.definitions);\n        CompoundExpression.definitions = definitions;\n        for (const name in definitions) {\n            registry[name] = CompoundExpression;\n        }\n    }\n}\n\nfunction stringifySignature(signature: Signature): string {\n    if (Array.isArray(signature)) {\n        return `(${signature.map(toString).join(', ')})`;\n    } else {\n        return `(${toString(signature.type)}...)`;\n    }\n}\n\nexport default CompoundExpression;\n","// @flow\n\nimport { Color } from './values';\n\nimport type { Feature, GlobalProperties } from './index';\n\nconst geometryTypes = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nclass EvaluationContext {\n    globals: GlobalProperties;\n    feature: ?Feature;\n\n    _parseColorCache: {[string]: ?Color};\n\n    constructor() {\n        this._parseColorCache = {};\n    }\n\n    id() {\n        return this.feature && 'id' in this.feature ? this.feature.id : null;\n    }\n\n    geometryType() {\n        return this.feature ? typeof this.feature.type === 'number' ? geometryTypes[this.feature.type] : this.feature.type : null;\n    }\n\n    properties() {\n        return this.feature && this.feature.properties || {};\n    }\n\n    parseColor(input: string): ?Color {\n        let cached = this._parseColorCache[input];\n        if (!cached) {\n            cached = this._parseColorCache[input] = Color.parse(input);\n        }\n        return cached;\n    }\n}\n\nexport default EvaluationContext;\n","// @flow\n\nimport { StringType, BooleanType, CollatorType } from '../types';\n\nimport type { Expression } from '../expression';\nimport type EvaluationContext from '../evaluation_context';\nimport type ParsingContext from '../parsing_context';\nimport type { Type } from '../types';\n\n// Flow type declarations for Intl cribbed from\n// https://github.com/facebook/flow/issues/1270\n\ndeclare var Intl: {\n  Collator: Class<Intl$Collator>\n}\n\ndeclare class Intl$Collator {\n  constructor (\n    locales?: string | string[],\n    options?: CollatorOptions\n  ): Intl$Collator;\n\n  static (\n    locales?: string | string[],\n    options?: CollatorOptions\n  ): Intl$Collator;\n\n  compare (a: string, b: string): number;\n\n  resolvedOptions(): any;\n}\n\ntype CollatorOptions = {\n  localeMatcher?: 'lookup' | 'best fit',\n  usage?: 'sort' | 'search',\n  sensitivity?: 'base' | 'accent' | 'case' | 'variant',\n  ignorePunctuation?: boolean,\n  numeric?: boolean,\n  caseFirst?: 'upper' | 'lower' | 'false'\n}\n\nexport class Collator {\n    locale: string | null;\n    sensitivity: 'base' | 'accent' | 'case' | 'variant';\n    collator: Intl$Collator;\n\n    constructor(caseSensitive: boolean, diacriticSensitive: boolean, locale: string | null) {\n        if (caseSensitive)\n            this.sensitivity = diacriticSensitive ? 'variant' : 'case';\n        else\n            this.sensitivity = diacriticSensitive ? 'accent' : 'base';\n\n        this.locale = locale;\n        this.collator = new Intl.Collator(this.locale ? this.locale : [],\n            { sensitivity: this.sensitivity, usage: 'search' });\n    }\n\n    compare(lhs: string, rhs: string): number {\n        return this.collator.compare(lhs, rhs);\n    }\n\n    resolvedLocale(): string {\n        // We create a Collator without \"usage: search\" because we don't want\n        // the search options encoded in our result (e.g. \"en-u-co-search\")\n        return new Intl.Collator(this.locale ? this.locale : [])\n            .resolvedOptions().locale;\n    }\n}\n\nexport class CollatorExpression implements Expression {\n    type: Type;\n    caseSensitive: Expression;\n    diacriticSensitive: Expression;\n    locale: Expression | null;\n\n    constructor(caseSensitive: Expression, diacriticSensitive: Expression, locale: Expression | null) {\n        this.type = CollatorType;\n        this.locale = locale;\n        this.caseSensitive = caseSensitive;\n        this.diacriticSensitive = diacriticSensitive;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length !== 2)\n            return context.error(`Expected one argument.`);\n\n        const options = (args[1]: any);\n        if (typeof options !== \"object\" || Array.isArray(options))\n            return context.error(`Collator options argument must be an object.`);\n\n        const caseSensitive = context.parse(\n            options['case-sensitive'] === undefined ? false : options['case-sensitive'], 1, BooleanType);\n        if (!caseSensitive) return null;\n\n        const diacriticSensitive = context.parse(\n            options['diacritic-sensitive'] === undefined ? false : options['diacritic-sensitive'], 1, BooleanType);\n        if (!diacriticSensitive) return null;\n\n        let locale = null;\n        if (options['locale']) {\n            locale = context.parse(options['locale'], 1, StringType);\n            if (!locale) return null;\n        }\n\n        return new CollatorExpression(caseSensitive, diacriticSensitive, locale);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return new Collator(this.caseSensitive.evaluate(ctx), this.diacriticSensitive.evaluate(ctx), this.locale ? this.locale.evaluate(ctx) : null);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.caseSensitive);\n        fn(this.diacriticSensitive);\n        if (this.locale) {\n            fn(this.locale);\n        }\n    }\n\n    possibleOutputs() {\n        // Technically the set of possible outputs is the combinatoric set of Collators produced\n        // by all possibleOutputs of locale/caseSensitive/diacriticSensitive\n        // But for the primary use of Collators in comparison operators, we ignore the Collator's\n        // possibleOutputs anyway, so we can get away with leaving this undefined for now.\n        return [undefined];\n    }\n\n    serialize() {\n        const options = {};\n        options['case-sensitive'] = this.caseSensitive.serialize();\n        options['diacritic-sensitive'] = this.diacriticSensitive.serialize();\n        if (this.locale) {\n            options['locale'] = this.locale.serialize();\n        }\n        return [\"collator\", options];\n    }\n}\n","// @flow\n\nimport UnitBezier from '@mapbox/unitbezier';\n\nimport * as interpolate from '../../util/interpolate';\nimport { toString, NumberType } from '../types';\nimport { findStopLessThanOrEqualTo } from '../stops';\n\nimport type { Stops } from '../stops';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nexport type InterpolationType =\n    { name: 'linear' } |\n    { name: 'exponential', base: number } |\n    { name: 'cubic-bezier', controlPoints: [number, number, number, number] };\n\nclass Interpolate implements Expression {\n    type: Type;\n\n    interpolation: InterpolationType;\n    input: Expression;\n    labels: Array<number>;\n    outputs: Array<Expression>;\n\n    constructor(type: Type, interpolation: InterpolationType, input: Expression, stops: Stops) {\n        this.type = type;\n        this.interpolation = interpolation;\n        this.input = input;\n\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n\n    static interpolationFactor(interpolation: InterpolationType, input: number, lower: number, upper: number) {\n        let t = 0;\n        if (interpolation.name === 'exponential') {\n            t = exponentialInterpolation(input, interpolation.base, lower, upper);\n        } else if (interpolation.name === 'linear') {\n            t = exponentialInterpolation(input, 1, lower, upper);\n        } else if (interpolation.name === 'cubic-bezier') {\n            const c = interpolation.controlPoints;\n            const ub = new UnitBezier(c[0], c[1], c[2], c[3]);\n            t = ub.solve(exponentialInterpolation(input, 1, lower, upper));\n        }\n        return t;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        let [ , interpolation, input, ...rest] = args;\n\n        if (!Array.isArray(interpolation) || interpolation.length === 0) {\n            return context.error(`Expected an interpolation type expression.`, 1);\n        }\n\n        if (interpolation[0] === 'linear') {\n            interpolation = { name: 'linear' };\n        } else if (interpolation[0] === 'exponential') {\n            const base = interpolation[1];\n            if (typeof base !== 'number')\n                return context.error(`Exponential interpolation requires a numeric base.`, 1, 1);\n            interpolation = {\n                name: 'exponential',\n                base\n            };\n        } else if (interpolation[0] === 'cubic-bezier') {\n            const controlPoints = interpolation.slice(1);\n            if (\n                controlPoints.length !== 4 ||\n                controlPoints.some(t => typeof t !== 'number' || t < 0 || t > 1)\n            ) {\n                return context.error('Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.', 1);\n            }\n\n            interpolation = {\n                name: 'cubic-bezier',\n                controlPoints: (controlPoints: any)\n            };\n        } else {\n            return context.error(`Unknown interpolation type ${String(interpolation[0])}`, 1, 0);\n        }\n\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        }\n\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n\n        input = context.parse(input, 2, NumberType);\n        if (!input) return null;\n\n        const stops: Stops = [];\n\n        let outputType: Type = (null: any);\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        for (let i = 0; i < rest.length; i += 2) {\n            const label = rest[i];\n            const value = rest[i + 1];\n\n            const labelKey = i + 3;\n            const valueKey = i + 4;\n\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            stops.push([label, parsed]);\n        }\n\n        if (outputType.kind !== 'number' &&\n            outputType.kind !== 'color' &&\n            !(\n                outputType.kind === 'array' &&\n                outputType.itemType.kind === 'number' &&\n                typeof outputType.N === 'number'\n            )\n        ) {\n            return context.error(`Type ${toString(outputType)} is not interpolatable.`);\n        }\n\n        return new Interpolate(outputType, interpolation, input, stops);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const value = ((this.input.evaluate(ctx): any): number);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n\n        const index = findStopLessThanOrEqualTo(labels, value);\n        const lower = labels[index];\n        const upper = labels[index + 1];\n        const t = Interpolate.interpolationFactor(this.interpolation, value, lower, upper);\n\n        const outputLower = outputs[index].evaluate(ctx);\n        const outputUpper = outputs[index + 1].evaluate(ctx);\n\n        return (interpolate[this.type.kind.toLowerCase()]: any)(outputLower, outputUpper, t); // eslint-disable-line import/namespace\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.outputs.map((output) => output.possibleOutputs()));\n    }\n\n    serialize() {\n        let interpolation;\n        if (this.interpolation.name === 'linear') {\n            interpolation = [\"linear\"];\n        } else if (this.interpolation.name === 'exponential') {\n            if  (this.interpolation.base === 1) {\n                interpolation = [\"linear\"];\n            } else {\n                interpolation = [\"exponential\", this.interpolation.base];\n            }\n        } else {\n            interpolation = [\"cubic-bezier\" ].concat(this.interpolation.controlPoints);\n        }\n\n        const serialized = [\"interpolate\", interpolation, this.input.serialize()];\n\n        for (let i = 0; i < this.labels.length; i++) {\n            serialized.push(\n                this.labels[i],\n                this.outputs[i].serialize()\n            );\n        }\n        return serialized;\n    }\n}\n\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n * How it works: Two consecutive stop values define a (scaled and shifted) exponential function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n*/\nfunction exponentialInterpolation(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\n\nexport default Interpolate;\n","\nexport default function (output, ...inputs) {\n    for (const input of inputs) {\n        for (const k in input) {\n            output[k] = input[k];\n        }\n    }\n    return output;\n}\n","// @flow\n\nimport Color from './color';\n\nexport function number(a: number, b: number, t: number) {\n    return (a * (1 - t)) + (b * t);\n}\n\nexport function color(from: Color, to: Color, t: number) {\n    return new Color(\n        number(from.r, to.r, t),\n        number(from.g, to.g, t),\n        number(from.b, to.b, t),\n        number(from.a, to.a, t)\n    );\n}\n\nexport function array(from: Array<number>, to: Array<number>, t: number) {\n    return from.map((d, i) => {\n        return number(d, to[i], t);\n    });\n}\n","// @flow\n\nimport type { Type } from '../types';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext  from '../evaluation_context';\n\nclass Let implements Expression {\n    type: Type;\n    bindings: Array<[string, Expression]>;\n    result: Expression;\n\n    constructor(bindings: Array<[string, Expression]>, result: Expression) {\n        this.type = result.type;\n        this.bindings = [].concat(bindings);\n        this.result = result;\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return this.result.evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        for (const binding of this.bindings) {\n            fn(binding[1]);\n        }\n        fn(this.result);\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 4)\n            return context.error(`Expected at least 3 arguments, but found ${args.length - 1} instead.`);\n\n        const bindings: Array<[string, Expression]> = [];\n        for (let i = 1; i < args.length - 1; i += 2) {\n            const name = args[i];\n\n            if (typeof name !== 'string') {\n                return context.error(`Expected string, but found ${typeof name} instead.`, i);\n            }\n\n            if (/[^a-zA-Z0-9_]/.test(name)) {\n                return context.error(`Variable names must contain only alphanumeric characters or '_'.`, i);\n            }\n\n            const value = context.parse(args[i + 1], i + 1);\n            if (!value) return null;\n\n            bindings.push([name, value]);\n        }\n\n        const result = context.parse(args[args.length - 1], args.length - 1, undefined, bindings);\n        if (!result) return null;\n\n        return new Let(bindings, result);\n    }\n\n    possibleOutputs() {\n        return this.result.possibleOutputs();\n    }\n\n    serialize() {\n        const serialized = [\"let\"];\n        for (const [name, expr] of this.bindings) {\n            serialized.push(name, expr.serialize());\n        }\n        serialized.push(this.result.serialize());\n        return serialized;\n    }\n}\n\nexport default Let;\n","// @flow\n\nimport assert from 'assert';\n\nimport { checkSubtype, ValueType } from '../types';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nclass Coalesce implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 2) {\n            return context.error(\"Expectected at least one argument.\");\n        }\n        let outputType: Type = (null: any);\n        const expectedType = context.expectedType;\n        if (expectedType && expectedType.kind !== 'value') {\n            outputType = expectedType;\n        }\n        const parsedArgs = [];\n\n        for (const arg of args.slice(1)) {\n            const parsed = context.parse(arg, 1 + parsedArgs.length, outputType, undefined, {omitTypeAnnotations: true});\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            parsedArgs.push(parsed);\n        }\n        assert(outputType);\n\n        // Above, we parse arguments without inferred type annotation so that\n        // they don't produce a runtime error for `null` input, which would\n        // preempt the desired null-coalescing behavior.\n        // Thus, if any of our arguments would have needed an annotation, we\n        // need to wrap the enclosing coalesce expression with it instead.\n        const needsAnnotation = expectedType &&\n            parsedArgs.some(arg => checkSubtype(expectedType, arg.type));\n\n        return needsAnnotation ?\n            new Coalesce(ValueType, parsedArgs) :\n            new Coalesce((outputType: any), parsedArgs);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        let result = null;\n        for (const arg of this.args) {\n            result = arg.evaluate(ctx);\n            if (result !== null) break;\n        }\n        return result;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.args.map((arg) => arg.possibleOutputs()));\n    }\n\n    serialize() {\n        const serialized = [\"coalesce\"];\n        this.eachChild(child => { serialized.push(child.serialize()); });\n        return serialized;\n    }\n}\n\nexport default Coalesce;\n","// @flow\n\nimport { NumberType } from '../types';\n\nimport { findStopLessThanOrEqualTo } from '../stops';\n\nimport type { Stops } from '../stops';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nclass Step implements Expression {\n    type: Type;\n\n    input: Expression;\n    labels: Array<number>;\n    outputs: Array<Expression>;\n\n    constructor(type: Type, input: Expression, stops: Stops) {\n        this.type = type;\n        this.input = input;\n\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        let [ , input, ...rest] = args;\n\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        }\n\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n\n        input = context.parse(input, 1, NumberType);\n        if (!input) return null;\n\n        const stops: Stops = [];\n\n        let outputType: Type = (null: any);\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        rest.unshift(-Infinity);\n\n        for (let i = 0; i < rest.length; i += 2) {\n            const label = rest[i];\n            const value = rest[i + 1];\n\n            const labelKey = i + 1;\n            const valueKey = i + 2;\n\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed) return null;\n            outputType = outputType || parsed.type;\n            stops.push([label, parsed]);\n        }\n\n        return new Step(outputType, input, stops);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const value = ((this.input.evaluate(ctx): any): number);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n\n        const index = findStopLessThanOrEqualTo(labels, value);\n        return outputs[index].evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.outputs.map((output) => output.possibleOutputs()));\n    }\n\n    serialize() {\n        const serialized = [\"step\", this.input.serialize()];\n        for (let i = 0; i < this.labels.length; i++) {\n            if (i > 0) {\n                serialized.push(this.labels[i]);\n            }\n            serialized.push(this.outputs[i].serialize());\n        }\n        return serialized;\n    }\n}\n\nexport default Step;\n","// @flow\n\nimport type { Type } from '../types';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext  from '../evaluation_context';\n\nclass Var implements Expression {\n    type: Type;\n    name: string;\n    boundExpression: Expression;\n\n    constructor(name: string, boundExpression: Expression) {\n        this.type = boundExpression.type;\n        this.name = name;\n        this.boundExpression = boundExpression;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 2 || typeof args[1] !== 'string')\n            return context.error(`'var' expression requires exactly one string literal argument.`);\n\n        const name = args[1];\n        if (!context.scope.has(name)) {\n            return context.error(`Unknown variable \"${name}\". Make sure \"${name}\" has been bound in an enclosing \"let\" expression before using it.`, 1);\n        }\n\n        return new Var(name, context.scope.get(name));\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        return this.boundExpression.evaluate(ctx);\n    }\n\n    eachChild() {}\n\n    possibleOutputs() {\n        return [undefined];\n    }\n\n    serialize() {\n        return [\"var\", this.name];\n    }\n}\n\nexport default Var;\n","// @flow\n\nimport CompoundExpression from './compound_expression';\n\nimport type { Expression } from './expression.js';\n\nfunction isFeatureConstant(e: Expression) {\n    if (e instanceof CompoundExpression) {\n        if (e.name === 'get' && e.args.length === 1) {\n            return false;\n        } else if (e.name === 'has' && e.args.length === 1) {\n            return false;\n        } else if (\n            e.name === 'properties' ||\n            e.name === 'geometry-type' ||\n            e.name === 'id'\n        ) {\n            return false;\n        } else if (/^filter-/.test(e.name)) {\n            return false;\n        }\n    }\n\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isFeatureConstant(arg)) { result = false; }\n    });\n    return result;\n}\n\nfunction isGlobalPropertyConstant(e: Expression, properties: Array<string>) {\n    if (e instanceof CompoundExpression && properties.indexOf(e.name) >= 0) { return false; }\n    let result = true;\n    e.eachChild((arg) => {\n        if (result && !isGlobalPropertyConstant(arg, properties)) { result = false; }\n    });\n    return result;\n}\n\nexport { isFeatureConstant, isGlobalPropertyConstant };\n","// @flow\n\nimport assert from 'assert';\n\nimport { ColorType, ValueType, NumberType } from '../types';\nimport { Color, validateRGBA } from '../values';\nimport RuntimeError from '../runtime_error';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nconst types = {\n    'to-number': NumberType,\n    'to-color': ColorType\n};\n\n/**\n * Special form for error-coalescing coercion expressions \"to-number\",\n * \"to-color\".  Since these coercions can fail at runtime, they accept multiple\n * arguments, only evaluating one at a time until one succeeds.\n *\n * @private\n */\nclass Coercion implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n\n        const name: string = (args[0]: any);\n        assert(types[name], name);\n\n        const type = types[name];\n\n        const parsed = [];\n        for (let i = 1; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input) return null;\n            parsed.push(input);\n        }\n\n        return new Coercion(type, parsed);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        if (this.type.kind === 'color') {\n            let input;\n            let error;\n            for (const arg of this.args) {\n                input = arg.evaluate(ctx);\n                error = null;\n                if (typeof input === 'string') {\n                    const c = ctx.parseColor(input);\n                    if (c) return c;\n                } else if (Array.isArray(input)) {\n                    if (input.length < 3 || input.length > 4) {\n                        error = `Invalid rbga value ${JSON.stringify(input)}: expected an array containing either three or four numeric values.`;\n                    } else {\n                        error = validateRGBA(input[0], input[1], input[2], input[3]);\n                    }\n                    if (!error) {\n                        return new Color((input[0]: any) / 255, (input[1]: any) / 255, (input[2]: any) / 255, (input[3]: any));\n                    }\n                }\n            }\n            throw new RuntimeError(error || `Could not parse color from value '${typeof input === 'string' ? input : JSON.stringify(input)}'`);\n        } else {\n            let value = null;\n            for (const arg of this.args) {\n                value = arg.evaluate(ctx);\n                if (value === null) continue;\n                const num = Number(value);\n                if (isNaN(num)) continue;\n                return num;\n            }\n            throw new RuntimeError(`Could not convert ${JSON.stringify(value)} to number.`);\n        }\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.args.map((arg) => arg.possibleOutputs()));\n    }\n\n    serialize() {\n        const serialized = [`to-${this.type.kind}`];\n        this.eachChild(child => { serialized.push(child.serialize()); });\n        return serialized;\n    }\n}\n\nexport default Coercion;\n","// @flow\n\nimport { toString, array, ValueType, StringType, NumberType, BooleanType, checkSubtype } from '../types';\n\nimport { typeOf } from '../values';\nimport RuntimeError from '../runtime_error';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { ArrayType } from '../types';\n\nconst types = {\n    string: StringType,\n    number: NumberType,\n    boolean: BooleanType\n};\n\nclass ArrayAssertion implements Expression {\n    type: ArrayType;\n    input: Expression;\n\n    constructor(type: ArrayType, input: Expression) {\n        this.type = type;\n        this.input = input;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2 || args.length > 4)\n            return context.error(`Expected 1, 2, or 3 arguments, but found ${args.length - 1} instead.`);\n\n        let itemType;\n        let N;\n        if (args.length > 2) {\n            const type = args[1];\n            if (typeof type !== 'string' || !(type in types))\n                return context.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n            itemType = types[type];\n        } else {\n            itemType = ValueType;\n        }\n\n        if (args.length > 3) {\n            if (\n                typeof args[2] !== 'number' ||\n                args[2] < 0 ||\n                args[2] !== Math.floor(args[2])\n            ) {\n                return context.error('The length argument to \"array\" must be a positive integer literal', 2);\n            }\n            N = args[2];\n        }\n\n        const type = array(itemType, N);\n\n        const input = context.parse(args[args.length - 1], args.length - 1, ValueType);\n        if (!input) return null;\n\n        return new ArrayAssertion(type, input);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const value = this.input.evaluate(ctx);\n        const error = checkSubtype(this.type, typeOf(value));\n        if (error) {\n            throw new RuntimeError(`Expected value to be of type ${toString(this.type)}, but found ${toString(typeOf(value))} instead.`);\n        }\n        return value;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n    }\n\n    possibleOutputs() {\n        return this.input.possibleOutputs();\n    }\n\n    serialize() {\n        const serialized = [\"array\"];\n        const itemType = this.type.itemType;\n        if (itemType.kind === 'string' ||\n            itemType.kind === 'number' ||\n            itemType.kind === 'boolean') {\n            serialized.push(itemType.kind);\n            const N = this.type.N;\n            if (typeof N === 'number') {\n                serialized.push(N);\n            }\n        }\n        serialized.push(this.input.serialize());\n        return serialized;\n    }\n}\n\nexport default ArrayAssertion;\n","// @flow\n\nimport assert from 'assert';\n\nimport {\n    ObjectType,\n    ValueType,\n    StringType,\n    NumberType,\n    BooleanType,\n    checkSubtype,\n    toString\n} from '../types';\nimport RuntimeError from '../runtime_error';\nimport { typeOf } from '../values';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nconst types = {\n    string: StringType,\n    number: NumberType,\n    boolean: BooleanType,\n    object: ObjectType\n};\n\nclass Assertion implements Expression {\n    type: Type;\n    args: Array<Expression>;\n\n    constructor(type: Type, args: Array<Expression>) {\n        this.type = type;\n        this.args = args;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n\n        const name: string = (args[0]: any);\n        assert(types[name], name);\n\n        const type = types[name];\n\n        const parsed = [];\n        for (let i = 1; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input) return null;\n            parsed.push(input);\n        }\n\n        return new Assertion(type, parsed);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        for (let i = 0; i < this.args.length; i++) {\n            const value = this.args[i].evaluate(ctx);\n            const error = checkSubtype(this.type, typeOf(value));\n            if (!error) {\n                return value;\n            } else if (i === this.args.length - 1) {\n                throw new RuntimeError(`Expected value to be of type ${toString(this.type)}, but found ${toString(typeOf(value))} instead.`);\n            }\n        }\n\n        assert(false);\n        return null;\n    }\n\n    eachChild(fn: (Expression) => void) {\n        this.args.forEach(fn);\n    }\n\n    possibleOutputs() {\n        return [].concat(...this.args.map((arg) => arg.possibleOutputs()));\n    }\n\n    serialize() {\n        return [this.type.kind].concat(this.args.map(arg => arg.serialize()));\n    }\n}\n\nexport default Assertion;\n","// @flow\n\nimport assert from 'assert';\nimport { isValue, typeOf, Color } from '../values';\n\nimport type { Type } from '../types';\nimport type { Value }  from '../values';\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\n\nclass Literal implements Expression {\n    type: Type;\n    value: Value;\n\n    constructor(type: Type, value: Value) {\n        this.type = type;\n        this.value = value;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 2)\n            return context.error(`'literal' expression requires exactly one argument, but found ${args.length - 1} instead.`);\n\n        if (!isValue(args[1]))\n            return context.error(`invalid value`);\n\n        const value = (args[1]: any);\n        let type = typeOf(value);\n\n        // special case: infer the item type if possible for zero-length arrays\n        const expected = context.expectedType;\n        if (\n            type.kind === 'array' &&\n            type.N === 0 &&\n            expected &&\n            expected.kind === 'array' &&\n            (typeof expected.N !== 'number' || expected.N === 0)\n        ) {\n            type = expected;\n        }\n\n        return new Literal(type, value);\n    }\n\n    evaluate() {\n        return this.value;\n    }\n\n    eachChild() {}\n\n    possibleOutputs() {\n        return [this.value];\n    }\n\n    serialize() {\n        if (this.type.kind === 'array' || this.type.kind === 'object') {\n            return [\"literal\", this.value];\n        } else if (this.value instanceof Color) {\n            // Constant-folding can generate Literal expressions that you\n            // couldn't actually generate with a \"literal\" expression,\n            // so we have to implement an equivalent serialization here\n            return [\"rgba\"].concat(this.value.toArray());\n        } else {\n            assert(this.value === null ||\n                typeof this.value === 'string' ||\n                typeof this.value === 'number' ||\n                typeof this.value === 'boolean');\n            return (this.value: any);\n        }\n    }\n}\n\nexport default Literal;\n","// @flow\n\nimport Scope from './scope';\n\nimport { checkSubtype } from './types';\nimport ParsingError from './parsing_error';\nimport Literal from './definitions/literal';\nimport Assertion from './definitions/assertion';\nimport ArrayAssertion from './definitions/array';\nimport Coercion from './definitions/coercion';\nimport EvaluationContext from './evaluation_context';\nimport CompoundExpression from './compound_expression';\nimport { CollatorExpression } from './definitions/collator';\nimport {isGlobalPropertyConstant, isFeatureConstant} from './is_constant';\nimport Var from './definitions/var';\n\n\nimport type {Expression, ExpressionRegistry} from './expression';\nimport type {Type} from './types';\n\n/**\n * State associated parsing at a given point in an expression tree.\n * @private\n */\nclass ParsingContext {\n    registry: ExpressionRegistry;\n    path: Array<number>;\n    key: string;\n    scope: Scope;\n    errors: Array<ParsingError>;\n\n    // The expected type of this expression. Provided only to allow Expression\n    // implementations to infer argument types: Expression#parse() need not\n    // check that the output type of the parsed expression matches\n    // `expectedType`.\n    expectedType: ?Type;\n\n    constructor(\n        registry: ExpressionRegistry,\n        path: Array<number> = [],\n        expectedType: ?Type,\n        scope: Scope = new Scope(),\n        errors: Array<ParsingError> = []\n    ) {\n        this.registry = registry;\n        this.path = path;\n        this.key = path.map(part => `[${part}]`).join('');\n        this.scope = scope;\n        this.errors = errors;\n        this.expectedType = expectedType;\n    }\n\n    /**\n     * @param expr the JSON expression to parse\n     * @param index the optional argument index if this expression is an argument of a parent expression that's being parsed\n     * @param options\n     * @param options.omitTypeAnnotations set true to omit inferred type annotations.  Caller beware: with this option set, the parsed expression's type will NOT satisfy `expectedType` if it would normally be wrapped in an inferred annotation.\n     * @private\n     */\n    parse(\n        expr: mixed,\n        index?: number,\n        expectedType?: ?Type,\n        bindings?: Array<[string, Expression]>,\n        options: {omitTypeAnnotations?: boolean} = {}\n    ): ?Expression {\n        if (index) {\n            return this.concat(index, expectedType, bindings)._parse(expr, options);\n        }\n        return this._parse(expr, options);\n    }\n\n    _parse(expr: mixed, options: {omitTypeAnnotations?: boolean}): ?Expression {\n\n        if (expr === null || typeof expr === 'string' || typeof expr === 'boolean' || typeof expr === 'number') {\n            expr = ['literal', expr];\n        }\n\n        if (Array.isArray(expr)) {\n            if (expr.length === 0) {\n                return this.error(`Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].`);\n            }\n\n            const op = expr[0];\n            if (typeof op !== 'string') {\n                this.error(`Expression name must be a string, but found ${typeof op} instead. If you wanted a literal array, use [\"literal\", [...]].`, 0);\n                return null;\n            }\n\n            const Expr = this.registry[op];\n            if (Expr) {\n                let parsed = Expr.parse(expr, this);\n                if (!parsed) return null;\n\n                if (this.expectedType) {\n                    const expected = this.expectedType;\n                    const actual = parsed.type;\n\n                    // When we expect a number, string, boolean, or array but\n                    // have a Value, we can wrap it in a refining assertion.\n                    // When we expect a Color but have a String or Value, we\n                    // can wrap it in \"to-color\" coercion.\n                    // Otherwise, we do static type-checking.\n                    if ((expected.kind === 'string' || expected.kind === 'number' || expected.kind === 'boolean' || expected.kind === 'object') && actual.kind === 'value') {\n                        if (!options.omitTypeAnnotations) {\n                            parsed = new Assertion(expected, [parsed]);\n                        }\n                    } else if (expected.kind === 'array' && actual.kind === 'value') {\n                        if (!options.omitTypeAnnotations) {\n                            parsed = new ArrayAssertion(expected, parsed);\n                        }\n                    } else if (expected.kind === 'color' && (actual.kind === 'value' || actual.kind === 'string')) {\n                        if (!options.omitTypeAnnotations) {\n                            parsed = new Coercion(expected, [parsed]);\n                        }\n                    } else if (this.checkSubtype(this.expectedType, parsed.type)) {\n                        return null;\n                    }\n                }\n\n                // If an expression's arguments are all literals, we can evaluate\n                // it immediately and replace it with a literal value in the\n                // parsed/compiled result.\n                if (!(parsed instanceof Literal) && isConstant(parsed)) {\n                    const ec = new EvaluationContext();\n                    try {\n                        parsed = new Literal(parsed.type, parsed.evaluate(ec));\n                    } catch (e) {\n                        this.error(e.message);\n                        return null;\n                    }\n                }\n\n                return parsed;\n            }\n\n            return this.error(`Unknown expression \"${op}\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        } else if (typeof expr === 'undefined') {\n            return this.error(`'undefined' value invalid. Use null instead.`);\n        } else if (typeof expr === 'object') {\n            return this.error(`Bare objects invalid. Use [\"literal\", {...}] instead.`);\n        } else {\n            return this.error(`Expected an array, but found ${typeof expr} instead.`);\n        }\n    }\n\n    /**\n     * Returns a copy of this context suitable for parsing the subexpression at\n     * index `index`, optionally appending to 'let' binding map.\n     *\n     * Note that `errors` property, intended for collecting errors while\n     * parsing, is copied by reference rather than cloned.\n     * @private\n     */\n    concat(index: number, expectedType?: ?Type, bindings?: Array<[string, Expression]>) {\n        const path = typeof index === 'number' ? this.path.concat(index) : this.path;\n        const scope = bindings ? this.scope.concat(bindings) : this.scope;\n        return new ParsingContext(\n            this.registry,\n            path,\n            expectedType || null,\n            scope,\n            this.errors\n        );\n    }\n\n    /**\n     * Push a parsing (or type checking) error into the `this.errors`\n     * @param error The message\n     * @param keys Optionally specify the source of the error at a child\n     * of the current expression at `this.key`.\n     * @private\n     */\n    error(error: string, ...keys: Array<number>) {\n        const key = `${this.key}${keys.map(k => `[${k}]`).join('')}`;\n        this.errors.push(new ParsingError(key, error));\n    }\n\n    /**\n     * Returns null if `t` is a subtype of `expected`; otherwise returns an\n     * error message and also pushes it to `this.errors`.\n     */\n    checkSubtype(expected: Type, t: Type): ?string {\n        const error = checkSubtype(expected, t);\n        if (error) this.error(error);\n        return error;\n    }\n}\n\nexport default ParsingContext;\n\nfunction isConstant(expression: Expression) {\n    if (expression instanceof Var) {\n        return isConstant(expression.boundExpression);\n    } else if (expression instanceof CompoundExpression && expression.name === 'error') {\n        return false;\n    } else if (expression instanceof CollatorExpression) {\n        // Although the results of a Collator expression with fixed arguments\n        // generally shouldn't change between executions, we can't serialize them\n        // as constant expressions because results change based on environment.\n        return false;\n    }\n\n    const isTypeAnnotation = expression instanceof Coercion ||\n        expression instanceof Assertion ||\n        expression instanceof ArrayAssertion;\n\n    let childrenConstant = true;\n    expression.eachChild(child => {\n        // We can _almost_ assume that if `expressions` children are constant,\n        // they would already have been evaluated to Literal values when they\n        // were parsed.  Type annotations are the exception, because they might\n        // have been inferred and added after a child was parsed.\n\n        // So we recurse into isConstant() for the children of type annotations,\n        // but otherwise simply check whether they are Literals.\n        if (isTypeAnnotation) {\n            childrenConstant = childrenConstant && isConstant(child);\n        } else {\n            childrenConstant = childrenConstant && child instanceof Literal;\n        }\n    });\n    if (!childrenConstant) {\n        return false;\n    }\n\n    return isFeatureConstant(expression) &&\n        isGlobalPropertyConstant(expression, ['zoom', 'heatmap-density', 'line-progress', 'is-supported-script']);\n}\n","// @flow\n\nclass ParsingError extends Error {\n    key: string;\n    message: string;\n    constructor(key: string, message: string) {\n        super(message);\n        this.message = message;\n        this.key = key;\n    }\n}\n\nexport default ParsingError;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// @flow\n\nimport assert from 'assert';\n\nimport extend from '../util/extend';\nimport ParsingError from './parsing_error';\nimport ParsingContext from './parsing_context';\nimport EvaluationContext from './evaluation_context';\nimport CompoundExpression from './compound_expression';\nimport Step from './definitions/step';\nimport Interpolate from './definitions/interpolate';\nimport Coalesce from './definitions/coalesce';\nimport Let from './definitions/let';\nimport definitions from './definitions';\nimport * as isConstant from './is_constant';\nimport RuntimeError from './runtime_error';\nimport { success, error } from '../util/result';\n\nimport type {Type} from './types';\nimport type {Value} from './values';\nimport type {Expression} from './expression';\nimport type {StylePropertySpecification} from '../style-spec';\nimport type {Result} from '../util/result';\nimport type {InterpolationType} from './definitions/interpolate';\n\nexport type Feature = {\n    +type: 1 | 2 | 3 | 'Unknown' | 'Point' | 'MultiPoint' | 'LineString' | 'MultiLineString' | 'Polygon' | 'MultiPolygon',\n    +id?: any,\n    +properties: {[string]: any}\n};\n\nexport type GlobalProperties = $ReadOnly<{\n    zoom: number,\n    heatmapDensity?: number,\n    lineProgress?: number,\n    isSupportedScript?: (string) => boolean\n}>;\n\nexport class StyleExpression {\n    expression: Expression;\n\n    _evaluator: EvaluationContext;\n    _defaultValue: Value;\n    _warningHistory: {[key: string]: boolean};\n    _enumValues: {[string]: any};\n\n    constructor(expression: Expression, propertySpec: StylePropertySpecification) {\n        this.expression = expression;\n        this._warningHistory = {};\n        this._defaultValue = getDefaultValue(propertySpec);\n        if (propertySpec.type === 'enum') {\n            this._enumValues = propertySpec.values;\n        }\n    }\n\n    evaluateWithoutErrorHandling(globals: GlobalProperties, feature?: Feature): any {\n        if (!this._evaluator) {\n            this._evaluator = new EvaluationContext();\n        }\n\n        this._evaluator.globals = globals;\n        this._evaluator.feature = feature;\n\n        return this.expression.evaluate(this._evaluator);\n    }\n\n    evaluate(globals: GlobalProperties, feature?: Feature): any {\n        if (!this._evaluator) {\n            this._evaluator = new EvaluationContext();\n        }\n\n        this._evaluator.globals = globals;\n        this._evaluator.feature = feature;\n\n        try {\n            const val = this.expression.evaluate(this._evaluator);\n            if (val === null || val === undefined) {\n                return this._defaultValue;\n            }\n            if (this._enumValues && !(val in this._enumValues)) {\n                throw new RuntimeError(`Expected value to be one of ${Object.keys(this._enumValues).map(v => JSON.stringify(v)).join(', ')}, but found ${JSON.stringify(val)} instead.`);\n            }\n            return val;\n        } catch (e) {\n            if (!this._warningHistory[e.message]) {\n                this._warningHistory[e.message] = true;\n                if (typeof console !== 'undefined') {\n                    console.warn(e.message);\n                }\n            }\n            return this._defaultValue;\n        }\n    }\n}\n\nexport function isExpression(expression: mixed) {\n    return Array.isArray(expression) && expression.length > 0 &&\n        typeof expression[0] === 'string' && expression[0] in definitions;\n}\n\n/**\n * Parse and typecheck the given style spec JSON expression.  If\n * options.defaultValue is provided, then the resulting StyleExpression's\n * `evaluate()` method will handle errors by logging a warning (once per\n * message) and returning the default value.  Otherwise, it will throw\n * evaluation errors.\n *\n * @private\n */\nexport function createExpression(expression: mixed, propertySpec: StylePropertySpecification): Result<StyleExpression, Array<ParsingError>> {\n    const parser = new ParsingContext(definitions, [], getExpectedType(propertySpec));\n    const parsed = parser.parse(expression);\n    if (!parsed) {\n        assert(parser.errors.length > 0);\n        return error(parser.errors);\n    }\n\n    return success(new StyleExpression(parsed, propertySpec));\n}\n\nexport class ZoomConstantExpression<Kind> {\n    kind: Kind;\n    _styleExpression: StyleExpression;\n\n    constructor(kind: Kind, expression: StyleExpression) {\n        this.kind = kind;\n        this._styleExpression = expression;\n    }\n\n    evaluateWithoutErrorHandling(globals: GlobalProperties, feature?: Feature): any {\n        return this._styleExpression.evaluateWithoutErrorHandling(globals, feature);\n    }\n\n    evaluate(globals: GlobalProperties, feature?: Feature): any {\n        return this._styleExpression.evaluate(globals, feature);\n    }\n}\n\nexport class ZoomDependentExpression<Kind> {\n    kind: Kind;\n    zoomStops: Array<number>;\n\n    _styleExpression: StyleExpression;\n    _interpolationType: ?InterpolationType;\n\n    constructor(kind: Kind, expression: StyleExpression, zoomCurve: Step | Interpolate) {\n        this.kind = kind;\n        this.zoomStops = zoomCurve.labels;\n        this._styleExpression = expression;\n        if (zoomCurve instanceof Interpolate) {\n            this._interpolationType = zoomCurve.interpolation;\n        }\n    }\n\n    evaluateWithoutErrorHandling(globals: GlobalProperties, feature?: Feature): any {\n        return this._styleExpression.evaluateWithoutErrorHandling(globals, feature);\n    }\n\n    evaluate(globals: GlobalProperties, feature?: Feature): any {\n        return this._styleExpression.evaluate(globals, feature);\n    }\n\n    interpolationFactor(input: number, lower: number, upper: number): number {\n        if (this._interpolationType) {\n            return Interpolate.interpolationFactor(this._interpolationType, input, lower, upper);\n        } else {\n            return 0;\n        }\n    }\n}\n\nexport type ConstantExpression = {\n    kind: 'constant',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n}\n\nexport type SourceExpression = {\n    kind: 'source',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n};\n\nexport type CameraExpression = {\n    kind: 'camera',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n    +interpolationFactor: (input: number, lower: number, upper: number) => number,\n    zoomStops: Array<number>\n};\n\nexport type CompositeExpression = {\n    kind: 'composite',\n    +evaluate: (globals: GlobalProperties, feature?: Feature) => any,\n    +interpolationFactor: (input: number, lower: number, upper: number) => number,\n    zoomStops: Array<number>\n};\n\nexport type StylePropertyExpression =\n    | ConstantExpression\n    | SourceExpression\n    | CameraExpression\n    | CompositeExpression;\n\nexport function createPropertyExpression(expression: mixed, propertySpec: StylePropertySpecification): Result<StylePropertyExpression, Array<ParsingError>> {\n    expression = createExpression(expression, propertySpec);\n    if (expression.result === 'error') {\n        return expression;\n    }\n\n    const parsed = expression.value.expression;\n\n    const isFeatureConstant = isConstant.isFeatureConstant(parsed);\n    if (!isFeatureConstant && !propertySpec['property-function']) {\n        return error([new ParsingError('', 'property expressions not supported')]);\n    }\n\n    const isZoomConstant = isConstant.isGlobalPropertyConstant(parsed, ['zoom']);\n    if (!isZoomConstant && propertySpec['zoom-function'] === false) {\n        return error([new ParsingError('', 'zoom expressions not supported')]);\n    }\n\n    const zoomCurve = findZoomCurve(parsed);\n    if (!zoomCurve && !isZoomConstant) {\n        return error([new ParsingError('', '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n    } else if (zoomCurve instanceof ParsingError) {\n        return error([zoomCurve]);\n    } else if (zoomCurve instanceof Interpolate && propertySpec['function'] === 'piecewise-constant') {\n        return error([new ParsingError('', '\"interpolate\" expressions cannot be used with this property')]);\n    }\n\n    if (!zoomCurve) {\n        return success(isFeatureConstant ?\n            (new ZoomConstantExpression('constant', expression.value): ConstantExpression) :\n            (new ZoomConstantExpression('source', expression.value): SourceExpression));\n    }\n\n    return success(isFeatureConstant ?\n        (new ZoomDependentExpression('camera', expression.value, zoomCurve): CameraExpression) :\n        (new ZoomDependentExpression('composite', expression.value, zoomCurve): CompositeExpression));\n}\n\nimport { isFunction, createFunction } from '../function';\nimport { Color } from './values';\n\n// serialization wrapper for old-style stop functions normalized to the\n// expression interface\nexport class StylePropertyFunction<T> {\n    _parameters: PropertyValueSpecification<T>;\n    _specification: StylePropertySpecification;\n\n    kind: 'constant' | 'source' | 'camera' | 'composite';\n    evaluate: (globals: GlobalProperties, feature?: Feature) => any;\n    interpolationFactor: ?(input: number, lower: number, upper: number) => number;\n    zoomStops: ?Array<number>;\n\n    constructor(parameters: PropertyValueSpecification<T>, specification: StylePropertySpecification) {\n        this._parameters = parameters;\n        this._specification = specification;\n        extend(this, createFunction(this._parameters, this._specification));\n    }\n\n    static deserialize(serialized: {_parameters: PropertyValueSpecification<T>, _specification: StylePropertySpecification}) {\n        return ((new StylePropertyFunction(serialized._parameters, serialized._specification)): StylePropertyFunction<T>);\n    }\n\n    static serialize(input: StylePropertyFunction<T>) {\n        return {\n            _parameters: input._parameters,\n            _specification: input._specification\n        };\n    }\n}\n\nexport function normalizePropertyExpression<T>(value: PropertyValueSpecification<T>, specification: StylePropertySpecification): StylePropertyExpression {\n    if (isFunction(value)) {\n        return (new StylePropertyFunction(value, specification): any);\n\n    } else if (isExpression(value)) {\n        const expression = createPropertyExpression(value, specification);\n        if (expression.result === 'error') {\n            // this should have been caught in validation\n            throw new Error(expression.value.map(err => `${err.key}: ${err.message}`).join(', '));\n        }\n        return expression.value;\n\n    } else {\n        let constant: any = value;\n        if (typeof value === 'string' && specification.type === 'color') {\n            constant = Color.parse(value);\n        }\n        return {\n            kind: 'constant',\n            evaluate: () => constant\n        };\n    }\n}\n\n// Zoom-dependent expressions may only use [\"zoom\"] as the input to a top-level \"step\" or \"interpolate\"\n// expression (collectively referred to as a \"curve\"). The curve may be wrapped in one or more \"let\" or\n// \"coalesce\" expressions.\nfunction findZoomCurve(expression: Expression): Step | Interpolate | ParsingError | null {\n    let result = null;\n    if (expression instanceof Let) {\n        result = findZoomCurve(expression.result);\n\n    } else if (expression instanceof Coalesce) {\n        for (const arg of expression.args) {\n            result = findZoomCurve(arg);\n            if (result) {\n                break;\n            }\n        }\n\n    } else if ((expression instanceof Step || expression instanceof Interpolate) &&\n        expression.input instanceof CompoundExpression &&\n        expression.input.name === 'zoom') {\n\n        result = expression;\n    }\n\n    if (result instanceof ParsingError) {\n        return result;\n    }\n\n    expression.eachChild((child) => {\n        const childResult = findZoomCurve(child);\n        if (childResult instanceof ParsingError) {\n            result = childResult;\n        } else if (!result && childResult) {\n            result = new ParsingError('', '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.');\n        } else if (result && childResult && result !== childResult) {\n            result = new ParsingError('', 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.');\n        }\n    });\n\n    return result;\n}\n\nimport { ColorType, StringType, NumberType, BooleanType, ValueType, array } from './types';\n\nfunction getExpectedType(spec: StylePropertySpecification): Type | null {\n    const types = {\n        color: ColorType,\n        string: StringType,\n        number: NumberType,\n        enum: StringType,\n        boolean: BooleanType\n    };\n\n    if (spec.type === 'array') {\n        return array(types[spec.value] || ValueType, spec.length);\n    }\n\n    return types[spec.type] || null;\n}\n\nfunction getDefaultValue(spec: StylePropertySpecification): Value {\n    if (spec.type === 'color' && isFunction(spec.default)) {\n        // Special case for heatmap-color: it uses the 'default:' to define a\n        // default color ramp, but createExpression expects a simple value to fall\n        // back to in case of runtime errors\n        return new Color(0, 0, 0, 0);\n    } else if (spec.type === 'color') {\n        return Color.parse(spec.default) || null;\n    } else if (spec.default === undefined) {\n        return null;\n    } else {\n        return spec.default;\n    }\n}\n","// @flow\n\nimport RuntimeError from './runtime_error';\n\nimport type { Expression } from './expression';\n\nexport type Stops = Array<[number, Expression]>;\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n * @private\n */\nexport function findStopLessThanOrEqualTo(stops: Array<number>, input: number) {\n    const n = stops.length;\n    let lowerIndex = 0;\n    let upperIndex = n - 1;\n    let currentIndex = 0;\n    let currentValue, upperValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex];\n        upperValue = stops[currentIndex + 1];\n        if (input === currentValue || input > currentValue && input < upperValue) { // Search complete\n            return currentIndex;\n        } else if (currentValue < input) {\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        } else {\n            throw new RuntimeError('Input is not a number.');\n        }\n    }\n\n    return Math.max(currentIndex - 1, 0);\n}\n","\nimport * as colorSpaces from '../util/color_spaces';\nimport Color from '../util/color';\nimport extend from '../util/extend';\nimport getType from '../util/get_type';\nimport * as interpolate from '../util/interpolate';\nimport Interpolate from '../expression/definitions/interpolate';\n\nexport function isFunction(value) {\n    return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nfunction identityFunction(x) {\n    return x;\n}\n\nexport function createFunction(parameters, propertySpec) {\n    const isColor = propertySpec.type === 'color';\n    const zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n    const featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    const zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    const type = parameters.type || (propertySpec.function === 'interpolated' ? 'exponential' : 'interval');\n\n    if (isColor) {\n        parameters = extend({}, parameters);\n\n        if (parameters.stops) {\n            parameters.stops = parameters.stops.map((stop) => {\n                return [stop[0], Color.parse(stop[1])];\n            });\n        }\n\n        if (parameters.default) {\n            parameters.default = Color.parse(parameters.default);\n        } else {\n            parameters.default = Color.parse(propertySpec.default);\n        }\n    }\n\n    if (parameters.colorSpace && parameters.colorSpace !== 'rgb' && !colorSpaces[parameters.colorSpace]) { // eslint-disable-line import/namespace\n        throw new Error(`Unknown color space: ${parameters.colorSpace}`);\n    }\n\n    let innerFun;\n    let hashedStops;\n    let categoricalKeyType;\n    if (type === 'exponential') {\n        innerFun = evaluateExponentialFunction;\n    } else if (type === 'interval') {\n        innerFun = evaluateIntervalFunction;\n    } else if (type === 'categorical') {\n        innerFun = evaluateCategoricalFunction;\n\n        // For categorical functions, generate an Object as a hashmap of the stops for fast searching\n        hashedStops = Object.create(null);\n        for (const stop of parameters.stops) {\n            hashedStops[stop[0]] = stop[1];\n        }\n\n        // Infer key type based on first stop key-- used to encforce strict type checking later\n        categoricalKeyType = typeof parameters.stops[0][0];\n\n    } else if (type === 'identity') {\n        innerFun = evaluateIdentityFunction;\n    } else {\n        throw new Error(`Unknown function type \"${type}\"`);\n    }\n\n    if (zoomAndFeatureDependent) {\n        const featureFunctions = {};\n        const zoomStops = [];\n        for (let s = 0; s < parameters.stops.length; s++) {\n            const stop = parameters.stops[s];\n            const zoom = stop[0].zoom;\n            if (featureFunctions[zoom] === undefined) {\n                featureFunctions[zoom] = {\n                    zoom: zoom,\n                    type: parameters.type,\n                    property: parameters.property,\n                    default: parameters.default,\n                    stops: []\n                };\n                zoomStops.push(zoom);\n            }\n            featureFunctions[zoom].stops.push([stop[0].value, stop[1]]);\n        }\n\n        const featureFunctionStops = [];\n        for (const z of zoomStops) {\n            featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z], propertySpec)]);\n        }\n\n        return {\n            kind: 'composite',\n            interpolationFactor: Interpolate.interpolationFactor.bind(undefined, {name: 'linear'}),\n            zoomStops: featureFunctionStops.map(s => s[0]),\n            evaluate({zoom}, properties) {\n                return evaluateExponentialFunction({\n                    stops: featureFunctionStops,\n                    base: parameters.base\n                }, propertySpec, zoom).evaluate(zoom, properties);\n            }\n        };\n    } else if (zoomDependent) {\n        return {\n            kind: 'camera',\n            interpolationFactor: type === 'exponential' ?\n                Interpolate.interpolationFactor.bind(undefined, {name: 'exponential', base: parameters.base !== undefined ? parameters.base : 1}) :\n                () => 0,\n            zoomStops: parameters.stops.map(s => s[0]),\n            evaluate: ({zoom}) => innerFun(parameters, propertySpec, zoom, hashedStops, categoricalKeyType)\n        };\n    } else {\n        return {\n            kind: 'source',\n            evaluate(_, feature) {\n                const value = feature && feature.properties ? feature.properties[parameters.property] : undefined;\n                if (value === undefined) {\n                    return coalesce(parameters.default, propertySpec.default);\n                }\n                return innerFun(parameters, propertySpec, value, hashedStops, categoricalKeyType);\n            }\n        };\n    }\n}\n\nfunction coalesce(a, b, c) {\n    if (a !== undefined) return a;\n    if (b !== undefined) return b;\n    if (c !== undefined) return c;\n}\n\nfunction evaluateCategoricalFunction(parameters, propertySpec, input, hashedStops, keyType) {\n    const evaluated = typeof input === keyType ? hashedStops[input] : undefined; // Enforce strict typing on input\n    return coalesce(evaluated, parameters.default, propertySpec.default);\n}\n\nfunction evaluateIntervalFunction(parameters, propertySpec, input) {\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n\n    return parameters.stops[index][1];\n}\n\nfunction evaluateExponentialFunction(parameters, propertySpec, input) {\n    const base = parameters.base !== undefined ? parameters.base : 1;\n\n    // Edge cases\n    if (getType(input) !== 'number') return coalesce(parameters.default, propertySpec.default);\n    const n = parameters.stops.length;\n    if (n === 1) return parameters.stops[0][1];\n    if (input <= parameters.stops[0][0]) return parameters.stops[0][1];\n    if (input >= parameters.stops[n - 1][0]) return parameters.stops[n - 1][1];\n\n    const index = findStopLessThanOrEqualTo(parameters.stops, input);\n    const t = interpolationFactor(\n        input, base,\n        parameters.stops[index][0],\n        parameters.stops[index + 1][0]);\n\n    const outputLower = parameters.stops[index][1];\n    const outputUpper = parameters.stops[index + 1][1];\n    let interp = interpolate[propertySpec.type] || identityFunction; // eslint-disable-line import/namespace\n\n    if (parameters.colorSpace && parameters.colorSpace !== 'rgb') {\n        const colorspace = colorSpaces[parameters.colorSpace]; // eslint-disable-line import/namespace\n        interp = (a, b) => colorspace.reverse(colorspace.interpolate(colorspace.forward(a), colorspace.forward(b), t));\n    }\n\n    if (typeof outputLower.evaluate === 'function') {\n        return {\n            evaluate(...args) {\n                const evaluatedLower = outputLower.evaluate.apply(undefined, args);\n                const evaluatedUpper = outputUpper.evaluate.apply(undefined, args);\n                // Special case for fill-outline-color, which has no spec default.\n                if (evaluatedLower === undefined || evaluatedUpper === undefined) {\n                    return undefined;\n                }\n                return interp(evaluatedLower, evaluatedUpper, t);\n            }\n        };\n    }\n\n    return interp(outputLower, outputUpper, t);\n}\n\nfunction evaluateIdentityFunction(parameters, propertySpec, input) {\n    if (propertySpec.type === 'color') {\n        input = Color.parse(input);\n    } else if (getType(input) !== propertySpec.type && (propertySpec.type !== 'enum' || !propertySpec.values[input])) {\n        input = undefined;\n    }\n    return coalesce(input, parameters.default, propertySpec.default);\n}\n\n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n *\n * @private\n */\nfunction findStopLessThanOrEqualTo(stops, input) {\n    const n = stops.length;\n    let lowerIndex = 0;\n    let upperIndex = n - 1;\n    let currentIndex = 0;\n    let currentValue, upperValue;\n\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex][0];\n        upperValue = stops[currentIndex + 1][0];\n        if (input === currentValue || input > currentValue && input < upperValue) { // Search complete\n            return currentIndex;\n        } else if (currentValue < input) {\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        }\n    }\n\n    return Math.max(currentIndex - 1, 0);\n}\n\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n *\n * How it works:\n * Two consecutive stop values define a (scaled and shifted) exponential\n * function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n */\nfunction interpolationFactor(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol\n */\n\nimport {getContext} from './webgl.js';\n\n\n/**\n * An array with two elements, representing a pixel. The first element is the\n * x-coordinate, the second the y-coordinate of the pixel.\n * @typedef {Array.<number>} Pixel\n * @api\n */\n\n\n/**\n * Include debuggable shader sources.  Default is `true`. This should be set to\n * `false` for production builds.\n * TODO: move to a separate ol-webgl package\n * @type {boolean}\n */\nexport const DEBUG_WEBGL = true;\n\n\n/**\n * TODO: move to a separate ol-webgl package\n * The maximum supported WebGL texture size in pixels. If WebGL is not\n * supported, the value is set to `undefined`.\n * @type {number|undefined}\n */\nlet WEBGL_MAX_TEXTURE_SIZE; // value is set below\n\n\n/**\n * TODO: move to a separate ol-webgl package\n * List of supported WebGL extensions.\n * @type {Array.<string>}\n */\nlet WEBGL_EXTENSIONS; // value is set below\n\n\n/**\n * TODO: move to a separate ol-webgl package\n * WebGL is available.\n * @type {boolean}\n */\nlet HAS_WEBGL = false;\n\n\nif (typeof window !== 'undefined' && 'WebGLRenderingContext' in window) {\n  try {\n    const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('CANVAS'));\n    const gl = getContext(canvas, {failIfMajorPerformanceCaveat: true});\n    if (gl) {\n      HAS_WEBGL = true;\n      WEBGL_MAX_TEXTURE_SIZE = /** @type {number} */ (gl.getParameter(gl.MAX_TEXTURE_SIZE));\n      WEBGL_EXTENSIONS = gl.getSupportedExtensions();\n    }\n  } catch (e) {\n    // pass\n  }\n}\n\nexport {HAS_WEBGL, WEBGL_MAX_TEXTURE_SIZE, WEBGL_EXTENSIONS};\n\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'v4.6.4';\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = ++uidCounter_);\n}\n","/*\nol-mapbox-style - Use Mapbox Style objects with OpenLayers\nCopyright 2016-present Boundless Spatial, Inc.\nLicense: https://raw.githubusercontent.com/boundlessgeo/ol-mapbox-gl-style/master/LICENSE\n*/\n\nimport Style from 'ol/style/Style';\nimport Fill from 'ol/style/Fill';\nimport Stroke from 'ol/style/Stroke';\nimport Icon from 'ol/style/Icon';\nimport Text from 'ol/style/Text';\nimport Circle from 'ol/style/Circle';\nimport Point from 'ol/geom/Point';\nimport derefLayers from '@mapbox/mapbox-gl-style-spec/deref';\nimport spec from '@mapbox/mapbox-gl-style-spec/reference/latest';\nimport {isFunction} from '@mapbox/mapbox-gl-style-spec/function';\nimport {isExpression} from '@mapbox/mapbox-gl-style-spec/expression';\nimport convertFunction from '@mapbox/mapbox-gl-style-spec/function/convert';\nimport Color from '@mapbox/mapbox-gl-style-spec/util/color';\nimport {createPropertyExpression} from '@mapbox/mapbox-gl-style-spec/expression';\n\nimport createFilter from '@mapbox/mapbox-gl-style-spec/feature_filter';\nimport mb2css from 'mapbox-to-css-font';\nimport {deg2rad, getZoomForResolution} from './util';\n\nconst types = {\n  'Point': 1,\n  'MultiPoint': 1,\n  'LineString': 2,\n  'MultiLineString': 2,\n  'Polygon': 3,\n  'MultiPolygon': 3\n};\n\nconst expressionData = function(rawExpression, propertySpec) {\n  const compiledExpression = createPropertyExpression(rawExpression, propertySpec);\n  if (compiledExpression.result === 'error') {\n    throw new Error(compiledExpression.value.map(err => `${err.key}: ${err.message}`).join(', '));\n  }\n  return compiledExpression.value;\n};\n\nconst emptyObj = {};\nconst zoomObj = {zoom: 0};\nconst functionCache = {};\n\n/**\n * @private\n * @param {Object} layer Gl object layer.\n * @param {string} layoutOrPaint 'layout' or 'paint'.\n * @param {string} property Feature property.\n * @param {number} zoom Zoom.\n * @param {Object} feature Gl feature.\n * @return {?} Value.\n */\nexport function getValue(layer, layoutOrPaint, property, zoom, feature) {\n  const layerId = layer.id;\n  if (!functionCache[layerId]) {\n    functionCache[layerId] = {};\n  }\n  const functions = functionCache[layerId];\n  if (!functions[property]) {\n    let value = (layer[layoutOrPaint] || emptyObj)[property];\n    const propertySpec = spec[`${layoutOrPaint}_${layer.type}`][property];\n    if (value === undefined) {\n      value = propertySpec.default;\n    }\n    let isExpr = isExpression((value));\n    if (!isExpr && isFunction(value)) {\n      value = convertFunction(value, propertySpec);\n      isExpr = true;\n    }\n    if (isExpr) {\n      const compiledExpression = expressionData(value, propertySpec);\n      functions[property] = compiledExpression.evaluate.bind(compiledExpression);\n    } else {\n      if (propertySpec.type == 'color') {\n        value = Color.parse(value);\n      }\n      functions[property] = function() {\n        return value;\n      };\n    }\n  }\n  zoomObj.zoom = zoom;\n  return functions[property](zoomObj, feature);\n}\n\nconst filterCache = {};\nfunction evaluateFilter(layerId, filter, feature, zoom) {\n  if (!(layerId in filterCache)) {\n    filterCache[layerId] = createFilter(filter);\n  }\n  zoomObj.zoom = zoom;\n  return filterCache[layerId](zoomObj, feature);\n}\n\nconst colorCache = {};\nfunction colorWithOpacity(color, opacity) {\n  if (color && opacity !== undefined) {\n    let colorData = colorCache[color];\n    if (!colorData) {\n      colorCache[color] = colorData = {\n        color: color.toArray(),\n        opacity: color.a\n      };\n    }\n    color = colorData.color;\n    color[3] = colorData.opacity * opacity;\n    if (color[3] === 0) {\n      color = undefined;\n    }\n  }\n  return color;\n}\n\nconst templateRegEx = /^([^]*)\\{(.*)\\}([^]*)$/;\nfunction fromTemplate(text, properties) {\n  let parts;\n  do {\n    parts = text.match(templateRegEx);\n    if (parts) {\n      const value = properties[parts[2]] || '';\n      text = parts[1] + value + parts[3];\n    }\n  } while (parts);\n  return text;\n}\n\n/**\n * Creates a style function from the `glStyle` object for all layers that use\n * the specified `source`, which needs to be a `\"type\": \"vector\"` or\n * `\"type\": \"geojson\"` source and applies it to the specified OpenLayers layer.\n *\n * @param {ol.layer.Vector|ol.layer.VectorTile} olLayer OpenLayers layer to\n * apply the style to. In addition to the style, the layer will get two\n * properties: `mapbox-source` will be the `id` of the `glStyle`'s source used\n * for the layer, and `mapbox-layers` will be an array of the `id`s of the\n * `glStyle`'s layers.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string|Array<string>} source `source` key or an array of layer `id`s\n * from the Mapbox Style object. When a `source` key is provided, all layers for\n * the specified source will be included in the style function. When layer `id`s\n * are provided, they must be from layers that use the same source.\n * @param {Array<number>} [resolutions=[78271.51696402048, 39135.75848201024,\n * 19567.87924100512, 9783.93962050256, 4891.96981025128, 2445.98490512564,\n * 1222.99245256282, 611.49622628141, 305.748113140705, 152.8740565703525,\n * 76.43702828517625, 38.21851414258813, 19.109257071294063, 9.554628535647032,\n * 4.777314267823516, 2.388657133911758, 1.194328566955879, 0.5971642834779395,\n * 0.29858214173896974, 0.14929107086948487, 0.07464553543474244]]\n * Resolutions for mapping resolution to zoom level.\n * @param {Object} [spriteData=undefined] Sprite data from the url specified in\n * the Mapbox Style object's `sprite` property. Only required if a `sprite`\n * property is specified in the Mapbox Style object.\n * @param {Object} [spriteImageUrl=undefined] Sprite image url for the sprite\n * specified in the Mapbox Style object's `sprite` property. Only required if a\n * `sprite` property is specified in the Mapbox Style object.\n * @param {function(Array<string>):string} [getFonts=undefined] Function that\n * receives a font stack as arguments, and returns a (modified) font stack that\n * is available. Font names are the names used in the Mapbox Style object. If\n * not provided, the font stack will be used as-is. This function can also be\n * used for loading web fonts.\n * @return {ol.style.StyleFunction} Style function for use in\n * `ol.layer.Vector` or `ol.layer.VectorTile`.\n */\nexport default function(olLayer, glStyle, source, resolutions, spriteData, spriteImageUrl, getFonts) {\n  if (!resolutions) {\n    resolutions = [];\n    for (let res = 78271.51696402048; resolutions.length < 21; res /= 2) {\n      resolutions.push(res);\n    }\n  }\n  if (typeof glStyle == 'string') {\n    glStyle = JSON.parse(glStyle);\n  }\n  if (glStyle.version != 8) {\n    throw new Error('glStyle version 8 required.');\n  }\n\n  let spriteImage, spriteImgSize;\n  if (spriteImageUrl) {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = function() {\n      spriteImage = img;\n      spriteImgSize = [img.width, img.height];\n      olLayer.changed();\n      img.onload = null;\n    };\n    img.src = spriteImageUrl;\n  }\n\n  const ctx = document.createElement('CANVAS').getContext('2d');\n  const measureCache = {};\n  function wrapText(text, font, em) {\n    const key = em + ',' + font + ',' + text;\n    let wrappedText = measureCache[key];\n    if (!wrappedText) {\n      ctx.font = font;\n      const oneEm = ctx.measureText('M').width;\n      const width = oneEm * em;\n      const words = text.split(' ');\n      let line = '';\n      const lines = [];\n      for (let i = 0, ii = words.length; i < ii; ++i) {\n        const word = words[i];\n        if ((ctx.measureText(line + word).width <= width)) {\n          line += (line ? ' ' : '') + word;\n        } else {\n          if (line) {\n            lines.push(line);\n          }\n          line = word;\n        }\n      }\n      if (line) {\n        lines.push(line);\n      }\n      measureCache[key] = wrappedText = lines.join('\\n');\n    }\n    return wrappedText;\n  }\n\n  const allLayers = derefLayers(glStyle.layers);\n\n  const layersBySourceLayer = {};\n  const mapboxLayers = [];\n  let mapboxSource;\n  for (let i = 0, ii = allLayers.length; i < ii; ++i) {\n    const layer = allLayers[i];\n    const layerId = layer.id;\n    if (typeof source == 'string' && layer.source == source ||\n        source.indexOf(layerId) !== -1) {\n      const sourceLayer = layer['source-layer'];\n      if (!mapboxSource) {\n        mapboxSource = layer.source;\n      }\n      let layers = layersBySourceLayer[sourceLayer];\n      if (!layers) {\n        layers = layersBySourceLayer[sourceLayer] = [];\n      }\n      layers.push({\n        layer: layer,\n        index: i\n      });\n      mapboxLayers.push(layerId);\n    }\n    // TODO revisit when diffing gets added\n    delete functionCache[layerId];\n    delete filterCache[layerId];\n  }\n\n  const textHalo = new Stroke();\n  const textColor = new Fill();\n\n  const iconImageCache = {};\n  const patternCache = {};\n  const styles = [];\n\n  const styleFunction = function(feature, resolution) {\n    const properties = feature.getProperties();\n    const layers = layersBySourceLayer[properties.layer];\n    if (!layers) {\n      return;\n    }\n    let zoom = resolutions.indexOf(resolution);\n    if (zoom == -1) {\n      zoom = getZoomForResolution(resolution, resolutions);\n    }\n    const type = types[feature.getGeometry().getType()];\n    const f = {\n      properties: properties,\n      type: type\n    };\n    let stylesLength = -1;\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n      const layerData = layers[i];\n      const layer = layerData.layer;\n      const layerId = layer.id;\n\n      const layout = layer.layout || emptyObj;\n      const paint = layer.paint || emptyObj;\n      if (layout.visibility === 'none' || ('minzoom' in layer && zoom < layer.minzoom) ||\n          ('maxzoom' in layer && zoom >= layer.maxzoom)) {\n        continue;\n      }\n      const filter = layer.filter;\n      if (!filter || evaluateFilter(layerId, filter, f, zoom)) {\n        let color, opacity, fill, stroke, strokeColor, style;\n        const index = layerData.index;\n        if (type == 3 && layer.type == 'fill') {\n          opacity = getValue(layer, 'paint', 'fill-opacity', zoom, f);\n          if ('fill-pattern' in paint) {\n            const fillIcon = getValue(layer, 'paint', 'fill-pattern', zoom, f);\n            if (fillIcon) {\n              const icon = fromTemplate(fillIcon, properties);\n              if (spriteImage && spriteData && spriteData[icon]) {\n                ++stylesLength;\n                style = styles[stylesLength];\n                if (!style || !style.getFill() || style.getStroke() || style.getText()) {\n                  style = styles[stylesLength] = new Style({\n                    fill: new Fill()\n                  });\n                }\n                fill = style.getFill();\n                style.setZIndex(index);\n                const icon_cache_key = icon + '.' + opacity;\n                let pattern = patternCache[icon_cache_key];\n                if (!pattern) {\n                  const spriteImageData = spriteData[icon];\n                  const canvas = document.createElement('canvas');\n                  canvas.width = spriteImageData.width;\n                  canvas.height = spriteImageData.height;\n                  const ctx = canvas.getContext('2d');\n                  ctx.globalAlpha = opacity;\n                  ctx.drawImage(\n                    spriteImage,\n                    spriteImageData.x,\n                    spriteImageData.y,\n                    spriteImageData.width,\n                    spriteImageData.height,\n                    0,\n                    0,\n                    spriteImageData.width,\n                    spriteImageData.height\n                  );\n                  pattern = ctx.createPattern(canvas, 'repeat');\n                  patternCache[icon_cache_key] = pattern;\n                }\n                fill.setColor(pattern);\n              }\n            }\n          } else {\n            opacity = getValue(layer, 'paint', 'fill-opacity', zoom, f);\n            color = colorWithOpacity(getValue(layer, 'paint', 'fill-color', zoom, f), opacity);\n            if (color) {\n              ++stylesLength;\n              style = styles[stylesLength];\n              if (!style || !style.getFill() || style.getStroke() || style.getText()) {\n                style = styles[stylesLength] = new Style({\n                  fill: new Fill()\n                });\n              }\n              fill = style.getFill();\n              fill.setColor(color);\n              style.setZIndex(index);\n            }\n            if ('fill-outline-color' in paint) {\n              strokeColor = colorWithOpacity(getValue(layer, 'paint', 'fill-outline-color', zoom, f), opacity);\n            }\n            if (strokeColor) {\n              ++stylesLength;\n              style = styles[stylesLength];\n              if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n                style = styles[stylesLength] = new Style({\n                  stroke: new Stroke()\n                });\n              }\n              stroke = style.getStroke();\n              stroke.setLineCap(spec['layout_line']['line-cap']);\n              stroke.setLineJoin(spec['layout_line']['line-join']);\n              stroke.setMiterLimit(spec['layout_line']['line-miter-limit']);\n              stroke.setColor(strokeColor);\n              stroke.setWidth(1);\n              stroke.setLineDash(null);\n              style.setZIndex(index);\n            }\n          }\n        }\n        if (type != 1) {\n          color = !('line-pattern' in paint) && 'line-color' in paint ?\n            colorWithOpacity(getValue(layer, 'paint', 'line-color', zoom, f), getValue(layer, 'paint', 'line-opacity', zoom, f)) :\n            undefined;\n          const width = layer.type == 'line' ? getValue(layer, 'paint', 'line-width', zoom, f) : 1;\n          if (color && width > 0) {\n            ++stylesLength;\n            style = styles[stylesLength];\n            if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n              style = styles[stylesLength] = new Style({\n                stroke: new Stroke()\n              });\n            }\n            stroke = style.getStroke();\n            stroke.setLineCap(getValue(layer, 'layout', 'line-cap', zoom, f));\n            stroke.setLineJoin(getValue(layer, 'layout', 'line-join', zoom, f));\n            stroke.setMiterLimit(getValue(layer, 'layout', 'line-miter-limit', zoom, f));\n            stroke.setColor(color);\n            stroke.setWidth(width);\n            stroke.setLineDash(paint['line-dasharray'] ?\n              getValue(layer, 'paint', 'line-dasharray', zoom, f).map(function(x) {\n                return x * width;\n              }) : null);\n            style.setZIndex(index);\n          }\n        }\n\n        let hasImage = false;\n        let text = null;\n        let icon, iconImg, skipLabel;\n        if ((type == 1 || type == 2) && 'icon-image' in layout) {\n          const iconImage = getValue(layer, 'layout', 'icon-image', zoom, f);\n          if (iconImage) {\n            icon = fromTemplate(iconImage, properties);\n            let styleGeom = undefined;\n            if (spriteImage && spriteData && spriteData[icon]) {\n              if (type == 2) {\n                const geom = feature.getGeometry();\n                // ol package and ol-debug.js only\n                if (geom.getFlatMidpoint) {\n                  const extent = geom.getExtent();\n                  const size = Math.sqrt(Math.max(\n                    Math.pow((extent[2] - extent[0]) / resolution, 2),\n                    Math.pow((extent[3] - extent[1]) / resolution, 2))\n                  );\n                  if (size > 150) {\n                    //FIXME Do not hard-code a size of 150\n                    styleGeom = new Point(geom.getFlatMidpoint());\n                  }\n                }\n              }\n              if (type !== 2 || styleGeom) {\n                ++stylesLength;\n                style = styles[stylesLength];\n                if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n                  style = styles[stylesLength] = new Style();\n                }\n                style.setGeometry(styleGeom);\n                const iconSize = getValue(layer, 'layout', 'icon-size', zoom, f);\n                const iconColor = paint['icon-color'] !== undefined ? getValue(layer, 'paint', 'icon-color', zoom, f) : null;\n                let icon_cache_key = icon + '.' + iconSize;\n                if (iconColor !== null) {\n                  icon_cache_key += '.' + iconColor;\n                }\n                iconImg = iconImageCache[icon_cache_key];\n                if (!iconImg) {\n                  const spriteImageData = spriteData[icon];\n                  if (iconColor !== null) {\n                    // cut out the sprite and color it\n                    color = colorWithOpacity(iconColor, 1);\n                    const canvas = document.createElement('canvas');\n                    canvas.width = spriteImageData.width;\n                    canvas.height = spriteImageData.height;\n                    const ctx = canvas.getContext('2d');\n                    ctx.drawImage(\n                      spriteImage,\n                      spriteImageData.x,\n                      spriteImageData.y,\n                      spriteImageData.width,\n                      spriteImageData.height,\n                      0,\n                      0,\n                      spriteImageData.width,\n                      spriteImageData.height\n                    );\n                    const data = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                    for (let c = 0, cc = data.data.length; c < cc; c += 4) {\n                      data.data[c] = color[0];\n                      data.data[c + 1] = color[1];\n                      data.data[c + 2] = color[2];\n                    }\n                    ctx.putImageData(data, 0, 0);\n                    iconImg = iconImageCache[icon_cache_key] = new Icon({\n                      img: canvas,\n                      imgSize: [canvas.width, canvas.height],\n                      scale: iconSize / spriteImageData.pixelRatio\n                    });\n                  } else {\n                    iconImg = iconImageCache[icon_cache_key] = new Icon({\n                      img: spriteImage,\n                      imgSize: spriteImgSize,\n                      size: [spriteImageData.width, spriteImageData.height],\n                      offset: [spriteImageData.x, spriteImageData.y],\n                      scale: iconSize / spriteImageData.pixelRatio\n                    });\n                  }\n                }\n                iconImg.setRotation(deg2rad(getValue(layer, 'layout', 'icon-rotate', zoom, f)));\n                iconImg.setOpacity(getValue(layer, 'paint', 'icon-opacity', zoom, f));\n                style.setImage(iconImg);\n                text = style.getText();\n                style.setText(undefined);\n                style.setZIndex(99999 - index);\n                hasImage = true;\n                skipLabel = false;\n              } else {\n                skipLabel = true;\n              }\n            }\n          }\n        }\n\n        if (type == 1 && 'circle-radius' in paint) {\n          ++stylesLength;\n          style = styles[stylesLength];\n          if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n            style = styles[stylesLength] = new Style();\n          }\n          const circleRadius = getValue(layer, 'paint', 'circle-radius', zoom, f);\n          const circleStrokeColor = getValue(layer, 'paint', 'circle-stroke-color', zoom, f);\n          const circleColor = getValue(layer, 'paint', 'circle-color', zoom, f);\n          const circleOpacity = getValue(layer, 'paint', 'circle-opacity', zoom, f);\n          const circleStrokeWidth = getValue(layer, 'paint', 'circle-stroke-width', zoom, f);\n          const cache_key = circleRadius + '.' + circleStrokeColor + '.' +\n            circleColor + '.' + circleOpacity + '.' + circleStrokeWidth;\n          iconImg = iconImageCache[cache_key];\n          if (!iconImg) {\n            iconImg = new Circle({\n              radius: circleRadius,\n              stroke: circleStrokeWidth === 0 ? undefined : new Stroke({\n                width: circleStrokeWidth,\n                color: colorWithOpacity(circleStrokeColor, circleOpacity)\n              }),\n              fill: new Fill({\n                color: colorWithOpacity(circleColor, circleOpacity)\n              })\n            });\n          }\n          style.setImage(iconImg);\n          text = style.getText();\n          style.setText(undefined);\n          style.setGeometry(undefined);\n          style.setZIndex(99999 - index);\n          hasImage = true;\n        }\n\n        let label;\n        if ('text-field' in layout) {\n          const textField = getValue(layer, 'layout', 'text-field', zoom, f);\n          label = fromTemplate(textField, properties);\n        }\n        if (label && !skipLabel) {\n          if (!hasImage) {\n            ++stylesLength;\n            style = styles[stylesLength];\n            if (!style || !style.getText() || style.getFill() || style.getStroke()) {\n              style = styles[stylesLength] = new Style();\n            }\n            style.setImage(undefined);\n            style.setGeometry(undefined);\n          }\n          if (!style.getText()) {\n            style.setText(text || new Text());\n          }\n          text = style.getText();\n          const textSize = getValue(layer, 'layout', 'text-size', zoom, f);\n          const fontArray = getValue(layer, 'layout', 'text-font', zoom, f);\n          const font = mb2css(getFonts ? getFonts(fontArray) : fontArray, textSize);\n          const textTransform = layout['text-transform'];\n          if (textTransform == 'uppercase') {\n            label = label.toUpperCase();\n          } else if (textTransform == 'lowercase') {\n            label = label.toLowerCase();\n          }\n          const wrappedLabel = type == 2 ? label : wrapText(label, font, getValue(layer, 'layout', 'text-max-width', zoom, f));\n          text.setText(wrappedLabel);\n          text.setFont(font);\n          text.setRotation(deg2rad(getValue(layer, 'layout', 'text-rotate', zoom, f)));\n          const textAnchor = getValue(layer, 'layout', 'text-anchor', zoom, f);\n          const placement = (hasImage || type == 1) ? 'point' : getValue(layer, 'layout', 'symbol-placement', zoom, f);\n          text.setPlacement(placement);\n          if (placement == 'point') {\n            let textAlign = 'center';\n            if (textAnchor.indexOf('left') !== -1) {\n              textAlign = 'left';\n            } else if (textAnchor.indexOf('right') !== -1) {\n              textAlign = 'right';\n            }\n            text.setTextAlign(textAlign);\n          } else {\n            text.setTextAlign();\n          }\n          let textBaseline = 'middle';\n          if (textAnchor.indexOf('bottom') == 0) {\n            textBaseline = 'bottom';\n          } else if (textAnchor.indexOf('top') == 0) {\n            textBaseline = 'top';\n          }\n          text.setTextBaseline(textBaseline);\n          const textOffset = getValue(layer, 'layout', 'text-offset', zoom, f);\n          text.setOffsetX(textOffset[0] * textSize);\n          text.setOffsetY(textOffset[1] * textSize);\n          opacity = getValue(layer, 'paint', 'text-opacity', zoom, f);\n          textColor.setColor(colorWithOpacity(getValue(layer, 'paint', 'text-color', zoom, f), opacity));\n          text.setFill(textColor);\n          const haloColor = colorWithOpacity(getValue(layer, 'paint', 'text-halo-color', zoom, f), opacity);\n          if (haloColor) {\n            textHalo.setColor(haloColor);\n            textHalo.setWidth(getValue(layer, 'paint', 'text-halo-width', zoom, f));\n            text.setStroke(textHalo);\n          } else {\n            text.setStroke(undefined);\n          }\n          style.setZIndex(99999 - index);\n        }\n      }\n    }\n\n    if (stylesLength > -1) {\n      styles.length = stylesLength + 1;\n      return styles;\n    }\n  };\n\n  olLayer.setStyle(styleFunction);\n  olLayer.set('mapbox-source', mapboxSource);\n  olLayer.set('mapbox-layers', mapboxLayers);\n  return styleFunction;\n}\n","var fontWeights = {\n  thin: 100,\n  hairline: 100,\n  'ultra-light': 100,\n  'extra-light': 100,\n  light: 200,\n  book: 300,\n  regular: 400,\n  normal: 400,\n  plain: 400,\n  roman: 400,\n  standard: 400,\n  medium: 500,\n  'semi-bold': 600,\n  'demi-bold': 600,\n  bold: 700,\n  heavy: 800,\n  black: 800,\n  'extra-bold': 800,\n  'ultra-black': 900,\n  'extra-black': 900,\n  'ultra-bold': 900,\n  'heavy-black': 900,\n  fat: 900,\n  poster: 900\n};\nvar sp = ' ';\nvar italicRE = /(italic|oblique)$/i;\n\nvar fontCache = {};\n\nmodule.exports = function(fonts, size) {\n  var cssData = fontCache[fonts];\n  if (!cssData) {\n    if (!Array.isArray(fonts)) {\n      fonts = [fonts];\n    }\n    var weight = 'normal';\n    var style = 'normal';\n    var fontFamilies = []\n    var haveWeight, haveStyle;\n    for (var i = 0, ii = fonts.length; i < ii; ++i) {\n      var font = fonts[i];\n      var parts = font.split(' ');\n      var maybeWeight = parts[parts.length - 1].toLowerCase();\n      if (maybeWeight == 'normal' || maybeWeight == 'italic' || maybeWeight == 'oblique') {\n        style = haveStyle ? style : maybeWeight;\n        parts.pop();\n        maybeWeight = parts[parts.length - 1].toLowerCase();\n      } else if (italicRE.test(maybeWeight)) {\n        maybeWeight = maybeWeight.replace(italicRE, '');\n        style = haveStyle ? style : parts[parts.length - 1].replace(maybeWeight, '');\n      }\n      for (var w in fontWeights) {\n        if (maybeWeight == w || maybeWeight == w.replace('-', '') || maybeWeight == w.replace('-', sp)) {\n          weight = haveWeight ? weight : fontWeights[w];\n          parts.pop();\n          break;\n        }\n      }\n      if (!haveWeight && typeof maybeWeight == 'number') {\n        weight = maybeWeight;\n      }\n      var fontFamily = parts.join(sp)\n          .replace('Klokantech Noto Sans', 'Noto Sans');\n      if (fontFamily.indexOf(sp) !== -1) {\n        fontFamily = '\"' + fontFamily + '\"';\n      }\n      fontFamilies.push(fontFamily);\n    }\n    // CSS font property: font-style font-weight font-size font-family\n    cssData = fontCache[fonts] = [style, weight, fontFamilies];\n  }\n  return cssData[0] + sp + cssData[1] + sp + size + 'px' + sp + cssData[2];\n}\n","module.exports = ol.source.XYZ;","module.exports = ol.source.VectorTile;","module.exports = ol.source.Vector;","module.exports = ol.source.TileJSON;","module.exports = ol.layer.VectorTile;","module.exports = ol.layer.Vector;","module.exports = ol.layer.Tile;","module.exports = ol.Observable;","module.exports = ol.format.MVT;","module.exports = ol.format.GeoJSON;","module.exports = ol.Map;","module.exports = ol.tilegrid;","module.exports = ol.proj;","// Generated by CoffeeScript 1.10.0\n(function() {\n  var families;\n\n  module.exports = {\n    icon: 'icons/google.svg',\n    name: 'google',\n    title: 'Google Fonts',\n    link: 'google.com/fonts',\n    getNames: function() {\n      return families;\n    },\n    getLink: function(name) {\n      return \"https://fonts.google.com/specimen/\" + (name.replace(/( )/g, '+'));\n    },\n    normalizeName: function(name) {\n      return name;\n    }\n  };\n\n  families = [\"ABeeZee\", \"Abel\", \"Abril Fatface\", \"Aclonica\", \"Acme\", \"Actor\", \"Adamina\", \"Advent Pro\", \"Aguafina Script\", \"Akronim\", \"Aladin\", \"Aldrich\", \"Alef\", \"Alegreya\", \"Alegreya SC\", \"Alegreya Sans\", \"Alegreya Sans SC\", \"Alex Brush\", \"Alfa Slab One\", \"Alice\", \"Alike\", \"Alike Angular\", \"Allan\", \"Allerta\", \"Allerta Stencil\", \"Allura\", \"Almendra\", \"Almendra Display\", \"Almendra SC\", \"Amarante\", \"Amaranth\", \"Amatic SC\", \"Amethysta\", \"Amiri\", \"Amita\", \"Anaheim\", \"Andada\", \"Andika\", \"Angkor\", \"Annie Use Your Telescope\", \"Anonymous Pro\", \"Antic\", \"Antic Didone\", \"Antic Slab\", \"Anton\", \"Arapey\", \"Arbutus\", \"Arbutus Slab\", \"Architects Daughter\", \"Archivo Black\", \"Archivo Narrow\", \"Arimo\", \"Arizonia\", \"Armata\", \"Artifika\", \"Arvo\", \"Arya\", \"Asap\", \"Asar\", \"Asset\", \"Astloch\", \"Asul\", \"Atomic Age\", \"Aubrey\", \"Audiowide\", \"Autour One\", \"Average\", \"Average Sans\", \"Averia Gruesa Libre\", \"Averia Libre\", \"Averia Sans Libre\", \"Averia Serif Libre\", \"Bad Script\", \"Balthazar\", \"Bangers\", \"Basic\", \"Battambang\", \"Baumans\", \"Bayon\", \"Belgrano\", \"Belleza\", \"BenchNine\", \"Bentham\", \"Berkshire Swash\", \"Bevan\", \"Bigelow Rules\", \"Bigshot One\", \"Bilbo\", \"Bilbo Swash Caps\", \"Biryani\", \"Bitter\", \"Black Ops One\", \"Bokor\", \"Bonbon\", \"Boogaloo\", \"Bowlby One\", \"Bowlby One SC\", \"Brawler\", \"Bree Serif\", \"Bubblegum Sans\", \"Bubbler One\", \"Buda\", \"Buenard\", \"Butcherman\", \"Butterfly Kids\", \"Cabin\", \"Cabin Condensed\", \"Cabin Sketch\", \"Caesar Dressing\", \"Cagliostro\", \"Calligraffitti\", \"Cambay\", \"Cambo\", \"Candal\", \"Cantarell\", \"Cantata One\", \"Cantora One\", \"Capriola\", \"Cardo\", \"Carme\", \"Carrois Gothic\", \"Carrois Gothic SC\", \"Carter One\", \"Catamaran\", \"Caudex\", \"Caveat\", \"Caveat Brush\", \"Cedarville Cursive\", \"Ceviche One\", \"Changa One\", \"Chango\", \"Chau Philomene One\", \"Chela One\", \"Chelsea Market\", \"Chenla\", \"Cherry Cream Soda\", \"Cherry Swash\", \"Chewy\", \"Chicle\", \"Chivo\", \"Chonburi\", \"Cinzel\", \"Cinzel Decorative\", \"Clicker Script\", \"Coda\", \"Coda Caption\", \"Codystar\", \"Combo\", \"Comfortaa\", \"Coming Soon\", \"Concert One\", \"Condiment\", \"Content\", \"Contrail One\", \"Convergence\", \"Cookie\", \"Copse\", \"Corben\", \"Courgette\", \"Cousine\", \"Coustard\", \"Covered By Your Grace\", \"Crafty Girls\", \"Creepster\", \"Crete Round\", \"Crimson Text\", \"Croissant One\", \"Crushed\", \"Cuprum\", \"Cutive\", \"Cutive Mono\", \"Damion\", \"Dancing Script\", \"Dangrek\", \"Dawning of a New Day\", \"Days One\", \"Dekko\", \"Delius\", \"Delius Swash Caps\", \"Delius Unicase\", \"Della Respira\", \"Denk One\", \"Devonshire\", \"Dhurjati\", \"Didact Gothic\", \"Diplomata\", \"Diplomata SC\", \"Domine\", \"Donegal One\", \"Doppio One\", \"Dorsa\", \"Dosis\", \"Dr Sugiyama\", \"Droid Sans\", \"Droid Sans Mono\", \"Droid Serif\", \"Duru Sans\", \"Dynalight\", \"EB Garamond\", \"Eagle Lake\", \"Eater\", \"Economica\", \"Eczar\", \"Ek Mukta\", \"Electrolize\", \"Elsie\", \"Elsie Swash Caps\", \"Emblema One\", \"Emilys Candy\", \"Engagement\", \"Englebert\", \"Enriqueta\", \"Erica One\", \"Esteban\", \"Euphoria Script\", \"Ewert\", \"Exo\", \"Exo 2\", \"Expletus Sans\", \"Fanwood Text\", \"Fascinate\", \"Fascinate Inline\", \"Faster One\", \"Fasthand\", \"Fauna One\", \"Federant\", \"Federo\", \"Felipa\", \"Fenix\", \"Finger Paint\", \"Fira Mono\", \"Fira Sans\", \"Fjalla One\", \"Fjord One\", \"Flamenco\", \"Flavors\", \"Fondamento\", \"Fontdiner Swanky\", \"Forum\", \"Francois One\", \"Freckle Face\", \"Fredericka the Great\", \"Fredoka One\", \"Freehand\", \"Fresca\", \"Frijole\", \"Fruktur\", \"Fugaz One\", \"GFS Didot\", \"GFS Neohellenic\", \"Gabriela\", \"Gafata\", \"Galdeano\", \"Galindo\", \"Gentium Basic\", \"Gentium Book Basic\", \"Geo\", \"Geostar\", \"Geostar Fill\", \"Germania One\", \"Gidugu\", \"Gilda Display\", \"Give You Glory\", \"Glass Antiqua\", \"Glegoo\", \"Gloria Hallelujah\", \"Goblin One\", \"Gochi Hand\", \"Gorditas\", \"Goudy Bookletter 1911\", \"Graduate\", \"Grand Hotel\", \"Gravitas One\", \"Great Vibes\", \"Griffy\", \"Gruppo\", \"Gudea\", \"Gurajada\", \"Habibi\", \"Halant\", \"Hammersmith One\", \"Hanalei\", \"Hanalei Fill\", \"Handlee\", \"Hanuman\", \"Happy Monkey\", \"Headland One\", \"Henny Penny\", \"Herr Von Muellerhoff\", \"Hind\", \"Hind Siliguri\", \"Hind Vadodara\", \"Holtwood One SC\", \"Homemade Apple\", \"Homenaje\", \"IM Fell DW Pica\", \"IM Fell DW Pica SC\", \"IM Fell Double Pica\", \"IM Fell Double Pica SC\", \"IM Fell English\", \"IM Fell English SC\", \"IM Fell French Canon\", \"IM Fell French Canon SC\", \"IM Fell Great Primer\", \"IM Fell Great Primer SC\", \"Iceberg\", \"Iceland\", \"Imprima\", \"Inconsolata\", \"Inder\", \"Indie Flower\", \"Inika\", \"Inknut Antiqua\", \"Irish Grover\", \"Istok Web\", \"Italiana\", \"Italianno\", \"Itim\", \"Jacques Francois\", \"Jacques Francois Shadow\", \"Jaldi\", \"Jim Nightshade\", \"Jockey One\", \"Jolly Lodger\", \"Josefin Sans\", \"Josefin Slab\", \"Joti One\", \"Judson\", \"Julee\", \"Julius Sans One\", \"Junge\", \"Jura\", \"Just Another Hand\", \"Just Me Again Down Here\", \"Kadwa\", \"Kalam\", \"Kameron\", \"Kantumruy\", \"Karla\", \"Karma\", \"Kaushan Script\", \"Kavoon\", \"Kdam Thmor\", \"Keania One\", \"Kelly Slab\", \"Kenia\", \"Khand\", \"Khmer\", \"Khula\", \"Kite One\", \"Knewave\", \"Kotta One\", \"Koulen\", \"Kranky\", \"Kreon\", \"Kristi\", \"Krona One\", \"Kurale\", \"La Belle Aurore\", \"Laila\", \"Lakki Reddy\", \"Lancelot\", \"Lateef\", \"Lato\", \"League Script\", \"Leckerli One\", \"Ledger\", \"Lekton\", \"Lemon\", \"Libre Baskerville\", \"Life Savers\", \"Lilita One\", \"Lily Script One\", \"Limelight\", \"Linden Hill\", \"Lobster\", \"Lobster Two\", \"Londrina Outline\", \"Londrina Shadow\", \"Londrina Sketch\", \"Londrina Solid\", \"Lora\", \"Love Ya Like A Sister\", \"Loved by the King\", \"Lovers Quarrel\", \"Luckiest Guy\", \"Lusitana\", \"Lustria\", \"Macondo\", \"Macondo Swash Caps\", \"Magra\", \"Maiden Orange\", \"Mako\", \"Mallanna\", \"Mandali\", \"Marcellus\", \"Marcellus SC\", \"Marck Script\", \"Margarine\", \"Marko One\", \"Marmelad\", \"Martel\", \"Martel Sans\", \"Marvel\", \"Mate\", \"Mate SC\", \"Maven Pro\", \"McLaren\", \"Meddon\", \"MedievalSharp\", \"Medula One\", \"Megrim\", \"Meie Script\", \"Merienda\", \"Merienda One\", \"Merriweather\", \"Merriweather Sans\", \"Metal\", \"Metal Mania\", \"Metamorphous\", \"Metrophobic\", \"Michroma\", \"Milonga\", \"Miltonian\", \"Miltonian Tattoo\", \"Miniver\", \"Miss Fajardose\", \"Modak\", \"Modern Antiqua\", \"Molengo\", \"Molle\", \"Monda\", \"Monofett\", \"Monoton\", \"Monsieur La Doulaise\", \"Montaga\", \"Montez\", \"Montserrat\", \"Montserrat Alternates\", \"Montserrat Subrayada\", \"Moul\", \"Moulpali\", \"Mountains of Christmas\", \"Mouse Memoirs\", \"Mr Bedfort\", \"Mr Dafoe\", \"Mr De Haviland\", \"Mrs Saint Delafield\", \"Mrs Sheppards\", \"Muli\", \"Mystery Quest\", \"NTR\", \"Neucha\", \"Neuton\", \"New Rocker\", \"News Cycle\", \"Niconne\", \"Nixie One\", \"Nobile\", \"Nokora\", \"Norican\", \"Nosifer\", \"Nothing You Could Do\", \"Noticia Text\", \"Noto Sans\", \"Noto Serif\", \"Nova Cut\", \"Nova Flat\", \"Nova Mono\", \"Nova Oval\", \"Nova Round\", \"Nova Script\", \"Nova Slim\", \"Nova Square\", \"Numans\", \"Nunito\", \"Odor Mean Chey\", \"Offside\", \"Old Standard TT\", \"Oldenburg\", \"Oleo Script\", \"Oleo Script Swash Caps\", \"Open Sans\", \"Open Sans Condensed\", \"Oranienbaum\", \"Orbitron\", \"Oregano\", \"Orienta\", \"Original Surfer\", \"Oswald\", \"Over the Rainbow\", \"Overlock\", \"Overlock SC\", \"Ovo\", \"Oxygen\", \"Oxygen Mono\", \"PT Mono\", \"PT Sans\", \"PT Sans Caption\", \"PT Sans Narrow\", \"PT Serif\", \"PT Serif Caption\", \"Pacifico\", \"Palanquin\", \"Palanquin Dark\", \"Paprika\", \"Parisienne\", \"Passero One\", \"Passion One\", \"Pathway Gothic One\", \"Patrick Hand\", \"Patrick Hand SC\", \"Patua One\", \"Paytone One\", \"Peddana\", \"Peralta\", \"Permanent Marker\", \"Petit Formal Script\", \"Petrona\", \"Philosopher\", \"Piedra\", \"Pinyon Script\", \"Pirata One\", \"Plaster\", \"Play\", \"Playball\", \"Playfair Display\", \"Playfair Display SC\", \"Podkova\", \"Poiret One\", \"Poller One\", \"Poly\", \"Pompiere\", \"Pontano Sans\", \"Poppins\", \"Port Lligat Sans\", \"Port Lligat Slab\", \"Pragati Narrow\", \"Prata\", \"Preahvihear\", \"Press Start 2P\", \"Princess Sofia\", \"Prociono\", \"Prosto One\", \"Puritan\", \"Purple Purse\", \"Quando\", \"Quantico\", \"Quattrocento\", \"Quattrocento Sans\", \"Questrial\", \"Quicksand\", \"Quintessential\", \"Qwigley\", \"Racing Sans One\", \"Radley\", \"Rajdhani\", \"Raleway\", \"Raleway Dots\", \"Ramabhadra\", \"Ramaraja\", \"Rambla\", \"Rammetto One\", \"Ranchers\", \"Rancho\", \"Ranga\", \"Rationale\", \"Ravi Prakash\", \"Redressed\", \"Reenie Beanie\", \"Revalia\", \"Rhodium Libre\", \"Ribeye\", \"Ribeye Marrow\", \"Righteous\", \"Risque\", \"Roboto\", \"Roboto Condensed\", \"Roboto Mono\", \"Roboto Slab\", \"Rochester\", \"Rock Salt\", \"Rokkitt\", \"Romanesco\", \"Ropa Sans\", \"Rosario\", \"Rosarivo\", \"Rouge Script\", \"Rozha One\", \"Rubik\", \"Rubik Mono One\", \"Rubik One\", \"Ruda\", \"Rufina\", \"Ruge Boogie\", \"Ruluko\", \"Rum Raisin\", \"Ruslan Display\", \"Russo One\", \"Ruthie\", \"Rye\", \"Sacramento\", \"Sahitya\", \"Sail\", \"Salsa\", \"Sanchez\", \"Sancreek\", \"Sansita One\", \"Sarala\", \"Sarina\", \"Sarpanch\", \"Satisfy\", \"Scada\", \"Scheherazade\", \"Schoolbell\", \"Seaweed Script\", \"Sevillana\", \"Seymour One\", \"Shadows Into Light\", \"Shadows Into Light Two\", \"Shanti\", \"Share\", \"Share Tech\", \"Share Tech Mono\", \"Shojumaru\", \"Short Stack\", \"Siemreap\", \"Sigmar One\", \"Signika\", \"Signika Negative\", \"Simonetta\", \"Sintony\", \"Sirin Stencil\", \"Six Caps\", \"Skranji\", \"Slabo 13px\", \"Slabo 27px\", \"Slackey\", \"Smokum\", \"Smythe\", \"Sniglet\", \"Snippet\", \"Snowburst One\", \"Sofadi One\", \"Sofia\", \"Sonsie One\", \"Sorts Mill Goudy\", \"Source Code Pro\", \"Source Sans Pro\", \"Source Serif Pro\", \"Special Elite\", \"Spicy Rice\", \"Spinnaker\", \"Spirax\", \"Squada One\", \"Sree Krushnadevaraya\", \"Stalemate\", \"Stalinist One\", \"Stardos Stencil\", \"Stint Ultra Condensed\", \"Stint Ultra Expanded\", \"Stoke\", \"Strait\", \"Sue Ellen Francisco\", \"Sumana\", \"Sunshiney\", \"Supermercado One\", \"Sura\", \"Suranna\", \"Suravaram\", \"Suwannaphum\", \"Swanky and Moo Moo\", \"Syncopate\", \"Tangerine\", \"Taprom\", \"Tauri\", \"Teko\", \"Telex\", \"Tenali Ramakrishna\", \"Tenor Sans\", \"Text Me One\", \"The Girl Next Door\", \"Tienne\", \"Tillana\", \"Timmana\", \"Tinos\", \"Titan One\", \"Titillium Web\", \"Trade Winds\", \"Trocchi\", \"Trochut\", \"Trykker\", \"Tulpen One\", \"Ubuntu\", \"Ubuntu Condensed\", \"Ubuntu Mono\", \"Ultra\", \"Uncial Antiqua\", \"Underdog\", \"Unica One\", \"UnifrakturCook\", \"UnifrakturMaguntia\", \"Unkempt\", \"Unlock\", \"Unna\", \"VT323\", \"Vampiro One\", \"Varela\", \"Varela Round\", \"Vast Shadow\", \"Vesper Libre\", \"Vibur\", \"Vidaloka\", \"Viga\", \"Voces\", \"Volkhov\", \"Vollkorn\", \"Voltaire\", \"Waiting for the Sunrise\", \"Wallpoet\", \"Walter Turncoat\", \"Warnes\", \"Wellfleet\", \"Wendy One\", \"Wire One\", \"Work Sans\", \"Yanone Kaffeesatz\", \"Yantramanav\", \"Yellowtail\", \"Yeseva One\", \"Yesteryear\", \"Zeyada\"];\n\n}).call(this);\n","export function deg2rad(degrees) {\n  return degrees * Math.PI / 180;\n}\n\nexport function getZoomForResolution(resolution, resolutions) {\n  let i = 0;\n  const ii = resolutions.length;\n  for (; i < ii; ++i) {\n    const candidate = resolutions[i];\n    if (candidate < resolution && i + 1 < ii) {\n      const zoomFactor = resolutions[i] / resolutions[i + 1];\n      return i + Math.log(resolutions[i] / resolution) / Math.log(zoomFactor);\n    }\n  }\n  return ii - 1;\n}\n","// @flow\n\nimport { createExpression } from '../expression';\n\nimport type {GlobalProperties} from '../expression';\nexport type FeatureFilter = (globalProperties: GlobalProperties, feature: VectorTileFeature) => boolean;\n\nexport default createFilter;\nexport { isExpressionFilter };\n\nfunction isExpressionFilter(filter: any) {\n    if (!Array.isArray(filter) || filter.length === 0) {\n        return false;\n    }\n    switch (filter[0]) {\n    case 'has':\n        return filter.length >= 2 && filter[1] !== '$id' && filter[1] !== '$type';\n\n    case 'in':\n    case '!in':\n    case '!has':\n    case 'none':\n        return false;\n\n    case '==':\n    case '!=':\n    case '>':\n    case '>=':\n    case '<':\n    case '<=':\n        return filter.length === 3 && (Array.isArray(filter[1]) || Array.isArray(filter[2]));\n\n    case 'any':\n    case 'all':\n        for (const f of filter.slice(1)) {\n            if (!isExpressionFilter(f) && typeof f !== 'boolean') {\n                return false;\n            }\n        }\n        return true;\n\n    default:\n        return true;\n    }\n}\n\nconst filterSpec = {\n    'type': 'boolean',\n    'default': false,\n    'function': true,\n    'property-function': true,\n    'zoom-function': true\n};\n\n/**\n * Given a filter expressed as nested arrays, return a new function\n * that evaluates whether a given feature (with a .properties or .tags property)\n * passes its test.\n *\n * @private\n * @param {Array} filter mapbox gl filter\n * @returns {Function} filter-evaluating function\n */\nfunction createFilter(filter: any): FeatureFilter {\n    if (!filter) {\n        return () => true;\n    }\n\n    if (!isExpressionFilter(filter)) {\n        filter = convertFilter(filter);\n    }\n\n    const compiled = createExpression(filter, filterSpec);\n    if (compiled.result === 'error') {\n        throw new Error(compiled.value.map(err => `${err.key}: ${err.message}`).join(', '));\n    } else {\n        return (globalProperties: GlobalProperties, feature: VectorTileFeature) => compiled.value.evaluate(globalProperties, feature);\n    }\n}\n\n// Comparison function to sort numbers and strings\nfunction compare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nfunction convertFilter(filter: ?Array<any>): mixed {\n    if (!filter) return true;\n    const op = filter[0];\n    if (filter.length <= 1) return (op !== 'any');\n    const converted =\n        op === '==' ? convertComparisonOp(filter[1], filter[2], '==') :\n        op === '!=' ? convertNegation(convertComparisonOp(filter[1], filter[2], '==')) :\n        op === '<' ||\n        op === '>' ||\n        op === '<=' ||\n        op === '>=' ? convertComparisonOp(filter[1], filter[2], op) :\n        op === 'any' ? convertDisjunctionOp(filter.slice(1)) :\n        op === 'all' ? ['all'].concat(filter.slice(1).map(convertFilter)) :\n        op === 'none' ? ['all'].concat(filter.slice(1).map(convertFilter).map(convertNegation)) :\n        op === 'in' ? convertInOp(filter[1], filter.slice(2)) :\n        op === '!in' ? convertNegation(convertInOp(filter[1], filter.slice(2))) :\n        op === 'has' ? convertHasOp(filter[1]) :\n        op === '!has' ? convertNegation(convertHasOp(filter[1])) :\n        true;\n    return converted;\n}\n\nfunction convertComparisonOp(property: string, value: any, op: string) {\n    switch (property) {\n    case '$type':\n        return [`filter-type-${op}`, value];\n    case '$id':\n        return [`filter-id-${op}`, value];\n    default:\n        return [`filter-${op}`, property, value];\n    }\n}\n\nfunction convertDisjunctionOp(filters: Array<Array<any>>) {\n    return ['any'].concat(filters.map(convertFilter));\n}\n\nfunction convertInOp(property: string, values: Array<any>) {\n    if (values.length === 0) { return false; }\n    switch (property) {\n    case '$type':\n        return [`filter-type-in`, ['literal', values]];\n    case '$id':\n        return [`filter-id-in`, ['literal', values]];\n    default:\n        if (values.length > 200 && !values.some(v => typeof v !== typeof values[0])) {\n            return ['filter-in-large', property, ['literal', values.sort(compare)]];\n        } else {\n            return ['filter-in-small', property, ['literal', values]];\n        }\n    }\n}\n\nfunction convertHasOp(property: string) {\n    switch (property) {\n    case '$type':\n        return true;\n    case '$id':\n        return [`filter-has-id`];\n    default:\n        return [`filter-has`, property];\n    }\n}\n\nfunction convertNegation(filter: mixed) {\n    return ['!', filter];\n}\n\n","// @flow\n\nimport assert from 'assert';\n\nimport extend from '../util/extend';\n\nimport type {StylePropertySpecification} from '../style-spec';\n\nexport default convertFunction;\n\nfunction convertFunction(parameters: PropertyValueSpecification<any>, propertySpec: StylePropertySpecification) {\n    let expression;\n\n    parameters = extend({}, parameters);\n    let defaultExpression;\n    if (typeof parameters.default !== 'undefined') {\n        defaultExpression = convertValue(parameters.default, propertySpec);\n    } else {\n        defaultExpression = convertValue(propertySpec.default, propertySpec);\n        if (defaultExpression === null) {\n            defaultExpression = ['error', 'No default property value available.'];\n        }\n    }\n\n    if (parameters.stops) {\n        const zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n        const featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n        const zoomDependent = zoomAndFeatureDependent || !featureDependent;\n\n        const stops = parameters.stops.map((stop) => {\n            if (!featureDependent && propertySpec.tokens && typeof stop[1] === 'string') {\n                return [stop[0], convertTokenString(stop[1])];\n\n            }\n            return [stop[0], convertValue(stop[1], propertySpec)];\n        });\n\n        if (parameters.colorSpace && parameters.colorSpace !== 'rgb') {\n            throw new Error('Unimplemented');\n        }\n\n        if (zoomAndFeatureDependent) {\n            expression = convertZoomAndPropertyFunction(parameters, propertySpec, stops, defaultExpression);\n        } else if (zoomDependent) {\n            expression = convertZoomFunction(parameters, propertySpec, stops);\n        } else {\n            expression = convertPropertyFunction(parameters, propertySpec, stops, defaultExpression);\n        }\n    } else {\n        // identity function\n        expression = convertIdentityFunction(parameters, propertySpec, defaultExpression);\n    }\n\n    return expression;\n}\n\nfunction convertIdentityFunction(parameters, propertySpec, defaultExpression) {\n    const get = ['get', parameters.property];\n\n    if (propertySpec.type === 'color') {\n        return parameters.default === undefined ? get : ['to-color', get, parameters.default];\n    } else if (propertySpec.type === 'array' && typeof propertySpec.length === 'number') {\n        return ['array', propertySpec.value, propertySpec.length, get];\n    } else if (propertySpec.type === 'array') {\n        return ['array', propertySpec.value, get];\n    } else if (propertySpec.type === 'enum') {\n        return [\n            'let',\n            'property_value', ['string', get],\n            [\n                'match',\n                ['var', 'property_value'],\n                Object.keys(propertySpec.values), ['var', 'property_value'],\n                defaultExpression\n            ]\n        ];\n    } else {\n        return parameters.default === undefined ? get : [propertySpec.type, get, parameters.default];\n    }\n}\n\nfunction convertValue(value, spec) {\n    if (typeof value === 'undefined' || value === null) return null;\n    if (spec.type === 'color') {\n        return value;\n    } else if (spec.type === 'array') {\n        return ['literal', value];\n    } else {\n        return value;\n    }\n}\n\nfunction convertZoomAndPropertyFunction(parameters, propertySpec, stops, defaultExpression) {\n    const featureFunctionParameters = {};\n    const featureFunctionStops = {};\n    const zoomStops = [];\n    for (let s = 0; s < stops.length; s++) {\n        const stop = stops[s];\n        const zoom = stop[0].zoom;\n        if (featureFunctionParameters[zoom] === undefined) {\n            featureFunctionParameters[zoom] = {\n                zoom: zoom,\n                type: parameters.type,\n                property: parameters.property,\n                default: parameters.default,\n            };\n            featureFunctionStops[zoom] = [];\n            zoomStops.push(zoom);\n        }\n        featureFunctionStops[zoom].push([stop[0].value, stop[1]]);\n    }\n\n    // the interpolation type for the zoom dimension of a zoom-and-property\n    // function is determined directly from the style property specification\n    // for which it's being used: linear for interpolatable properties, step\n    // otherwise.\n    const functionType = getFunctionType({}, propertySpec);\n    if (functionType === 'exponential') {\n        const expression = ['interpolate', ['linear'], ['zoom']];\n\n        for (const z of zoomStops) {\n            const output = convertPropertyFunction(featureFunctionParameters[z], propertySpec, featureFunctionStops[z], defaultExpression);\n            appendStopPair(expression, z, output, false);\n        }\n\n        return expression;\n    } else {\n        const expression = ['step', ['zoom']];\n\n        for (const z of zoomStops) {\n            const output = convertPropertyFunction(featureFunctionParameters[z], propertySpec, featureFunctionStops[z], defaultExpression);\n            appendStopPair(expression, z, output, true);\n        }\n\n        fixupDegenerateStepCurve(expression);\n\n        return expression;\n    }\n}\n\nfunction convertPropertyFunction(parameters, propertySpec, stops, defaultExpression) {\n    const type = getFunctionType(parameters, propertySpec);\n\n    const inputType = typeof stops[0][0];\n    assert(\n        inputType === 'string' ||\n        inputType === 'number' ||\n        inputType === 'boolean'\n    );\n\n    let input = [inputType, ['get', parameters.property]];\n\n    let expression;\n    let isStep = false;\n    if (type === 'categorical' && inputType === 'boolean') {\n        assert(parameters.stops.length > 0 && parameters.stops.length <= 2);\n        if (parameters.stops[0][0] === false) {\n            input = ['!', input];\n        }\n        expression = [ 'case', input, parameters.stops[0][1] ];\n        if (parameters.stops.length > 1) {\n            expression.push(parameters.stops[1][1]);\n        } else {\n            expression.push(defaultExpression);\n        }\n        return expression;\n    } else if (type === 'categorical') {\n        expression = ['match', input];\n    } else if (type === 'interval') {\n        expression = ['step', input];\n        isStep = true;\n    } else if (type === 'exponential') {\n        const base = parameters.base !== undefined ? parameters.base : 1;\n        expression = ['interpolate', ['exponential', base], input];\n    } else {\n        throw new Error(`Unknown property function type ${type}`);\n    }\n\n    for (const stop of stops) {\n        appendStopPair(expression, stop[0], stop[1], isStep);\n    }\n\n    if (expression[0] === 'match') {\n        expression.push(defaultExpression);\n    }\n\n    fixupDegenerateStepCurve(expression);\n\n    return expression;\n}\n\nfunction convertZoomFunction(parameters, propertySpec, stops, input = ['zoom']) {\n    const type = getFunctionType(parameters, propertySpec);\n    let expression;\n    let isStep = false;\n    if (type === 'interval') {\n        expression = ['step', input];\n        isStep = true;\n    } else if (type === 'exponential') {\n        const base = parameters.base !== undefined ? parameters.base : 1;\n        expression = ['interpolate', ['exponential', base], input];\n    } else {\n        throw new Error(`Unknown zoom function type \"${type}\"`);\n    }\n\n    for (const stop of stops) {\n        appendStopPair(expression, stop[0], stop[1], isStep);\n    }\n\n    fixupDegenerateStepCurve(expression);\n\n    return expression;\n}\n\nfunction fixupDegenerateStepCurve(expression) {\n    // degenerate step curve (i.e. a constant function): add a noop stop\n    if (expression[0] === 'step' && expression.length === 3) {\n        expression.push(0);\n        expression.push(expression[3]);\n    }\n}\n\nfunction appendStopPair(curve, input, output, isStep) {\n    // Skip duplicate stop values. They were not validated for functions, but they are for expressions.\n    // https://github.com/mapbox/mapbox-gl-js/issues/4107\n    if (curve.length > 3 && input === curve[curve.length - 2]) {\n        return;\n    }\n    // step curves don't get the first input value, as it is redundant.\n    if (!(isStep && curve.length === 2)) {\n        curve.push(input);\n    }\n    curve.push(output);\n}\n\nfunction getFunctionType(parameters, propertySpec) {\n    if (parameters.type) {\n        return parameters.type;\n    } else if (propertySpec.function) {\n        return propertySpec.function === 'interpolated' ? 'exponential' : 'interval';\n    } else {\n        return 'exponential';\n    }\n}\n\n// \"String with {name} token\" => [\"concat\", \"String with \", [\"get\", \"name\"], \" token\"]\nfunction convertTokenString(s) {\n    const result = ['concat'];\n    const re = /{([^{}]+)}/g;\n    let pos = 0;\n    let match;\n    while ((match = re.exec(s)) !== null) {\n        const literal = s.slice(pos, re.lastIndex - match[0].length);\n        pos = re.lastIndex;\n        if (literal.length > 0) result.push(literal);\n        result.push(['to-string', ['get', match[1]]]);\n    }\n\n    if (result.length === 1) {\n        return s;\n    }\n\n    if (pos < s.length) {\n        result.push(s.slice(pos));\n    } else if (result.length === 2) {\n        return result[1];\n    }\n\n    return result;\n}\n\n","// @flow\n\n/**\n * A type used for returning and propagating errors. The first element of the union\n * represents success and contains a value, and the second represents an error and\n * contains an error value.\n * @private\n */\nexport type Result<T, E> =\n    | {| result: 'success', value: T |}\n    | {| result: 'error', value: E |};\n\nexport function success<T, E>(value: T): Result<T, E> {\n    return { result: 'success', value };\n}\n\nexport function error<T, E>(value: E): Result<T, E> {\n    return { result: 'error', value };\n}\n","// @flow\n\nimport { NumberType, toString } from '../types';\n\nimport { typeOf } from '../values';\nimport RuntimeError from '../runtime_error';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\nclass Length implements Expression {\n    type: Type;\n    input: Expression;\n\n    constructor(input: Expression) {\n        this.type = NumberType;\n        this.input = input;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 2)\n            return context.error(`Expected 1 argument, but found ${args.length - 1} instead.`);\n\n        const input = context.parse(args[1], 1);\n        if (!input) return null;\n\n        if (input.type.kind !== 'array' && input.type.kind !== 'string' && input.type.kind !== 'value')\n            return context.error(`Expected argument of type string or array, but found ${toString(input.type)} instead.`);\n\n        return new Length(input);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const input = this.input.evaluate(ctx);\n        if (typeof input === 'string') {\n            return input.length;\n        } else if (Array.isArray(input)) {\n            return input.length;\n        } else {\n            throw new RuntimeError(`Expected value to be of type string or array, but found ${toString(typeOf(input))} instead.`);\n        }\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n    }\n\n    possibleOutputs() {\n        return [undefined];\n    }\n\n    serialize() {\n        const serialized = [\"length\"];\n        this.eachChild(child => { serialized.push(child.serialize()); });\n        return serialized;\n    }\n}\n\nexport default Length;\n","// @flow\n\nimport { toString, ValueType, BooleanType, CollatorType } from '../types';\n\nimport type { Expression } from '../expression';\nimport type EvaluationContext from '../evaluation_context';\nimport type ParsingContext from '../parsing_context';\nimport type { Type } from '../types';\n\nfunction isComparableType(type: Type) {\n    return type.kind === 'string' ||\n        type.kind === 'number' ||\n        type.kind === 'boolean' ||\n        type.kind === 'null';\n}\n\n/**\n * Special form for ==, !=, implementing the following signatures:\n * - (T1: Comparable, T2: Comparable) => boolean { T1 == T2 }\n * - (Comparable, value) => boolean\n * - (value, Comparable) => boolean\n *\n * Where Comparable = string | number | boolean | null.\n *\n * Evaluation semantics for the value cases are equivalent to Javascript's\n * strict equality (===/!==) -- i.e., when the value argument's type doesn't\n * match that of the Comparable argument, == evaluates to false, != to true.\n *\n * @private\n */\nfunction makeComparison(op: string, negate: boolean) {\n    return class Comparison implements Expression {\n        type: Type;\n        lhs: Expression;\n        rhs: Expression;\n        collator: Expression | null;\n\n        constructor(lhs: Expression, rhs: Expression, collator: Expression | null) {\n            this.type = BooleanType;\n            this.lhs = lhs;\n            this.rhs = rhs;\n            this.collator = collator;\n        }\n\n        static parse(args: Array<mixed>, context: ParsingContext): ?Expression {\n            if (args.length !== 3 && args.length !== 4)\n                return context.error(`Expected two or three arguments.`);\n\n            const lhs = context.parse(args[1], 1, ValueType);\n            if (!lhs) return null;\n            const rhs = context.parse(args[2], 2, ValueType);\n            if (!rhs) return null;\n\n            if (!isComparableType(lhs.type) && !isComparableType(rhs.type)) {\n                return context.error(`Expected at least one argument to be a string, number, boolean, or null, but found (${toString(lhs.type)}, ${toString(rhs.type)}) instead.`);\n            }\n\n            if (lhs.type.kind !== rhs.type.kind && lhs.type.kind !== 'value' && rhs.type.kind !== 'value') {\n                return context.error(`Cannot compare ${toString(lhs.type)} and ${toString(rhs.type)}.`);\n            }\n\n            let collator = null;\n            if (args.length === 4) {\n                if (lhs.type.kind !== 'string' && rhs.type.kind !== 'string') {\n                    return context.error(`Cannot use collator to compare non-string types.`);\n                }\n                collator = context.parse(args[3], 3, CollatorType);\n                if (!collator) return null;\n            }\n\n            return new Comparison(lhs, rhs, collator);\n        }\n\n        evaluate(ctx: EvaluationContext) {\n            const equal = this.collator ?\n                this.collator.evaluate(ctx).compare(this.lhs.evaluate(ctx), this.rhs.evaluate(ctx)) === 0 :\n                this.lhs.evaluate(ctx) === this.rhs.evaluate(ctx);\n\n            return negate ? !equal : equal;\n        }\n\n        eachChild(fn: (Expression) => void) {\n            fn(this.lhs);\n            fn(this.rhs);\n            if (this.collator) {\n                fn(this.collator);\n            }\n        }\n\n        possibleOutputs() {\n            return [true, false];\n        }\n\n        serialize() {\n            const serialized = [op];\n            this.eachChild(child => { serialized.push(child.serialize()); });\n            return serialized;\n        }\n    };\n}\n\nexport const Equals = makeComparison('==', false);\nexport const NotEquals = makeComparison('!=', true);\n","// @flow\n\nimport assert from 'assert';\n\nimport { BooleanType } from '../types';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\ntype Branches = Array<[Expression, Expression]>;\n\nclass Case implements Expression {\n    type: Type;\n\n    branches: Branches;\n    otherwise: Expression;\n\n    constructor(type: Type, branches: Branches, otherwise: Expression) {\n        this.type = type;\n        this.branches = branches;\n        this.otherwise = otherwise;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 4)\n            return context.error(`Expected at least 3 arguments, but found only ${args.length - 1}.`);\n        if (args.length % 2 !== 0)\n            return context.error(`Expected an odd number of arguments.`);\n\n        let outputType: ?Type;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n\n        const branches = [];\n        for (let i = 1; i < args.length - 1; i += 2) {\n            const test = context.parse(args[i], i, BooleanType);\n            if (!test) return null;\n\n            const result = context.parse(args[i + 1], i + 1, outputType);\n            if (!result) return null;\n\n            branches.push([test, result]);\n\n            outputType = outputType || result.type;\n        }\n\n        const otherwise = context.parse(args[args.length - 1], args.length - 1, outputType);\n        if (!otherwise) return null;\n\n        assert(outputType);\n        return new Case((outputType: any), branches, otherwise);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        for (const [test, expression] of this.branches) {\n            if (test.evaluate(ctx)) {\n                return expression.evaluate(ctx);\n            }\n        }\n        return this.otherwise.evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        for (const [test, expression] of this.branches) {\n            fn(test);\n            fn(expression);\n        }\n        fn(this.otherwise);\n    }\n\n    possibleOutputs() {\n        return []\n            .concat(...this.branches.map(([_, out]) => out.possibleOutputs()))\n            .concat(this.otherwise.possibleOutputs());\n    }\n\n    serialize() {\n        const serialized = [\"case\"];\n        this.eachChild(child => { serialized.push(child.serialize()); });\n        return serialized;\n    }\n}\n\nexport default Case;\n","// @flow\n\nimport assert from 'assert';\n\nimport { typeOf } from '../values';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type } from '../types';\n\n// Map input label values to output expression index\ntype Cases = {[number | string]: number};\n\nclass Match implements Expression {\n    type: Type;\n    inputType: Type;\n\n    input: Expression;\n    cases: Cases;\n    outputs: Array<Expression>;\n    otherwise: Expression;\n\n    constructor(inputType: Type, outputType: Type, input: Expression, cases: Cases, outputs: Array<Expression>, otherwise: Expression) {\n        this.inputType = inputType;\n        this.type = outputType;\n        this.input = input;\n        this.cases = cases;\n        this.outputs = outputs;\n        this.otherwise = otherwise;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length < 5)\n            return context.error(`Expected at least 4 arguments, but found only ${args.length - 1}.`);\n        if (args.length % 2 !== 1)\n            return context.error(`Expected an even number of arguments.`);\n\n        let inputType;\n        let outputType;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n        const cases = {};\n        const outputs = [];\n        for (let i = 2; i < args.length - 1; i += 2) {\n            let labels = args[i];\n            const value = args[i + 1];\n\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n\n            const labelContext = context.concat(i);\n            if (labels.length === 0) {\n                return labelContext.error('Expected at least one branch label.');\n            }\n\n            for (const label of labels) {\n                if (typeof label !== 'number' && typeof label !== 'string') {\n                    return labelContext.error(`Branch labels must be numbers or strings.`);\n                } else if (typeof label === 'number' && Math.abs(label) > Number.MAX_SAFE_INTEGER) {\n                    return labelContext.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);\n\n                } else if (typeof label === 'number' && Math.floor(label) !== label) {\n                    return labelContext.error(`Numeric branch labels must be integer values.`);\n\n                } else if (!inputType) {\n                    inputType = typeOf(label);\n                } else if (labelContext.checkSubtype(inputType, typeOf(label))) {\n                    return null;\n                }\n\n                if (typeof cases[String(label)] !== 'undefined') {\n                    return labelContext.error('Branch labels must be unique.');\n                }\n\n                cases[String(label)] = outputs.length;\n            }\n\n            const result = context.parse(value, i, outputType);\n            if (!result) return null;\n            outputType = outputType || result.type;\n            outputs.push(result);\n        }\n\n        const input = context.parse(args[1], 1, inputType);\n        if (!input) return null;\n\n        const otherwise = context.parse(args[args.length - 1], args.length - 1, outputType);\n        if (!otherwise) return null;\n\n        assert(inputType && outputType);\n        return new Match((inputType: any), (outputType: any), input, cases, outputs, otherwise);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const input = (this.input.evaluate(ctx): any);\n        return (this.outputs[this.cases[input]] || this.otherwise).evaluate(ctx);\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.input);\n        this.outputs.forEach(fn);\n        fn(this.otherwise);\n    }\n\n    possibleOutputs() {\n        return []\n            .concat(...this.outputs.map((out) => out.possibleOutputs()))\n            .concat(this.otherwise.possibleOutputs());\n    }\n\n    serialize() {\n        const serialized = [\"match\", this.input.serialize()];\n\n        // Sort so serialization has an arbitrary defined order, even though\n        // branch order doesn't affect evaluation\n        const sortedLabels = Object.keys(this.cases).sort();\n\n        // Group branches by unique match expression to support condensed\n        // serializations of the form [case1, case2, ...] -> matchExpression\n        const groupedByOutput: Array<[number, Array<number | string>]> = [];\n        const outputLookup: {[index: number]: number} = {}; // lookup index into groupedByOutput for a given output expression\n        for (const label of sortedLabels) {\n            const outputIndex = outputLookup[this.cases[label]];\n            if (outputIndex === undefined) {\n                // First time seeing this output, add it to the end of the grouped list\n                outputLookup[this.cases[label]] = groupedByOutput.length;\n                groupedByOutput.push([this.cases[label], [label]]);\n            } else {\n                // We've seen this expression before, add the label to that output's group\n                groupedByOutput[outputIndex][1].push(label);\n            }\n        }\n\n        const coerceLabel = (label) => this.input.type.kind === 'number' ? Number(label) : label;\n\n        for (const [outputIndex, labels] of groupedByOutput) {\n            if (labels.length === 1) {\n                // Only a single label matches this output expression\n                serialized.push(coerceLabel(labels[0]));\n            } else {\n                // Array of literal labels pointing to this output expression\n                serialized.push(labels.map(coerceLabel));\n            }\n            serialized.push(this.outputs[outputIndex].serialize());\n        }\n        serialized.push(this.otherwise.serialize());\n        return serialized;\n    }\n}\n\nexport default Match;\n","// @flow\n\nimport { array, ValueType, NumberType } from '../types';\n\nimport RuntimeError from '../runtime_error';\n\nimport type { Expression } from '../expression';\nimport type ParsingContext from '../parsing_context';\nimport type EvaluationContext from '../evaluation_context';\nimport type { Type, ArrayType } from '../types';\nimport type { Value } from '../values';\n\nclass At implements Expression {\n    type: Type;\n    index: Expression;\n    input: Expression;\n\n    constructor(type: Type, index: Expression, input: Expression) {\n        this.type = type;\n        this.index = index;\n        this.input = input;\n    }\n\n    static parse(args: Array<mixed>, context: ParsingContext) {\n        if (args.length !== 3)\n            return context.error(`Expected 2 arguments, but found ${args.length - 1} instead.`);\n\n        const index = context.parse(args[1], 1, NumberType);\n        const input = context.parse(args[2], 2, array(context.expectedType || ValueType));\n\n        if (!index || !input) return null;\n\n        const t: ArrayType = (input.type: any);\n        return new At(t.itemType, index, input);\n    }\n\n    evaluate(ctx: EvaluationContext) {\n        const index = ((this.index.evaluate(ctx): any): number);\n        const array = ((this.input.evaluate(ctx): any): Array<Value>);\n\n        if (index < 0) {\n            throw new RuntimeError(`Array index out of bounds: ${index} < 0.`);\n        }\n\n        if (index >= array.length) {\n            throw new RuntimeError(`Array index out of bounds: ${index} > ${array.length - 1}.`);\n        }\n\n        if (index !== Math.floor(index)) {\n            throw new RuntimeError(`Array index must be an integer, but found ${index} instead.`);\n        }\n\n        return array[index];\n    }\n\n    eachChild(fn: (Expression) => void) {\n        fn(this.index);\n        fn(this.input);\n    }\n\n    possibleOutputs() {\n        return [undefined];\n    }\n\n    serialize() {\n        return [\"at\", this.index.serialize(), this.input.serialize()];\n    }\n}\n\nexport default At;\n","// @flow\n\nimport { NumberType, StringType, BooleanType, ColorType, ObjectType, ValueType, ErrorType, CollatorType, array, toString } from '../types';\n\nimport { typeOf, Color, validateRGBA } from '../values';\nimport CompoundExpression from '../compound_expression';\nimport RuntimeError from '../runtime_error';\nimport Let from './let';\nimport Var from './var';\nimport Literal from './literal';\nimport Assertion from './assertion';\nimport ArrayAssertion from './array';\nimport Coercion from './coercion';\nimport At from './at';\nimport Match from './match';\nimport Case from './case';\nimport Step from './step';\nimport Interpolate from './interpolate';\nimport Coalesce from './coalesce';\nimport { Equals, NotEquals } from './equals';\nimport { CollatorExpression } from './collator';\nimport Length from './length';\n\nimport type { Type } from '../types';\nimport type { Varargs } from '../compound_expression';\nimport type { ExpressionRegistry } from '../expression';\n\nconst expressions: ExpressionRegistry = {\n    // special forms\n    '==': Equals,\n    '!=': NotEquals,\n    'array': ArrayAssertion,\n    'at': At,\n    'boolean': Assertion,\n    'case': Case,\n    'coalesce': Coalesce,\n    'collator': CollatorExpression,\n    'interpolate': Interpolate,\n    'length': Length,\n    'let': Let,\n    'literal': Literal,\n    'match': Match,\n    'number': Assertion,\n    'object': Assertion,\n    'step': Step,\n    'string': Assertion,\n    'to-color': Coercion,\n    'to-number': Coercion,\n    'var': Var\n};\n\nfunction rgba(ctx, [r, g, b, a]) {\n    r = r.evaluate(ctx);\n    g = g.evaluate(ctx);\n    b = b.evaluate(ctx);\n    const alpha = a ? a.evaluate(ctx) : 1;\n    const error = validateRGBA(r, g, b, alpha);\n    if (error) throw new RuntimeError(error);\n    return new Color(r / 255 * alpha, g / 255 * alpha, b / 255 * alpha, alpha);\n}\n\nfunction has(key, obj) {\n    return key in obj;\n}\n\nfunction get(key, obj) {\n    const v = obj[key];\n    return typeof v === 'undefined' ? null : v;\n}\n\nfunction lt(ctx, [a, b]) { return a.evaluate(ctx) < b.evaluate(ctx); }\nfunction gt(ctx, [a, b]) { return a.evaluate(ctx) > b.evaluate(ctx); }\nfunction lteq(ctx, [a, b]) { return a.evaluate(ctx) <= b.evaluate(ctx); }\nfunction gteq(ctx, [a, b]) { return a.evaluate(ctx) >= b.evaluate(ctx); }\n\nfunction ltCollate(ctx, [a, b, c]) { return c.evaluate(ctx).compare(a.evaluate(ctx), b.evaluate(ctx)) < 0; }\nfunction gtCollate(ctx, [a, b, c]) { return c.evaluate(ctx).compare(a.evaluate(ctx), b.evaluate(ctx)) > 0; }\nfunction lteqCollate(ctx, [a, b, c]) { return c.evaluate(ctx).compare(a.evaluate(ctx), b.evaluate(ctx)) <= 0; }\nfunction gteqCollate(ctx, [a, b, c]) { return c.evaluate(ctx).compare(a.evaluate(ctx), b.evaluate(ctx)) >= 0; }\n\nfunction binarySearch(v, a, i, j) {\n    while (i <= j) {\n        const m = (i + j) >> 1;\n        if (a[m] === v)\n            return true;\n        if (a[m] > v)\n            j = m - 1;\n        else\n            i = m + 1;\n    }\n    return false;\n}\n\nfunction varargs(type: Type): Varargs {\n    return { type };\n}\n\nCompoundExpression.register(expressions, {\n    'error': [\n        ErrorType,\n        [StringType],\n        (ctx, [v]) => { throw new RuntimeError(v.evaluate(ctx)); }\n    ],\n    'typeof': [\n        StringType,\n        [ValueType],\n        (ctx, [v]) => toString(typeOf(v.evaluate(ctx)))\n    ],\n    'to-string': [\n        StringType,\n        [ValueType],\n        (ctx, [v]) => {\n            v = v.evaluate(ctx);\n            const type = typeof v;\n            if (v === null) {\n                return '';\n            } else if (type === 'string' || type === 'number' || type === 'boolean') {\n                return String(v);\n            } else if (v instanceof Color) {\n                return v.toString();\n            } else {\n                return JSON.stringify(v);\n            }\n        }\n    ],\n    'to-boolean': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => Boolean(v.evaluate(ctx))\n    ],\n    'to-rgba': [\n        array(NumberType, 4),\n        [ColorType],\n        (ctx, [v]) => {\n            return v.evaluate(ctx).toArray();\n        }\n    ],\n    'rgb': [\n        ColorType,\n        [NumberType, NumberType, NumberType],\n        rgba\n    ],\n    'rgba': [\n        ColorType,\n        [NumberType, NumberType, NumberType, NumberType],\n        rgba\n    ],\n    'has': {\n        type: BooleanType,\n        overloads: [\n            [\n                [StringType],\n                (ctx, [key]) => has(key.evaluate(ctx), ctx.properties())\n            ], [\n                [StringType, ObjectType],\n                (ctx, [key, obj]) => has(key.evaluate(ctx), obj.evaluate(ctx))\n            ]\n        ]\n    },\n    'get': {\n        type: ValueType,\n        overloads: [\n            [\n                [StringType],\n                (ctx, [key]) => get(key.evaluate(ctx), ctx.properties())\n            ], [\n                [StringType, ObjectType],\n                (ctx, [key, obj]) => get(key.evaluate(ctx), obj.evaluate(ctx))\n            ]\n        ]\n    },\n    'properties': [\n        ObjectType,\n        [],\n        (ctx) => ctx.properties()\n    ],\n    'geometry-type': [\n        StringType,\n        [],\n        (ctx) => ctx.geometryType()\n    ],\n    'id': [\n        ValueType,\n        [],\n        (ctx) => ctx.id()\n    ],\n    'zoom': [\n        NumberType,\n        [],\n        (ctx) => ctx.globals.zoom\n    ],\n    'heatmap-density': [\n        NumberType,\n        [],\n        (ctx) => ctx.globals.heatmapDensity || 0\n    ],\n    'line-progress': [\n        NumberType,\n        [],\n        (ctx) => ctx.globals.lineProgress || 0\n    ],\n    '+': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => {\n            let result = 0;\n            for (const arg of args) {\n                result += arg.evaluate(ctx);\n            }\n            return result;\n        }\n    ],\n    '*': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => {\n            let result = 1;\n            for (const arg of args) {\n                result *= arg.evaluate(ctx);\n            }\n            return result;\n        }\n    ],\n    '-': {\n        type: NumberType,\n        overloads: [\n            [\n                [NumberType, NumberType],\n                (ctx, [a, b]) => a.evaluate(ctx) - b.evaluate(ctx)\n            ], [\n                [NumberType],\n                (ctx, [a]) => -a.evaluate(ctx)\n            ]\n        ]\n    },\n    '/': [\n        NumberType,\n        [NumberType, NumberType],\n        (ctx, [a, b]) => a.evaluate(ctx) / b.evaluate(ctx)\n    ],\n    '%': [\n        NumberType,\n        [NumberType, NumberType],\n        (ctx, [a, b]) => a.evaluate(ctx) % b.evaluate(ctx)\n    ],\n    'ln2': [\n        NumberType,\n        [],\n        () => Math.LN2\n    ],\n    'pi': [\n        NumberType,\n        [],\n        () => Math.PI\n    ],\n    'e': [\n        NumberType,\n        [],\n        () => Math.E\n    ],\n    '^': [\n        NumberType,\n        [NumberType, NumberType],\n        (ctx, [b, e]) => Math.pow(b.evaluate(ctx), e.evaluate(ctx))\n    ],\n    'sqrt': [\n        NumberType,\n        [NumberType],\n        (ctx, [x]) => Math.sqrt(x.evaluate(ctx))\n    ],\n    'log10': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log10(n.evaluate(ctx))\n    ],\n    'ln': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log(n.evaluate(ctx))\n    ],\n    'log2': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log2(n.evaluate(ctx))\n    ],\n    'sin': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.sin(n.evaluate(ctx))\n    ],\n    'cos': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.cos(n.evaluate(ctx))\n    ],\n    'tan': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.tan(n.evaluate(ctx))\n    ],\n    'asin': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.asin(n.evaluate(ctx))\n    ],\n    'acos': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.acos(n.evaluate(ctx))\n    ],\n    'atan': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.atan(n.evaluate(ctx))\n    ],\n    'min': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => Math.min(...args.map(arg => arg.evaluate(ctx)))\n    ],\n    'max': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => Math.max(...args.map(arg => arg.evaluate(ctx)))\n    ],\n    'abs': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.abs(n.evaluate(ctx))\n    ],\n    'round': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => {\n            const v = n.evaluate(ctx);\n            // Javascript's Math.round() rounds towards +Infinity for halfway\n            // values, even when they're negative. It's more common to round\n            // away from 0 (e.g., this is what python and C++ do)\n            return v < 0 ? -Math.round(-v) : Math.round(v);\n        }\n    ],\n    'floor': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.floor(n.evaluate(ctx))\n    ],\n    'ceil': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.ceil(n.evaluate(ctx))\n    ],\n    'filter-==': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => ctx.properties()[(k: any).value] === (v: any).value\n    ],\n    'filter-id-==': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => ctx.id() === (v: any).value\n    ],\n    'filter-type-==': [\n        BooleanType,\n        [StringType],\n        (ctx, [v]) => ctx.geometryType() === (v: any).value\n    ],\n    'filter-<': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a < b;\n        }\n    ],\n    'filter-id-<': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a < b;\n        }\n    ],\n    'filter->': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a > b;\n        }\n    ],\n    'filter-id->': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a > b;\n        }\n    ],\n    'filter-<=': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a <= b;\n        }\n    ],\n    'filter-id-<=': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a <= b;\n        }\n    ],\n    'filter->=': [\n        BooleanType,\n        [StringType, ValueType],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[(k: any).value];\n            const b = (v: any).value;\n            return typeof a === typeof b && a >= b;\n        }\n    ],\n    'filter-id->=': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = (v: any).value;\n            return typeof a === typeof b && a >= b;\n        }\n    ],\n    'filter-has': [\n        BooleanType,\n        [ValueType],\n        (ctx, [k]) => (k: any).value in ctx.properties()\n    ],\n    'filter-has-id': [\n        BooleanType,\n        [],\n        (ctx) => ctx.id() !== null\n    ],\n    'filter-type-in': [\n        BooleanType,\n        [array(StringType)],\n        (ctx, [v]) => (v: any).value.indexOf(ctx.geometryType()) >= 0\n    ],\n    'filter-id-in': [\n        BooleanType,\n        [array(ValueType)],\n        (ctx, [v]) => (v: any).value.indexOf(ctx.id()) >= 0\n    ],\n    'filter-in-small': [\n        BooleanType,\n        [StringType, array(ValueType)],\n        // assumes v is an array literal\n        (ctx, [k, v]) => (v: any).value.indexOf(ctx.properties()[(k: any).value]) >= 0\n    ],\n    'filter-in-large': [\n        BooleanType,\n        [StringType, array(ValueType)],\n        // assumes v is a array literal with values sorted in ascending order and of a single type\n        (ctx, [k, v]) => binarySearch(ctx.properties()[(k: any).value], (v: any).value, 0, (v: any).value.length - 1)\n    ],\n    '>': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], gt],\n            [[StringType, StringType], gt],\n            [[StringType, StringType, CollatorType], gtCollate]\n        ]\n    },\n    '<': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], lt],\n            [[StringType, StringType], lt],\n            [[StringType, StringType, CollatorType], ltCollate]\n        ]\n    },\n    '>=': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], gteq],\n            [[StringType, StringType], gteq],\n            [[StringType, StringType, CollatorType], gteqCollate]\n        ]\n    },\n    '<=': {\n        type: BooleanType,\n        overloads: [\n            [[NumberType, NumberType], lteq],\n            [[StringType, StringType], lteq],\n            [[StringType, StringType, CollatorType], lteqCollate]\n        ]\n    },\n    'all': {\n        type: BooleanType,\n        overloads: [\n            [\n                [BooleanType, BooleanType],\n                (ctx, [a, b]) => a.evaluate(ctx) && b.evaluate(ctx)\n            ],\n            [\n                varargs(BooleanType),\n                (ctx, args) => {\n                    for (const arg of args) {\n                        if (!arg.evaluate(ctx))\n                            return false;\n                    }\n                    return true;\n                }\n            ]\n        ]\n    },\n    'any': {\n        type: BooleanType,\n        overloads: [\n            [\n                [BooleanType, BooleanType],\n                (ctx, [a, b]) => a.evaluate(ctx) || b.evaluate(ctx)\n            ],\n            [\n                varargs(BooleanType),\n                (ctx, args) => {\n                    for (const arg of args) {\n                        if (arg.evaluate(ctx))\n                            return true;\n                    }\n                    return false;\n                }\n            ]\n        ]\n    },\n    '!': [\n        BooleanType,\n        [BooleanType],\n        (ctx, [b]) => !b.evaluate(ctx)\n    ],\n    'is-supported-script': [\n        BooleanType,\n        [StringType],\n        // At parse time this will always return true, so we need to exclude this expression with isGlobalPropertyConstant\n        (ctx, [s]) => {\n            const isSupportedScript = ctx.globals && ctx.globals.isSupportedScript;\n            if (isSupportedScript) {\n                return isSupportedScript(s.evaluate(ctx));\n            }\n            return true;\n        }\n    ],\n    'upcase': [\n        StringType,\n        [StringType],\n        (ctx, [s]) => s.evaluate(ctx).toUpperCase()\n    ],\n    'downcase': [\n        StringType,\n        [StringType],\n        (ctx, [s]) => s.evaluate(ctx).toLowerCase()\n    ],\n    'concat': [\n        StringType,\n        varargs(StringType),\n        (ctx, args) => args.map(arg => arg.evaluate(ctx)).join('')\n    ],\n    'resolved-locale': [\n        StringType,\n        [CollatorType],\n        (ctx, [collator]) => collator.evaluate(ctx).resolvedLocale()\n    ]\n});\n\nexport default expressions;\n","// @flow\n\nimport type {Expression} from './expression';\n\n/**\n * Tracks `let` bindings during expression parsing.\n * @private\n */\nclass Scope {\n    parent: ?Scope;\n    bindings: {[string]: Expression};\n    constructor(parent?: Scope, bindings: Array<[string, Expression]> = []) {\n        this.parent = parent;\n        this.bindings = {};\n        for (const [name, expression] of bindings) {\n            this.bindings[name] = expression;\n        }\n    }\n\n    concat(bindings: Array<[string, Expression]>) {\n        return new Scope(this, bindings);\n    }\n\n    get(name: string): Expression {\n        if (this.bindings[name]) { return this.bindings[name]; }\n        if (this.parent) { return this.parent.get(name); }\n        throw new Error(`${name} not found in scope.`);\n    }\n\n    has(name: string): boolean {\n        if (this.bindings[name]) return true;\n        return this.parent ? this.parent.has(name) : false;\n    }\n}\n\nexport default Scope;\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * Ported from Webkit\n * http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/UnitBezier.h\n */\n\nmodule.exports = UnitBezier;\n\nfunction UnitBezier(p1x, p1y, p2x, p2y) {\n    // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n    this.cx = 3.0 * p1x;\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\n    this.ax = 1.0 - this.cx - this.bx;\n\n    this.cy = 3.0 * p1y;\n    this.by = 3.0 * (p2y - p1y) - this.cy;\n    this.ay = 1.0 - this.cy - this.by;\n\n    this.p1x = p1x;\n    this.p1y = p2y;\n    this.p2x = p2x;\n    this.p2y = p2y;\n}\n\nUnitBezier.prototype.sampleCurveX = function(t) {\n    // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\n};\n\nUnitBezier.prototype.sampleCurveY = function(t) {\n    return ((this.ay * t + this.by) * t + this.cy) * t;\n};\n\nUnitBezier.prototype.sampleCurveDerivativeX = function(t) {\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\n};\n\nUnitBezier.prototype.solveCurveX = function(x, epsilon) {\n    if (typeof epsilon === 'undefined') epsilon = 1e-6;\n\n    var t0, t1, t2, x2, i;\n\n    // First try a few iterations of Newton's method -- normally very fast.\n    for (t2 = x, i = 0; i < 8; i++) {\n\n        x2 = this.sampleCurveX(t2) - x;\n        if (Math.abs(x2) < epsilon) return t2;\n\n        var d2 = this.sampleCurveDerivativeX(t2);\n        if (Math.abs(d2) < 1e-6) break;\n\n        t2 = t2 - x2 / d2;\n    }\n\n    // Fall back to the bisection method for reliability.\n    t0 = 0.0;\n    t1 = 1.0;\n    t2 = x;\n\n    if (t2 < t0) return t0;\n    if (t2 > t1) return t1;\n\n    while (t0 < t1) {\n\n        x2 = this.sampleCurveX(t2);\n        if (Math.abs(x2 - x) < epsilon) return t2;\n\n        if (x > x2) {\n            t0 = t2;\n        } else {\n            t1 = t2;\n        }\n\n        t2 = (t1 - t0) * 0.5 + t0;\n    }\n\n    // Failure.\n    return t2;\n};\n\nUnitBezier.prototype.solve = function(x, epsilon) {\n    return this.sampleCurveY(this.solveCurveX(x, epsilon));\n};\n","\nexport default function getType(val) {\n    if (val instanceof Number) {\n        return 'number';\n    } else if (val instanceof String) {\n        return 'string';\n    } else if (val instanceof Boolean) {\n        return 'boolean';\n    } else if (Array.isArray(val)) {\n        return 'array';\n    } else if (val === null) {\n        return 'null';\n    } else {\n        return typeof val;\n    }\n}\n","// (c) Dean McNamee <dean@gmail.com>, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n  \"transparent\": [0,0,0,0], \"aliceblue\": [240,248,255,1],\n  \"antiquewhite\": [250,235,215,1], \"aqua\": [0,255,255,1],\n  \"aquamarine\": [127,255,212,1], \"azure\": [240,255,255,1],\n  \"beige\": [245,245,220,1], \"bisque\": [255,228,196,1],\n  \"black\": [0,0,0,1], \"blanchedalmond\": [255,235,205,1],\n  \"blue\": [0,0,255,1], \"blueviolet\": [138,43,226,1],\n  \"brown\": [165,42,42,1], \"burlywood\": [222,184,135,1],\n  \"cadetblue\": [95,158,160,1], \"chartreuse\": [127,255,0,1],\n  \"chocolate\": [210,105,30,1], \"coral\": [255,127,80,1],\n  \"cornflowerblue\": [100,149,237,1], \"cornsilk\": [255,248,220,1],\n  \"crimson\": [220,20,60,1], \"cyan\": [0,255,255,1],\n  \"darkblue\": [0,0,139,1], \"darkcyan\": [0,139,139,1],\n  \"darkgoldenrod\": [184,134,11,1], \"darkgray\": [169,169,169,1],\n  \"darkgreen\": [0,100,0,1], \"darkgrey\": [169,169,169,1],\n  \"darkkhaki\": [189,183,107,1], \"darkmagenta\": [139,0,139,1],\n  \"darkolivegreen\": [85,107,47,1], \"darkorange\": [255,140,0,1],\n  \"darkorchid\": [153,50,204,1], \"darkred\": [139,0,0,1],\n  \"darksalmon\": [233,150,122,1], \"darkseagreen\": [143,188,143,1],\n  \"darkslateblue\": [72,61,139,1], \"darkslategray\": [47,79,79,1],\n  \"darkslategrey\": [47,79,79,1], \"darkturquoise\": [0,206,209,1],\n  \"darkviolet\": [148,0,211,1], \"deeppink\": [255,20,147,1],\n  \"deepskyblue\": [0,191,255,1], \"dimgray\": [105,105,105,1],\n  \"dimgrey\": [105,105,105,1], \"dodgerblue\": [30,144,255,1],\n  \"firebrick\": [178,34,34,1], \"floralwhite\": [255,250,240,1],\n  \"forestgreen\": [34,139,34,1], \"fuchsia\": [255,0,255,1],\n  \"gainsboro\": [220,220,220,1], \"ghostwhite\": [248,248,255,1],\n  \"gold\": [255,215,0,1], \"goldenrod\": [218,165,32,1],\n  \"gray\": [128,128,128,1], \"green\": [0,128,0,1],\n  \"greenyellow\": [173,255,47,1], \"grey\": [128,128,128,1],\n  \"honeydew\": [240,255,240,1], \"hotpink\": [255,105,180,1],\n  \"indianred\": [205,92,92,1], \"indigo\": [75,0,130,1],\n  \"ivory\": [255,255,240,1], \"khaki\": [240,230,140,1],\n  \"lavender\": [230,230,250,1], \"lavenderblush\": [255,240,245,1],\n  \"lawngreen\": [124,252,0,1], \"lemonchiffon\": [255,250,205,1],\n  \"lightblue\": [173,216,230,1], \"lightcoral\": [240,128,128,1],\n  \"lightcyan\": [224,255,255,1], \"lightgoldenrodyellow\": [250,250,210,1],\n  \"lightgray\": [211,211,211,1], \"lightgreen\": [144,238,144,1],\n  \"lightgrey\": [211,211,211,1], \"lightpink\": [255,182,193,1],\n  \"lightsalmon\": [255,160,122,1], \"lightseagreen\": [32,178,170,1],\n  \"lightskyblue\": [135,206,250,1], \"lightslategray\": [119,136,153,1],\n  \"lightslategrey\": [119,136,153,1], \"lightsteelblue\": [176,196,222,1],\n  \"lightyellow\": [255,255,224,1], \"lime\": [0,255,0,1],\n  \"limegreen\": [50,205,50,1], \"linen\": [250,240,230,1],\n  \"magenta\": [255,0,255,1], \"maroon\": [128,0,0,1],\n  \"mediumaquamarine\": [102,205,170,1], \"mediumblue\": [0,0,205,1],\n  \"mediumorchid\": [186,85,211,1], \"mediumpurple\": [147,112,219,1],\n  \"mediumseagreen\": [60,179,113,1], \"mediumslateblue\": [123,104,238,1],\n  \"mediumspringgreen\": [0,250,154,1], \"mediumturquoise\": [72,209,204,1],\n  \"mediumvioletred\": [199,21,133,1], \"midnightblue\": [25,25,112,1],\n  \"mintcream\": [245,255,250,1], \"mistyrose\": [255,228,225,1],\n  \"moccasin\": [255,228,181,1], \"navajowhite\": [255,222,173,1],\n  \"navy\": [0,0,128,1], \"oldlace\": [253,245,230,1],\n  \"olive\": [128,128,0,1], \"olivedrab\": [107,142,35,1],\n  \"orange\": [255,165,0,1], \"orangered\": [255,69,0,1],\n  \"orchid\": [218,112,214,1], \"palegoldenrod\": [238,232,170,1],\n  \"palegreen\": [152,251,152,1], \"paleturquoise\": [175,238,238,1],\n  \"palevioletred\": [219,112,147,1], \"papayawhip\": [255,239,213,1],\n  \"peachpuff\": [255,218,185,1], \"peru\": [205,133,63,1],\n  \"pink\": [255,192,203,1], \"plum\": [221,160,221,1],\n  \"powderblue\": [176,224,230,1], \"purple\": [128,0,128,1],\n  \"rebeccapurple\": [102,51,153,1],\n  \"red\": [255,0,0,1], \"rosybrown\": [188,143,143,1],\n  \"royalblue\": [65,105,225,1], \"saddlebrown\": [139,69,19,1],\n  \"salmon\": [250,128,114,1], \"sandybrown\": [244,164,96,1],\n  \"seagreen\": [46,139,87,1], \"seashell\": [255,245,238,1],\n  \"sienna\": [160,82,45,1], \"silver\": [192,192,192,1],\n  \"skyblue\": [135,206,235,1], \"slateblue\": [106,90,205,1],\n  \"slategray\": [112,128,144,1], \"slategrey\": [112,128,144,1],\n  \"snow\": [255,250,250,1], \"springgreen\": [0,255,127,1],\n  \"steelblue\": [70,130,180,1], \"tan\": [210,180,140,1],\n  \"teal\": [0,128,128,1], \"thistle\": [216,191,216,1],\n  \"tomato\": [255,99,71,1], \"turquoise\": [64,224,208,1],\n  \"violet\": [238,130,238,1], \"wheat\": [245,222,179,1],\n  \"white\": [255,255,255,1], \"whitesmoke\": [245,245,245,1],\n  \"yellow\": [255,255,0,1], \"yellowgreen\": [154,205,50,1]}\n\nfunction clamp_css_byte(i) {  // Clamp to integer 0 .. 255.\n  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parse_css_int(str) {  // int or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_byte(parseFloat(str) / 100 * 255);\n  return clamp_css_byte(parseInt(str));\n}\n\nfunction parse_css_float(str) {  // float or percentage.\n  if (str[str.length - 1] === '%')\n    return clamp_css_float(parseFloat(str) / 100);\n  return clamp_css_float(parseFloat(str));\n}\n\nfunction css_hue_to_rgb(m1, m2, h) {\n  if (h < 0) h += 1;\n  else if (h > 1) h -= 1;\n\n  if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n  if (h * 2 < 1) return m2;\n  if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n  return m1;\n}\n\nfunction parseCSSColor(css_str) {\n  // Remove all whitespace, not compliant, but should just be more accepting.\n  var str = css_str.replace(/ /g, '').toLowerCase();\n\n  // Color keywords (and transparent) lookup.\n  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.\n\n  // #abc and #abc123 syntax.\n  if (str[0] === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xfff)) return null;  // Covers NaN.\n      return [((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n              (iv & 0xf0) | ((iv & 0xf0) >> 4),\n              (iv & 0xf) | ((iv & 0xf) << 4),\n              1];\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n      if (!(iv >= 0 && iv <= 0xffffff)) return null;  // Covers NaN.\n      return [(iv & 0xff0000) >> 16,\n              (iv & 0xff00) >> 8,\n              iv & 0xff,\n              1];\n    }\n\n    return null;\n  }\n\n  var op = str.indexOf('('), ep = str.indexOf(')');\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op+1, ep-(op+1)).split(',');\n    var alpha = 1;  // To allow case fallthrough.\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'rgb':\n        if (params.length !== 3) return null;\n        return [parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha];\n      case 'hsla':\n        if (params.length !== 4) return null;\n        alpha = parse_css_float(params.pop());\n        // Fall through.\n      case 'hsl':\n        if (params.length !== 3) return null;\n        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n        // NOTE(deanm): According to the CSS spec s/l should only be\n        // percentages, but we don't bother and let float or percentage.\n        var s = parse_css_float(params[1]);\n        var l = parse_css_float(params[2]);\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        var m1 = l * 2 - m2;\n        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),\n                alpha];\n      default:\n        return null;\n    }\n  }\n\n  return null;\n}\n\ntry { exports.parseCSSColor = parseCSSColor } catch(e) { }\n","// @flow\n\nimport Color from './color';\n\nimport {number as interpolateNumber} from './interpolate';\n\ntype LABColor = {\n    l: number,\n    a: number,\n    b: number,\n    alpha: number\n};\n\ntype HCLColor = {\n    h: number,\n    c: number,\n    l: number,\n    alpha: number\n};\n\n// Constants\nconst Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1,\n    deg2rad = Math.PI / 180,\n    rad2deg = 180 / Math.PI;\n\n// Utilities\nfunction xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n    x /= 255;\n    return x <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\n// LAB\nfunction rgbToLab(rgbColor: Color): LABColor {\n    const b = rgb2xyz(rgbColor.r),\n        a = rgb2xyz(rgbColor.g),\n        l = rgb2xyz(rgbColor.b),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n\n    return {\n        l: 116 * y - 16,\n        a: 500 * (x - y),\n        b: 200 * (y - z),\n        alpha: rgbColor.a\n    };\n}\n\nfunction labToRgb(labColor: LABColor): Color {\n    let y = (labColor.l + 16) / 116,\n        x = isNaN(labColor.a) ? y : y + labColor.a / 500,\n        z = isNaN(labColor.b) ? y : y - labColor.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Color(\n        xyz2rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        labColor.alpha\n    );\n}\n\nfunction interpolateLab(from: LABColor, to: LABColor, t: number) {\n    return {\n        l: interpolateNumber(from.l, to.l, t),\n        a: interpolateNumber(from.a, to.a, t),\n        b: interpolateNumber(from.b, to.b, t),\n        alpha: interpolateNumber(from.alpha, to.alpha, t)\n    };\n}\n\n// HCL\nfunction rgbToHcl(rgbColor: Color): HCLColor {\n    const {l, a, b} = rgbToLab(rgbColor);\n    const h = Math.atan2(b, a) * rad2deg;\n    return {\n        h: h < 0 ? h + 360 : h,\n        c: Math.sqrt(a * a + b * b),\n        l: l,\n        alpha: rgbColor.a\n    };\n}\n\nfunction hclToRgb(hclColor: HCLColor): Color {\n    const h = hclColor.h * deg2rad,\n        c = hclColor.c,\n        l = hclColor.l;\n    return labToRgb({\n        l: l,\n        a: Math.cos(h) * c,\n        b: Math.sin(h) * c,\n        alpha: hclColor.alpha\n    });\n}\n\nfunction interpolateHue(a: number, b: number, t: number) {\n    const d = b - a;\n    return a + t * (d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d);\n}\n\nfunction interpolateHcl(from: HCLColor, to: HCLColor, t: number) {\n    return {\n        h: interpolateHue(from.h, to.h, t),\n        c: interpolateNumber(from.c, to.c, t),\n        l: interpolateNumber(from.l, to.l, t),\n        alpha: interpolateNumber(from.alpha, to.alpha, t)\n    };\n}\n\nexport const lab = {\n    forward: rgbToLab,\n    reverse: labToRgb,\n    interpolate: interpolateLab\n};\n\nexport const hcl = {\n    forward: rgbToHcl,\n    reverse: hclToRgb,\n    interpolate: interpolateHcl\n};\n","\nimport spec from './v8.json';\nexport default spec;\n","\nexport default ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n","\nimport refProperties from './util/ref_properties';\n\nfunction deref(layer, parent) {\n    const result = {};\n\n    for (const k in layer) {\n        if (k !== 'ref') {\n            result[k] = layer[k];\n        }\n    }\n\n    refProperties.forEach((k) => {\n        if (k in parent) {\n            result[k] = parent[k];\n        }\n    });\n\n    return result;\n}\n\nexport default derefLayers;\n\n/**\n * Given an array of layers, some of which may contain `ref` properties\n * whose value is the `id` of another property, return a new array where\n * such layers have been augmented with the 'type', 'source', etc. properties\n * from the parent layer, and the `ref` property has been removed.\n *\n * The input is not modified. The output may contain references to portions\n * of the input.\n *\n * @private\n * @param {Array<Layer>} layers\n * @returns {Array<Layer>}\n */\nfunction derefLayers(layers) {\n    layers = layers.slice();\n\n    const map = Object.create(null);\n    for (let i = 0; i < layers.length; i++) {\n        map[layers[i].id] = layers[i];\n    }\n\n    for (let i = 0; i < layers.length; i++) {\n        if ('ref' in layers[i]) {\n            layers[i] = deref(layers[i], map[layers[i].ref]);\n        }\n    }\n\n    return layers;\n}\n","module.exports = ol.geom.Point;","module.exports = ol.style.Circle;","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh  = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it\n    cosh = Math.cosh;\n  } else {\n    //  else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = Math.exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array.<Array.<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array.<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION, inherits} from './index.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error}\n * @constructor\n * @extends {Error}\n * @param {number} code Error code.\n */\nconst AssertionError = function(code) {\n\n  const path = VERSION ? VERSION.split('-')[0] : 'latest';\n\n  /**\n   * @type {string}\n   */\n  this.message = 'Assertion failed. See https://openlayers.org/en/' + path +\n      '/doc/errors/#' + code + ' for details.';\n\n  /**\n   * Error code. The meaning of the code can be found on\n   * {@link https://openlayers.org/en/latest/doc/errors/} (replace `latest` with\n   * the version found in the OpenLayers script's header comment if a version\n   * other than the latest is used).\n   * @type {number}\n   * @api\n   */\n  this.code = code;\n\n  this.name = 'AssertionError';\n\n};\n\ninherits(AssertionError, Error);\n\nexport default AssertionError;\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array.<number>} Color\n * @api\n */\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {module:ol/color~Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {module:ol/color~Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object.<string, module:ol/color~Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {module:ol/color~Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {module:ol/color~Color|string} color Color.\n * @return {module:ol/color~Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(/** @type {string} */ (color));\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {module:ol/color~Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return (\n    /** @type {module:ol/color~Color} */ (color)\n  );\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {module:ol/color~Color} color Color.\n * @return {module:ol/color~Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {module:ol/color~Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/webgl\n */\n\n/**\n * Constants taken from goog.webgl\n */\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ONE = 1;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const SRC_ALPHA = 0x0302;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COLOR_ATTACHMENT0 = 0x8CE0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COLOR_BUFFER_BIT = 0x00004000;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TRIANGLES = 0x0004;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TRIANGLE_STRIP = 0x0005;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ONE_MINUS_SRC_ALPHA = 0x0303;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ARRAY_BUFFER = 0x8892;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ELEMENT_ARRAY_BUFFER = 0x8893;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STREAM_DRAW = 0x88E0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STATIC_DRAW = 0x88E4;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DYNAMIC_DRAW = 0x88E8;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const CULL_FACE = 0x0B44;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const BLEND = 0x0BE2;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STENCIL_TEST = 0x0B90;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEPTH_TEST = 0x0B71;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const SCISSOR_TEST = 0x0C11;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_BYTE = 0x1401;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_SHORT = 0x1403;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_INT = 0x1405;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FLOAT = 0x1406;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const RGBA = 0x1908;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FRAGMENT_SHADER = 0x8B30;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const VERTEX_SHADER = 0x8B31;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const LINK_STATUS = 0x8B82;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const LINEAR = 0x2601;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_MAG_FILTER = 0x2800;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_MIN_FILTER = 0x2801;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_WRAP_S = 0x2802;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_WRAP_T = 0x2803;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_2D = 0x0DE1;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE0 = 0x84C0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const CLAMP_TO_EDGE = 0x812F;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COMPILE_STATUS = 0x8B81;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FRAMEBUFFER = 0x8D40;\n\n\n/** end of goog.webgl constants\n */\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst CONTEXT_IDS = [\n  'experimental-webgl',\n  'webgl',\n  'webkit-3d',\n  'moz-webgl'\n];\n\n\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n  const ii = CONTEXT_IDS.length;\n  for (let i = 0; i < ii; ++i) {\n    try {\n      const context = canvas.getContext(CONTEXT_IDS[i], opt_attributes);\n      if (context) {\n        return /** @type {!WebGLRenderingContext} */ (context);\n      }\n    } catch (e) {\n      // pass\n    }\n  }\n  return null;\n}\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../index.js';\nimport {asString} from '../color.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/color~Color|module:ol/colorlike~ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n\n/**\n * @classdesc\n * Set fill style for vector features.\n *\n * @constructor\n * @param {module:ol/style/Fill~Options=} opt_options Options.\n * @api\n */\nconst Fill = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {module:ol/color~Color|module:ol/colorlike~ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n * @return {module:ol/style/Fill} The cloned style.\n * @api\n */\nFill.prototype.clone = function() {\n  const color = this.getColor();\n  return new Fill({\n    color: (color && color.slice) ? color.slice() : color || undefined\n  });\n};\n\n\n/**\n * Get the fill color.\n * @return {module:ol/color~Color|module:ol/colorlike~ColorLike} Color.\n * @api\n */\nFill.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n * @api\n */\nFill.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nFill.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    if (\n      this.color_ instanceof CanvasPattern ||\n        this.color_ instanceof CanvasGradient\n    ) {\n      this.checksum_ = getUid(this.color_).toString();\n    } else {\n      this.checksum_ = 'f' + (this.color_ ? asString(this.color_) : '-');\n    }\n  }\n\n  return this.checksum_;\n};\nexport default Fill;\n","/**\n * @module ol/style/Text\n */\nimport Fill from '../style/Fill.js';\nimport TextPlacement from '../style/TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font}. Default is '10px sans-serif'\n * @property {number} [maxAngle] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45 (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {module:ol/style/TextPlacement|string} [placement] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {module:ol/style/Fill} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/Fill} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {module:ol/style/Stroke} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array.<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n *\n * @constructor\n * @param {module:ol/style/Text~Options=} opt_options Options.\n * @api\n */\nconst Text = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.font_ = options.font;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.text_ = options.text;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textAlign_ = options.textAlign;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textBaseline_ = options.textBaseline;\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill :\n    new Fill({color: DEFAULT_FILL_COLOR});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n  /**\n   * @private\n   * @type {module:ol/style/TextPlacement|string}\n   */\n  this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overflow_ = !!options.overflow;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.padding_ = options.padding === undefined ? null : options.padding;\n};\n\n\n/**\n * Clones the style.\n * @return {module:ol/style/Text} The cloned style.\n * @api\n */\nText.prototype.clone = function() {\n  return new Text({\n    font: this.getFont(),\n    placement: this.getPlacement(),\n    maxAngle: this.getMaxAngle(),\n    overflow: this.getOverflow(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    scale: this.getScale(),\n    text: this.getText(),\n    textAlign: this.getTextAlign(),\n    textBaseline: this.getTextBaseline(),\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    offsetX: this.getOffsetX(),\n    offsetY: this.getOffsetY(),\n    backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n    backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n  });\n};\n\n\n/**\n * Get the `overflow` configuration.\n * @return {boolean} Let text overflow the length of the path they follow.\n * @api\n */\nText.prototype.getOverflow = function() {\n  return this.overflow_;\n};\n\n\n/**\n * Get the font name.\n * @return {string|undefined} Font.\n * @api\n */\nText.prototype.getFont = function() {\n  return this.font_;\n};\n\n\n/**\n * Get the maximum angle between adjacent characters.\n * @return {number} Angle in radians.\n * @api\n */\nText.prototype.getMaxAngle = function() {\n  return this.maxAngle_;\n};\n\n\n/**\n * Get the label placement.\n * @return {module:ol/style/TextPlacement|string} Text placement.\n * @api\n */\nText.prototype.getPlacement = function() {\n  return this.placement_;\n};\n\n\n/**\n * Get the x-offset for the text.\n * @return {number} Horizontal text offset.\n * @api\n */\nText.prototype.getOffsetX = function() {\n  return this.offsetX_;\n};\n\n\n/**\n * Get the y-offset for the text.\n * @return {number} Vertical text offset.\n * @api\n */\nText.prototype.getOffsetY = function() {\n  return this.offsetY_;\n};\n\n\n/**\n * Get the fill style for the text.\n * @return {module:ol/style/Fill} Fill style.\n * @api\n */\nText.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Determine whether the text rotates with the map.\n * @return {boolean|undefined} Rotate with map.\n * @api\n */\nText.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the text rotation.\n * @return {number|undefined} Rotation.\n * @api\n */\nText.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the text scale.\n * @return {number|undefined} Scale.\n * @api\n */\nText.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Get the stroke style for the text.\n * @return {module:ol/style/Stroke} Stroke style.\n * @api\n */\nText.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Get the text to be rendered.\n * @return {string|undefined} Text.\n * @api\n */\nText.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Get the text alignment.\n * @return {string|undefined} Text align.\n * @api\n */\nText.prototype.getTextAlign = function() {\n  return this.textAlign_;\n};\n\n\n/**\n * Get the text baseline.\n * @return {string|undefined} Text baseline.\n * @api\n */\nText.prototype.getTextBaseline = function() {\n  return this.textBaseline_;\n};\n\n\n/**\n * Get the background fill style for the text.\n * @return {module:ol/style/Fill} Fill style.\n * @api\n */\nText.prototype.getBackgroundFill = function() {\n  return this.backgroundFill_;\n};\n\n\n/**\n * Get the background stroke style for the text.\n * @return {module:ol/style/Stroke} Stroke style.\n * @api\n */\nText.prototype.getBackgroundStroke = function() {\n  return this.backgroundStroke_;\n};\n\n\n/**\n * Get the padding for the text.\n * @return {Array.<number>} Padding.\n * @api\n */\nText.prototype.getPadding = function() {\n  return this.padding_;\n};\n\n\n/**\n * Set the `overflow` property.\n *\n * @param {boolean} overflow Let text overflow the path that it follows.\n * @api\n */\nText.prototype.setOverflow = function(overflow) {\n  this.overflow_ = overflow;\n};\n\n\n/**\n * Set the font.\n *\n * @param {string|undefined} font Font.\n * @api\n */\nText.prototype.setFont = function(font) {\n  this.font_ = font;\n};\n\n\n/**\n * Set the maximum angle between adjacent characters.\n *\n * @param {number} maxAngle Angle in radians.\n * @api\n */\nText.prototype.setMaxAngle = function(maxAngle) {\n  this.maxAngle_ = maxAngle;\n};\n\n\n/**\n * Set the x offset.\n *\n * @param {number} offsetX Horizontal text offset.\n * @api\n */\nText.prototype.setOffsetX = function(offsetX) {\n  this.offsetX_ = offsetX;\n};\n\n\n/**\n * Set the y offset.\n *\n * @param {number} offsetY Vertical text offset.\n * @api\n */\nText.prototype.setOffsetY = function(offsetY) {\n  this.offsetY_ = offsetY;\n};\n\n\n/**\n * Set the text placement.\n *\n * @param {module:ol/style/TextPlacement|string} placement Placement.\n * @api\n */\nText.prototype.setPlacement = function(placement) {\n  this.placement_ = placement;\n};\n\n\n/**\n * Set the fill.\n *\n * @param {module:ol/style/Fill} fill Fill style.\n * @api\n */\nText.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number|undefined} rotation Rotation.\n * @api\n */\nText.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number|undefined} scale Scale.\n * @api\n */\nText.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set the stroke.\n *\n * @param {module:ol/style/Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Set the text.\n *\n * @param {string|undefined} text Text.\n * @api\n */\nText.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Set the text alignment.\n *\n * @param {string|undefined} textAlign Text align.\n * @api\n */\nText.prototype.setTextAlign = function(textAlign) {\n  this.textAlign_ = textAlign;\n};\n\n\n/**\n * Set the text baseline.\n *\n * @param {string|undefined} textBaseline Text baseline.\n * @api\n */\nText.prototype.setTextBaseline = function(textBaseline) {\n  this.textBaseline_ = textBaseline;\n};\n\n\n/**\n * Set the background fill.\n *\n * @param {module:ol/style/Fill} fill Fill style.\n * @api\n */\nText.prototype.setBackgroundFill = function(fill) {\n  this.backgroundFill_ = fill;\n};\n\n\n/**\n * Set the background stroke.\n *\n * @param {module:ol/style/Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setBackgroundStroke = function(stroke) {\n  this.backgroundStroke_ = stroke;\n};\n\n\n/**\n * Set the padding (`[top, right, bottom, left]`).\n *\n * @param {!Array.<number>} padding Padding.\n * @api\n */\nText.prototype.setPadding = function(padding) {\n  this.padding_ = padding;\n};\nexport default Text;\n","module.exports = ol.style.Icon;","module.exports = ol.style.Stroke;","module.exports = ol.style.Fill;","module.exports = ol.style.Style;","/*\nol-mapbox-style - Use Mapbox Style objects with OpenLayers\nCopyright 2016-present Boundless Spatial, Inc.\nLicense: https://raw.githubusercontent.com/boundlessgeo/ol-mapbox-gl-style/master/LICENSE\n*/\n\nimport mb2css from 'mapbox-to-css-font';\nimport applyStyleFunction, {getValue} from './stylefunction';\nimport googleFonts from 'webfont-matcher/lib/fonts/google';\nimport {fromLonLat} from 'ol/proj';\nimport {createXYZ} from 'ol/tilegrid';\nimport Map from 'ol/Map';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport MVT from 'ol/format/MVT';\nimport {unByKey} from 'ol/Observable';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorTileLayer from 'ol/layer/VectorTile';\nimport TileJSON from 'ol/source/TileJSON';\nimport VectorSource from 'ol/source/Vector';\nimport VectorTileSource from 'ol/source/VectorTile';\nimport XYZ from 'ol/source/XYZ';\nimport Color from '@mapbox/mapbox-gl-style-spec/util/color';\n\nvar fontFamilyRegEx = /font-family: ?([^;]*);/;\nvar stripQuotesRegEx = /(\"|')/g;\nfunction hasFontFamily(family) {\n  var styleSheets = document.styleSheets;\n  for (var i = 0, ii = styleSheets.length; i < ii; ++i) {\n    const cssRules = styleSheets[i].cssRules;\n    if (cssRules) {\n      for (var j = 0, jj = cssRules.length; j < jj; ++j) {\n        const cssRule = cssRules[j];\n        if (cssRule.type == 5) {\n          var match = cssRule.cssText.match(fontFamilyRegEx);\n          if (match[1].replace(stripQuotesRegEx, '') == family) {\n            return true;\n          }\n        }\n      }\n    }\n  }\n  return false;\n}\n\nvar fontFamilies = {};\nvar googleFamilies = googleFonts.getNames();\nfunction getFonts(fonts) {\n  if (fonts in fontFamilies) {\n    return fontFamilies[fonts];\n  }\n  var families = fonts.map(function(font) {\n    return mb2css(font, 1).split(' 1px ')[1].replace(/\"/g, '');\n  });\n  var family = families[0];\n  if (!hasFontFamily(family) && googleFamilies.indexOf(family) !== -1) {\n    var fontUrl = 'https://fonts.googleapis.com/css?family=' + family.replace(/ /g, '+');\n    if (!document.querySelector('link[href=\"' + fontUrl + '\"]')) {\n      var markup = document.createElement('link');\n      markup.href = fontUrl;\n      markup.rel = 'stylesheet';\n      document.getElementsByTagName('head')[0].appendChild(markup);\n    }\n  }\n  return fonts;\n}\n\nvar spriteRegEx = /^(.*)(\\?.*)$/;\n\nfunction withPath(url, path) {\n  if (path && url.indexOf('http') != 0) {\n    url = path + url;\n  }\n  return url;\n}\n\nfunction toSpriteUrl(url, path, extension) {\n  url = withPath(url, path);\n  var parts = url.match(spriteRegEx);\n  return parts ?\n    parts[1] + extension + (parts.length > 2 ? parts[2] : '') :\n    url + extension;\n}\n\n/**\n * Applies a style function to an `ol.layer.VectorTile` or `ol.layer.Vector`\n * with an `ol.source.VectorTile` or an `ol.source.Vector`. The style function\n * will render all layers from the `glStyle` object that use the specified\n * `source`, or a subset of layers from the same source. The source needs to be\n * a `\"type\": \"vector\"`, `\"type\": \"geojson\"` or `\"type\": \"raster\"` source.\n *\n * @param {ol.layer.VectorTile} layer OpenLayers layer.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string} source `source` key or an array of layer `id`s from the\n * Mapbox Style object. When a `source` key is provided, all layers for the\n * specified source will be included in the style function. When layer `id`s\n * are provided, they must be from layers that use the same source.\n * @param {string} [path=undefined] Path of the style file. Only required when\n * a relative path is used with the `\"sprite\"` property of the style.\n * @param {Array<number>} [resolutions=undefined] Resolutions for mapping resolution to zoom level.\n * @return {Promise} Promise which will be resolved when the style can be used\n * for rendering.\n */\nexport function applyStyle(layer, glStyle, source, path, resolutions) {\n  return new Promise(function(resolve, reject) {\n\n    if (typeof glStyle != 'object') {\n      glStyle = JSON.parse(glStyle);\n    }\n    if (glStyle.version != 8) {\n      reject(new Error('glStyle version 8 required.'));\n    }\n\n    var spriteScale, spriteData, spriteImageUrl, style;\n    function onChange() {\n      if (!style && (!glStyle.sprite || spriteData)) {\n        if (layer instanceof VectorLayer || layer instanceof VectorTileLayer) {\n          style = applyStyleFunction(layer, glStyle, source, resolutions, spriteData, spriteImageUrl, getFonts);\n        }\n        resolve();\n      } else if (style) {\n        layer.setStyle(style);\n      }\n    }\n\n    if (glStyle.sprite) {\n      spriteScale = window.devicePixelRatio >= 1.5 ? 0.5 : 1;\n      var sizeFactor = spriteScale == 0.5 ? '@2x' : '';\n      var spriteUrl = toSpriteUrl(glStyle.sprite, path, sizeFactor + '.json');\n\n      fetch(spriteUrl, {credentials: 'same-origin'})\n        .then(function(response) {\n          // if the response is ready return the JSON promise\n          if (response.status === 200) {\n            return response.json();\n          } else if (sizeFactor !== '') {\n            // return the JSON promise for the low-resolution sprites.\n            sizeFactor = '';\n            spriteUrl = toSpriteUrl(glStyle.sprite, path, '.json');\n            return fetch(spriteUrl, {credentials: 'same-origin'}).then(r => r.json());\n          }\n        })\n        .then(function(spritesJson) {\n          if (spritesJson === undefined) {\n            throw 'No sprites found.';\n          }\n          spriteData = spritesJson;\n          spriteImageUrl = toSpriteUrl(glStyle.sprite, path, sizeFactor + '.png');\n          onChange();\n        })\n        .catch(function(err) {\n          console.error(err);\n          reject(new Error('Sprites cannot be loaded from ' + spriteUrl));\n        });\n    } else {\n      onChange();\n    }\n\n  });\n}\n\nconst emptyObj = {};\n\nfunction setBackground(map, layer) {\n  function updateStyle() {\n    var element = map.getTargetElement();\n    if (!element) {\n      return;\n    }\n    var layout = layer.layout || {};\n    var paint = layer.paint || {};\n    var zoom = map.getView().getZoom();\n    if ('background-color' in paint) {\n      var bg = getValue(layer, 'paint', 'background-color', zoom, emptyObj);\n      element.style.backgroundColor = Color.parse(bg).toString();\n    }\n    if ('background-opacity' in paint) {\n      element.style.backgroundOpacity =\n        getValue(layer, 'paint', 'background-opacity', zoom, emptyObj);\n    }\n    if (layout.visibility == 'none') {\n      element.style.backgroundColor = '';\n      element.style.backgroundOpacity = '';\n    }\n  }\n  if (map.getTargetElement()) {\n    updateStyle();\n  }\n  map.on(['change:resolution', 'change:target'], updateStyle);\n}\n\n/**\n * Applies properties of the Mapbox Style's first `background` layer to the map.\n * @param {ol.Map} map OpenLayers Map.\n * @param {Object} glStyle Mapbox Style object.\n */\nexport function applyBackground(map, glStyle) {\n  glStyle.layers.some(function(l) {\n    if (l.type == 'background') {\n      setBackground(map, l);\n      return true;\n    }\n  });\n}\n\nfunction getSourceIdByRef(layers, ref) {\n  var sourceId;\n  layers.some(function(layer) {\n    if (layer.id == ref) {\n      sourceId = layer.source;\n      return true;\n    }\n  });\n  return sourceId;\n}\n\nfunction processStyle(glStyle, map, baseUrl, host, path, accessToken) {\n  var view = map.getView();\n  if ('center' in glStyle && !view.getCenter()) {\n    view.setCenter(fromLonLat(glStyle.center));\n  }\n  if ('zoom' in glStyle && view.getZoom() === undefined) {\n    view.setZoom(glStyle.zoom);\n  }\n  if (!view.getCenter() || view.getZoom() === undefined) {\n    view.fit(view.getProjection().getExtent(), {\n      nearest: true,\n      size: map.getSize()\n    });\n  }\n  if (glStyle.sprite) {\n    if (glStyle.sprite.indexOf('mapbox://') == 0) {\n      glStyle.sprite = baseUrl + '/sprite' + accessToken;\n    } else if (glStyle.sprite.indexOf('http') != 0) {\n      glStyle.sprite = (host ? (host + path) : '') + glStyle.sprite + accessToken;\n    }\n  }\n\n  var glLayers = glStyle.layers;\n  var geoJsonFormat = new GeoJSON();\n  var layerIds = [];\n\n  function finalizeLayer(layer) {\n    if (layerIds.length > 0) {\n      map.addLayer(layer);\n      var setStyle = function() {\n        applyStyle(layer, glStyle, layerIds, path).then(function() {\n          layer.setVisible(true);\n        }, function(e) {\n          /*eslint no-console: [\"error\", { allow: [\"error\"] }] */\n          console.error(e);\n        });\n      };\n      if (layer.getSource()) {\n        setStyle();\n      } else {\n        layer.once('change:source', setStyle);\n      }\n    }\n  }\n\n  var glLayer, glSource, glSourceId, id, layer, mapid, transition, url;\n  for (var i = 0, ii = glLayers.length; i < ii; ++i) {\n    glLayer = glLayers[i];\n    if (glLayer.type == 'background') {\n      setBackground(map, glLayer);\n    } else {\n      id = glLayer.source || getSourceIdByRef(glLayers, glLayer.ref);\n      if (id != glSourceId) {\n        finalizeLayer(layer);\n        layerIds = [];\n        glSource = glStyle.sources[id];\n        url = glSource.url;\n        var tiles = glSource.tiles;\n        if (url) {\n          if (url.indexOf('mapbox://') == 0) {\n            mapid = url.replace('mapbox://', '');\n            tiles = ['a', 'b', 'c', 'd'].map(function(host) {\n              return 'https://' + host + '.tiles.mapbox.com/v4/' + mapid +\n                  '/{z}/{x}/{y}.' +\n                  (glSource.type == 'vector' ? 'vector.pbf' : 'png') +\n                  accessToken;\n            });\n          }\n        }\n\n        if (glSource.type == 'vector') {\n          layer = tiles ? (function() {\n            var tileGrid = createXYZ({\n              tileSize: 512,\n              maxZoom: 'maxzoom' in glSource ? glSource.maxzoom : 22,\n              minZoom: glSource.minzoom\n            });\n            return new VectorTileLayer({\n              declutter: true,\n              maxResolution: tileGrid.getMinZoom() > 0 ?\n                tileGrid.getResolution(tileGrid.getMinZoom()) : undefined,\n              source: new VectorTileSource({\n                attributions: glSource.attribution,\n                format: new MVT(),\n                tileGrid: tileGrid,\n                urls: tiles\n              }),\n              visible: false,\n              zIndex: i\n            });\n          })() : (function() {\n            var layer = new VectorTileLayer({\n              declutter: true,\n              visible: false,\n              zIndex: i\n            });\n            var tilejson = new TileJSON({\n              url: url\n            });\n            var key = tilejson.on('change', function() {\n              if (tilejson.getState() == 'ready') {\n                var tileJSONDoc = tilejson.getTileJSON();\n                var tiles = Array.isArray(tileJSONDoc.tiles) ? tileJSONDoc.tiles : [tileJSONDoc.tiles];\n                for (var i = 0, ii = tiles.length; i < ii; ++i) {\n                  var tile = tiles[i];\n                  if (tile.indexOf('http') != 0) {\n                    tiles[i] = glSource.url + tile;\n                  }\n                }\n                var tileGrid = tilejson.getTileGrid();\n                layer.setSource(new VectorTileSource({\n                  attributions: tilejson.getAttributions() || tileJSONDoc.attribution,\n                  format: new MVT(),\n                  tileGrid: createXYZ({\n                    minZoom: tileGrid.getMinZoom(),\n                    maxZoom: tileGrid.getMaxZoom(),\n                    tileSize: 512\n                  }),\n                  urls: tiles\n                }));\n                if (tileGrid.getMinZoom() > 0) {\n                  layer.setMaxResolution(\n                    tileGrid.getResolution(tileGrid.getMinZoom()));\n                }\n                unByKey(key);\n              }\n            });\n            return layer;\n          })();\n        } else if (glSource.type == 'raster') {\n          var source;\n          if (!glSource.tiles) {\n            source = (function() {\n              return new TileJSON({\n                transition: transition,\n                url: url,\n                crossOrigin: 'anonymous'\n              });\n            })();\n          } else {\n            source = new XYZ({\n              transition: transition,\n              attributions: glSource.attribution,\n              minZoom: glSource.minzoom,\n              maxZoom: 'maxzoom' in glSource ? glSource.maxzoom : 22,\n              tileSize: glSource.tileSize || 512,\n              url: url,\n              urls: glSource.tiles,\n              crossOrigin: 'anonymous'\n            });\n            transition = 0;\n          }\n          source.setTileLoadFunction(function(tile, src) {\n            if (src.indexOf('{bbox-epsg-3857}') != -1) {\n              var bbox = source.getTileGrid().getTileCoordExtent(tile.getTileCoord());\n              src = src.replace('{bbox-epsg-3857}', bbox.toString());\n            }\n            tile.getImage().src = src;\n          });\n          layer = new TileLayer({\n            source: source,\n            visible: glLayer.layout ? glLayer.layout.visibility !== 'none' : true\n          });\n        } else if (glSource.type == 'geojson') {\n          var data = glSource.data;\n          var features, geoJsonUrl;\n          if (typeof data == 'string') {\n            geoJsonUrl = withPath(data, path);\n          } else {\n            features = geoJsonFormat.readFeatures(data, {featureProjection: 'EPSG:3857'});\n          }\n          layer = new VectorLayer({\n            source: new VectorSource({\n              attributions: glSource.attribution,\n              features: features,\n              format: geoJsonFormat,\n              url: geoJsonUrl\n            }),\n            visible: false,\n            zIndex: i\n          });\n        }\n        glSourceId = id;\n      }\n      layerIds.push(glLayer.id);\n    }\n  }\n  finalizeLayer(layer);\n  map.set('mapbox-style', glStyle);\n}\n\n/**\n * Loads and applies a Mapbox Style object to an OpenLayers Map. This includes\n * the map background, the layers, the center and the zoom.\n *\n * The center and zoom will only be set if present in the Mapbox Style document,\n * and if not already set on the OpenLayers map.\n *\n * Layers will be added to the OpenLayers map, without affecting any layers that\n * might already be set on the map.\n *\n * Layers added by `apply()` will have two additional properties:\n *\n *  * `mapbox-source`: The `id` of the Mapbox Style document's source that the\n *    OpenLayers layer was created from. Usually `apply()` creates one\n *    OpenLayers layer per Mapbox Style source, unless the layer stack has\n *    layers from different sources in between.\n *  * `mapbox-layers`: The `id`s of the Mapbox Style document's layers that are\n *    included in the OpenLayers layer.\n *\n * The map returned by this function will have an additional `mapbox-style`\n * property which holds the Mapbox Style object.\n *\n * @param {ol.Map|HTMLElement|string} map Either an existing OpenLayers Map\n * instance, or a HTML element, or the id of a HTML element that will be the\n * target of a new OpenLayers Map.\n * @param {string|Object} style JSON style object or style url pointing to a\n * Mapbox Style object. When using Mapbox APIs, the url must contain an access\n * token and look like\n * `https://api.mapbox.com/styles/v1/mapbox/bright-v9?access_token=[your_access_token_here]`.\n * When passed as JSON style object, all OpenLayers layers created by `apply()`\n * will be immediately available, but they may not have a source yet (i.e. when\n * they are defined by a TileJSON url in the Mapbox Style document). When passed\n * as style url, layers will be added to the map when the Mapbox Style document\n * is loaded and parsed.\n * @return {ol.Map} The OpenLayers Map instance that will be populated with the\n * contents described in the Mapbox Style object.\n */\nexport function apply(map, style) {\n\n  var accessToken, baseUrl, host, path;\n  accessToken = baseUrl = host = path = '';\n\n  if (!(map instanceof Map)) {\n    map = new Map({\n      target: map\n    });\n  }\n\n  if (typeof style === 'string') {\n    var parts = style.match(spriteRegEx);\n    if (parts) {\n      baseUrl = parts[1];\n      accessToken = parts.length > 2 ? parts[2] : '';\n    }\n\n    fetch(style, {\n      credentials: 'same-origin'\n    })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function(glStyle) {\n        var a = document.createElement('A');\n        a.href = style;\n        path = a.pathname.split('/').slice(0, -1).join('/') + '/';\n        host = style.substr(0, style.indexOf(path));\n\n        processStyle(glStyle, map, baseUrl, host, path, accessToken);\n      })\n      .catch(function(err) {\n        console.error(err);\n        throw new Error('Could not load ' + style);\n      });\n  } else {\n    setTimeout(function() {\n      processStyle(style, map);\n    }, 0);\n  }\n  return map;\n}\n\n/**\n * Get the OpenLayers layer instance that contains the provided Mapbox Style\n * `layer`. Note that multiple Mapbox Style layers are combined in a single\n * OpenLayers layer instance when they use the same Mapbox Style `source`.\n * @param {ol.Map} map OpenLayers Map.\n * @param {string} layerId Mapbox Style layer id.\n * @return {ol.layer.Layer} layer OpenLayers layer instance.\n */\nexport function getLayer(map, layerId) {\n  const layers = map.getLayers().getArray();\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    if (layers[i].get('mapbox-layers').indexOf(layerId) !== -1) {\n      return layers[i];\n    }\n  }\n}\n\n/**\n * Get the OpenLayers source instance for the provided Mapbox Style `source`.\n * @param {ol.Map} map OpenLayers Map.\n * @param {string} sourceId Mapbox Style source id.\n * @return {ol.layer.Layer} layer OpenLayers layer instance.\n */\nexport function getSource(map, sourceId) {\n  const layers = map.getLayers().getArray();\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    const source = layers[i].getSource();\n    if (layers[i].get('mapbox-source').indexOf(sourceId) !== -1) {\n      return source;\n    }\n  }\n}\n","import {apply, applyBackground, applyStyle} from './index';\nimport stylefunction from './stylefunction';\n\nexport default {\n  apply: apply,\n  applyBackground: applyBackground,\n  applyStyle: applyStyle,\n  stylefunction: stylefunction\n};\n"],"sourceRoot":""}